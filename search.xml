<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>C++_1</title>
      <link href="/2021/03/07/c-1/"/>
      <url>/2021/03/07/c-1/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>LeetCode_Day1</title>
      <link href="/2021/03/06/leetcode-day1/"/>
      <url>/2021/03/06/leetcode-day1/</url>
      
        <content type="html"><![CDATA[<p>[1] Two Sum  </p><p><a href="https://leetcode.com/problems/two-sum/description/">https://leetcode.com/problems/two-sum/description/</a></p><ul><li>algorithms</li><li>Easy (46.37%)</li><li>Likes:    19171</li><li>Dislikes: 682</li><li>Total Accepted:    3.8M</li><li>Total Submissions: 8.3M</li><li>Testcase Example:  ‘[2,7,11,15]\n9’</li></ul><p>Given an array of integers <code>nums</code>&nbsp;and an integer <code>target</code>, return <em>indices of the two numbers such that they add up to <code>target</code></em>.</p><p>You may assume that each input would have <strong><em>exactly</em> one solution</strong>, and you may not use the <em>same</em> element twice.</p><p>You can return the answer in any order.</p><p>&nbsp;</p><p><strong>Example 1:</strong></p><pre><strong>Input:</strong> nums = [2,7,11,15], target = 9<strong>Output:</strong> [0,1]<strong>Output:</strong> Because nums[0] + nums[1] == 9, we return [0, 1].</pre><p><strong>Example 2:</strong></p><pre><strong>Input:</strong> nums = [3,2,4], target = 6<strong>Output:</strong> [1,2]</pre><p><strong>Example 3:</strong></p><pre><strong>Input:</strong> nums = [3,3], target = 6<strong>Output:</strong> [0,1]</pre><p>&nbsp;</p><p><strong>Constraints:</strong></p><ul>    <li><code>2 &lt;= nums.length &lt;= 10<sup>3</sup></code></li>    <li><code>-10<sup>9</sup> &lt;= nums[i] &lt;= 10<sup>9</sup></code></li>    <li><code>-10<sup>9</sup> &lt;= target &lt;= 10<sup>9</sup></code></li>    <li><strong>Only one valid answer exists.</strong></li></ul><p><strong>Approach 1:</strong> Brute Force</p><p>Loop through each element <code>x</code>  and find if there is another value that equals to <code>target - x</code> </p><pre><code class="line-numbers language-c++">class Solution &#123;public:        vector&lt;int&gt; twoSum(vector&lt;int&gt;&amp; nums, int target) &#123;            vector&lt;int&gt; answer;            int i, j;            for(i = 0; i&lt; nums.size() - 1; i++)&#123;                for(j = i + 1; j &lt; nums.size(); j++)&#123;                    int diff = target - nums[j];                    if(nums[i] == diff)&#123;                        answer.push_back(i);                        answer.push_back(j);                    &#125;                &#125;            &#125;            return answer;    &#125;&#125;;</code></pre><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/img/20210211230613.png"></p><p><strong>Complexity Analysis</strong> </p><ul><li>Time Complexity: $O(n^2)$</li><li>Space Complexity: $O(1)$</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> LeetCode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>COC</title>
      <link href="/2021/03/02/coc/"/>
      <url>/2021/03/02/coc/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>FZF</title>
      <link href="/2021/02/28/fzf/"/>
      <url>/2021/02/28/fzf/</url>
      
        <content type="html"><![CDATA[<p><a href="https://github.com/junegunn/fzf">fzf</a> 是一个非常强大的终端文件模糊查找神器,在mac下也有许多优秀的工具,比如mac自带的    <code>spotlight</code> , <a href="https://www.alfredapp.com/">Alfred</a> ,这些工具在桌面环境下非常好用,也十分漂亮,但我的工作一般都在终端下, fzf解决了我的问题. fzf有很多优点,可移植,速度超快,最重要的是,当fzf与 <strong>zsh, ranger, vim</strong> 碰撞在一起,极大的提高了我的工作效率.    </p><h2 id="FZF"><a href="#FZF" class="headerlink" title="FZF"></a>FZF</h2><ul><li>fzf的安装非常简单,在mac下,可以使用<code>Homebrew</code>来安装:</li></ul><pre><code class="line-numbers language-bash">brew install fzf</code></pre><p>现在就可以通过 <code>fzf</code> 命令来使用fzf了</p><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/img/20210301101707.png"></p><p>如果你刚安装完成,你的界面跟上图不一样,没有右侧的预览窗口,别着急,这些是可以在配置文件中修改的.</p><ul><li>如果要安装    <code> key bindings</code> 和 <code>fuzzy completion</code> :</li></ul><pre><code class="line-numbers language-bash">$(brew --prefix)/opt/fzf/install</code></pre><p>一路y,则会在你的根目录下生成 <code>.fzf.bash</code> 和 <code>.fzf.zsh</code> 文件,想要配置fzf,则只需修改相应的文件即可.</p><h2 id="FZF-ZSH-AMAZING"><a href="#FZF-ZSH-AMAZING" class="headerlink" title="FZF + ZSH = AMAZING"></a>FZF + ZSH = AMAZING</h2><p>fzf的配置文件写在 <code>.fzf.zsh</code> 中, 由于我的 <code>zsh</code> 配置文件在 <code>.config/zsh</code> 目录下, 所以我将fzf的配置文件也移到此处</p><pre><code class="line-numbers language-bash">mv ~/.fzf.zsh ~/.config/zsh/fzf.zsh</code></pre><p>下面开始配置 <code>fzf.zsh</code> 文件</p><ul><li>fzf的默认搜索工具: ag</li></ul><pre><code class="line-numbers language-bash">export FZF_DEFAULT_COMMAND=&#39;ag&#39;export FZF_DEFAULT_COMMAND=&#39;ag --hidden --ignore .git -g &quot;&quot;&#39;</code></pre><p>上面两条任选其一, 第二条表示搜索到的文件包含隐藏文件,忽略 <code>.git</code> 文件</p><ul><li>模糊查找补全</li></ul><p>fzf的默认键位为 <code>**</code> ,太麻烦了,换成 <code>\</code> 就舒服多了</p><pre><code class="line-numbers language-bash">export FZF_COMPLETION_TRIGGER=&#39;\&#39;</code></pre><ul><li>预览窗口的实现</li></ul><pre><code class="line-numbers language-bash">export FZF_DEFAULT_OPTS=&#39;--bind ctrl-k:down,ctrl-i:up --preview &quot;[[ $(file --mime &#123;&#125;) =~ binary ]] &amp;&amp; echo &#123;&#125; is a binary file || (ccat --color=always &#123;&#125; || highlight -O ansi -l &#123;&#125; || cat &#123;&#125;) 2&gt; /dev/null | head -500&quot;&#39;</code></pre><p>结合我的vim使用习惯,我将 <code>ctrl + i</code> 设置为向上, <code>ctrl + k</code> 设置为向下</p><p>当然,还有一些其他的配置,这些都可以在fzf的文档里找到.</p><h2 id="FZF-RANGER-EXCELLENT"><a href="#FZF-RANGER-EXCELLENT" class="headerlink" title="FZF + RANGER = EXCELLENT"></a>FZF + RANGER = EXCELLENT</h2><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/img/ranger.gif"></p><p>fzf 和ranger 结合可直接在ranger下进行文件搜索,直接跳转到文件所在目录</p><ul><li>首先在ranger的配置文件中设置打开fzf搜索的快捷键( <code>ctrl+f</code> )</li></ul><pre><code class="line-numbers language-bash">vim ~/.config/ranger/rc.conf// add the following linemap &lt;C-f&gt; fzf_select</code></pre><ul><li>在 <code>commands.py</code> 中添加    <code>fzf_select</code> 函数</li></ul><pre><code class="line-numbers language-python">class fzf_select(Command):    &quot;&quot;&quot;    :fzf_select    Find a file using fzf.    With a prefix argument select only directories.    See: https://github.com/junegunn/fzf    &quot;&quot;&quot;    def execute(self):        import subprocess        import os.path        if self.quantifier:            # match only directories            command=&quot;find -L . \( -path &#39;*/\.*&#39; -o -fstype &#39;dev&#39; -o -fstype &#39;proc&#39; \) -prune \            -o -type d -print 2&gt; /dev/null | sed 1d | cut -b3- | fzf +m&quot;        else:            # match files and directories            command=&quot;find -L . \( -path &#39;*/\.*&#39; -o -fstype &#39;dev&#39; -o -fstype &#39;proc&#39; \) -prune \            -o -print 2&gt; /dev/null | sed 1d | cut -b3- | fzf +m&quot;        fzf = self.fm.execute_command(command, universal_newlines=True, stdout=subprocess.PIPE)        stdout, stderr = fzf.communicate()        if fzf.returncode == 0:            fzf_file = os.path.abspath(stdout.rstrip(&#39;\n&#39;))            if os.path.isdir(fzf_file):                self.fm.cd(fzf_file)            else:                self.fm.select_file(fzf_file)</code></pre><h2 id="FZF-VIM-UNBELIVABLE"><a href="#FZF-VIM-UNBELIVABLE" class="headerlink" title="FZF + VIM = UNBELIVABLE"></a>FZF + VIM = UNBELIVABLE</h2><p><a href="https://github.com/junegunn/fzf.vim">fzf.vim</a> 是fzf为vim玩家编写的插件</p><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/img/20210301113521.png"></p><p><code>fzf.vim</code> 的 <a href="https://godliuyang.wang/2021/02/20/neovim/#toc-heading-8">详细配置与快捷键设置</a> </p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>LINUX</title>
      <link href="/2021/02/27/linux/"/>
      <url>/2021/02/27/linux/</url>
      
        <content type="html"><![CDATA[<h2 id="USER"><a href="#USER" class="headerlink" title="USER"></a>USER</h2><ul><li>添加用户</li></ul><pre><code class="line-numbers language-bash">sudo adduser username</code></pre><ul><li>将用户添加到sudo组</li></ul><pre><code class="line-numbers language-bash">sudo usermod -aG sudo username</code></pre><ul><li>删除用户</li></ul><pre><code class="line-numbers language-bash">sudo deluser username</code></pre><ul><li>删除用户,并删除加目录</li></ul><pre><code class="line-numbers language-bash">sudo deluser --remove-home username</code></pre>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Git</title>
      <link href="/2021/02/27/git/"/>
      <url>/2021/02/27/git/</url>
      
        <content type="html"><![CDATA[<h1 id="1-Github-Cheat-Sheet"><a href="#1-Github-Cheat-Sheet" class="headerlink" title="1. Github Cheat Sheet"></a>1. Github Cheat Sheet</h1><h2 id="配置工具"><a href="#配置工具" class="headerlink" title="配置工具"></a>配置工具</h2><p>对所有本地仓库的用户信息进行配置</p><ul><li>对你的commit操作设置关联的用户名</li></ul><pre><code class="line-numbers language-bash">$ git config --global user.name &quot;[name]&quot;</code></pre><ul><li>对你的commit操作设置关联的邮箱地址</li></ul><pre><code class="line-numbers language-bash">$ git config --global user.email &quot;[email address]&quot;</code></pre><ul><li>启用有帮助的彩色命令行输出</li></ul><pre><code class="line-numbers language-bash">$ git config --global color.ui auto</code></pre><h2 id="分支"><a href="#分支" class="headerlink" title="分支"></a>分支</h2><p>分支是使用 Git 工作的一个重要部分。你做的任何提交都会发生在当前“checked out”到的分支上。使用<code>git status</code>查看那是哪个分支。</p><ul><li>创建一个新分支</li></ul><pre><code class="line-numbers language-bash">$ git branch [branch-name]</code></pre><ul><li>切换到指定分支并更新工作目录(working directory)</li></ul><pre><code class="line-numbers language-bash">$ git checkout [branch-name]</code></pre><ul><li>将指定分支的历史合并到当前分支。这通常在拉取请求(PR)中完成，但也是一个重要的 Git 操作。</li></ul><pre><code class="line-numbers language-bash">$ git merge [branch]</code></pre><ul><li>删除指定分支</li></ul><pre><code class="line-numbers language-bash">$ git branch -d [branch-name]</code></pre><h2 id="创建仓库"><a href="#创建仓库" class="headerlink" title="创建仓库"></a>创建仓库</h2><p>当着手于一个新的仓库时，你只需创建一次。要么在本地创建，然后推送到 GitHub；要么通过 clone 一个现有仓库。</p><ul><li>初始化仓库</li></ul><pre><code class="line-numbers language-bash">$ git init</code></pre><ul><li>在使用过<code>git init</code> 命令后，使用以下命令将本地仓库与一个 GitHub 上的空仓库连接起来, 即将现在目录转化为一个git仓库</li></ul><pre><code class="line-numbers language-bash">$ git remote add origin [url]</code></pre><ul><li>Clone（下载）一个已存在于 GitHub 上的仓库，包括所有的文件、分支和提交(commits)</li></ul><pre><code class="line-numbers language-bash">$ git clone [url]</code></pre><h2 id="gitignore文件"><a href="#gitignore文件" class="headerlink" title=".gitignore文件"></a>.gitignore文件</h2><p>有时一些文件最好不要用 Git 跟踪。这通常在名为<code>.gitignore</code>的特殊文件中完成。你可以在<a href="https://github.com/github/gitignore">github.com/github/gitignore</a> 找到有用的<code>.gitignore</code>文件模板.</p><h2 id="同步更改"><a href="#同步更改" class="headerlink" title="同步更改"></a>同步更改</h2><p>将你本地仓库与 GitHub.com 上的远端仓库同步</p><ul><li>下载远端跟踪分支的所有历史</li></ul><pre><code class="line-numbers language-bash">$ git fetch</code></pre><ul><li>将远端跟踪分支合并到当前本地分支</li></ul><pre><code class="line-numbers language-bash">git merge</code></pre><ul><li>将所有本地分支提交上传到 GitHub</li></ul><pre><code class="line-numbers language-bash">$ git push</code></pre><ul><li>使用来自 GitHub 的对应远端分支的所有新提交更新你当前的本地工作分支。·<code>git pull</code> 是 <code>git fetch</code> 和    <code>git merge</code> 的结合</li></ul><pre><code class="line-numbers language-bash">$ git pull</code></pre><h2 id="进行更改"><a href="#进行更改" class="headerlink" title="进行更改"></a>进行更改</h2><p>浏览并检查项目文件的发展</p><ul><li>列出当前分支的版本历史</li></ul><pre><code class="line-numbers language-bash">$ git log</code></pre><ul><li>列出文件的版本历史，包括重命名</li></ul><pre><code class="line-numbers language-bash">$ git log --follow [file]</code></pre><ul><li>展示两个分支之间的内容差异</li></ul><pre><code class="line-numbers language-bash">$ git diff [first-branch]...[second-branch]</code></pre><ul><li>输出指定commit的元数据和内容变化</li></ul><pre><code class="line-numbers language-bash">$ git show [commit]</code></pre><ul><li>将文件进行快照处理用于版本控制</li></ul><pre><code class="line-numbers language-bash">$ git add [file]</code></pre><ul><li>将文件快照永久地记录在版本历史中</li></ul><pre><code class="line-numbers language-bash">$ git commit -m &quot;[descriptive message]&quot;</code></pre><h2 id="重做提交"><a href="#重做提交" class="headerlink" title="重做提交"></a>重做提交</h2><p>清除错误和构建用于替换的历史</p><ul><li>撤销所有 <code>[commit]</code>  <strong>后</strong>的提交,在本地保存更改</li></ul><pre><code class="line-numbers language-bash">$ git reset [commit]</code></pre><ul><li>放弃所有历史，改回指定提交。</li></ul><pre><code class="line-numbers language-bash">$ git reset --hard [commit]</code></pre><h2 id="术语表"><a href="#术语表" class="headerlink" title="术语表"></a>术语表</h2><ul><li><strong>git</strong> : 一个开源的分布式版本控制系统</li><li><strong>GitHub</strong> : 一个托管和协作管理 Git 仓库的平台</li><li><strong>commit提交</strong> : 一个 Git 对象，是你整个仓库的快照的哈希值</li><li><strong>branch分支</strong> : 一个轻型可移动的 commit 指针</li><li><strong>clone</strong> : 一个仓库的本地版本，包含所有提交和分支</li><li><strong>remote远端</strong> : 一个 GitHub 上的公共仓库，所有小组成员通过它来交换修改</li><li><strong>fork</strong> : 一个属于另一用户的 GitHub 上的仓库的副本</li><li><strong>pull request 拉取请求</strong>: 一处用于比较和讨论分支上引入的差异，且具有评审、评论、集成测试等功能的地方</li><li><strong>HEAD</strong> : 代表你当前的工作目录。使用git checkout 可移动 HEAD 指针到不同的分支、标记(tags)或提交</li></ul>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Neovim</title>
      <link href="/2021/02/20/neovim/"/>
      <url>/2021/02/20/neovim/</url>
      
        <content type="html"><![CDATA[<p>本文是为了方便记忆vim插件的一些快捷键。这是我的配置地址：<a href="https://github.com/liuyaanng/nvim">nvim</a>, 该配置在你装完neovim之后，打开neovim后会自动安装插件，你需要修改的地方是下图中python位置以及markdown预览插件中的默认浏览器。<br><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/Neovim/1.jpg"> </p><p>我的vim插件大部分来自于一位大佬<a href="https://github.com/theniceboy">theniceboy</a>, 他在B站上出了很多包括vim, ranger, i3, dwm等等教程, 这是他的B站地址：<a href="https://space.bilibili.com/13081489?from=search&seid=4240676561582012103">theCW</a> </p><h2 id="1-Install-Neovim"><a href="#1-Install-Neovim" class="headerlink" title="1. Install Neovim"></a>1. Install Neovim</h2><p><a href="https://github.com/neovim/neovim/wiki/Installing-Neovim">Install Guide</a> </p><h2 id="2-有用的工具"><a href="#2-有用的工具" class="headerlink" title="2. 有用的工具"></a>2. 有用的工具</h2><ul><li>figlet</li></ul><pre><code class="line-numbers language-bash">brew install figlet</code></pre><h2 id="3-Vim基础快捷键"><a href="#3-Vim基础快捷键" class="headerlink" title="3. Vim基础快捷键"></a>3. Vim基础快捷键</h2><p>这里<code>&lt;LEADER&gt;</code>就是空格键</p><ul><li>基础快捷键</li></ul><pre><code class="line-numbers language-vim">- &#39;;&#39; :Save &amp; quit- &#39;Q&#39; quit- &#39;ctrl_q&#39; Exit Vim, unless there are some buffers which have been changed.- &#39;S&#39; save- &#39;&lt;LEADER&gt;rc&#39; open vimrcUndo -    `l` undo- &#39;Y&#39; Visual Mode : copy to system clipboard      Normal Mode : copy till the end of the line.- &#39;&gt;&#39; right indent- &#39;&lt;&#39; left indentSearch- &#39;&lt;LEADER&gt;&lt;CR&gt;&#39; highlight off- &#39;=&#39; next- &#39;-&#39; last- &#39;&lt;LEADER&gt;dw&#39; adjacent duplicate wordsSpace to Tab- &#39;&lt;LEADER&gt;tt&#39; turn space to tabFolding- &#39;&lt;LEADER&gt;o&#39; foldingLazyGit- &#39;\g&#39; :Git- &#39;ctrl_g&#39; open lazygitCursor Movement&quot;     ^&quot;     u&quot; &lt; n   i &gt;&quot;     e&quot;     v- &#39;u&#39; up- &#39;e&#39; down- &#39;n&#39; left- &#39;i&#39; right- &#39;N&#39; go to the start of the line- &#39;I&#39; go to the end of the line- &#39;\v&#39; choose current line- &#39;w&#39; go to the next word or sign- &#39;b&#39; go to the last word or sign- &#39;h&#39; go to the next end of word- &#39;ctrl_U&#39; move up the view port without moving the cursor- &#39;ctrl_E&#39; move down the view port without moving the cursor- &#39;ctrl_a&#39; Insert Mode: move to the end of current line           Command Mode: move to the start of command lineCommand Mode Cursor Movement - &#39;ctrl_a&#39; move to the start of command line- &#39;ctrl_e&#39; move to the end of command line- &#39;ctrl_p&#39; move up- &#39;ctrl_n&#39; move down - &#39;ctrl_b&#39; move left- &#39;ctrl_f&#39; move right- &#39;alt_b&#39; move to last word- &#39;alt_w&#39; move to next wordSplit the screen- &#39;su&#39; to up- &#39;se&#39; to down- &#39;sn&#39; to left- &#39;si&#39; to rightWindow management- &#39;&lt;LEADER&gt;w&#39; go to last window- &#39;&lt;LEADER&gt;u&#39; up- &#39;&lt;LEADER&gt;e&#39; down- &#39;&lt;LEADER&gt;n&#39; left- &#39;&lt;LEADER&gt;i&#39; right- &#39;sh&#39; place the two windows up and down- &#39;sv&#39; place the two windows left and right- &#39;&lt;LEADER&gt;q&#39; close the window below the current window- &#39;qf&#39; close current windowRotate screen- &#39;srh&#39; horizontal rotate- &#39;srv&#39; vertical rotateResize splits- &#39;&lt;up&gt;&#39; increase horizontal size- &#39;&lt;down&gt;&#39; decrease horizontal size- &#39;&lt;left&gt;&#39; decrease vertical size- &#39;&lt;right&gt;&#39; increase vertical sizeTab management- &#39;tu&#39; create a new tab- &#39;tn&#39; move to left tab- &#39;ti&#39; move to right tab- &#39;tmn&#39; move current tab to left- &#39;tmi&#39; move current tab to right- &#39;&lt;LEADER&gt;/&#39; open a terminal window- &#39;tx&#39; use &#39;figlet&#39; to generate words- &#39;\s&#39; find and replace</code></pre><h2 id="4-Vim-插件"><a href="#4-Vim-插件" class="headerlink" title="4. Vim 插件"></a>4. Vim 插件</h2><h3 id="Pretty-Dress"><a href="#Pretty-Dress" class="headerlink" title="Pretty Dress"></a>Pretty Dress</h3><ul><li><a href="https://github.com/bling/vim-bufferline">vim-bufferline</a> </li><li><a href="https://github.com/bpietravalle/vim-bolt">vim-bolt</a> </li><li><a href="https://github.com/ajmwagar/vim-deus">vim-deus</a> </li></ul><h3 id="Status-line"><a href="#Status-line" class="headerlink" title="Status line"></a>Status line</h3><ul><li><a href="https://github.com/theniceboy/eleline.vim">lelline</a> </li><li><a href="https://github.com/ojroques/vim-scrollstatus">vim-scrollstatus</a> </li></ul><h3 id="General-Highlight"><a href="#General-Highlight" class="headerlink" title="General Highlight"></a>General Highlight</h3><ul><li><a href="https://github.com/RRethy/vim-hexokinase">vim-hexokinase</a> </li><li><a href="https://github.com/RRethy/vim-illuminate">vim-illuminate</a> </li></ul><h3 id="File-navigation"><a href="#File-navigation" class="headerlink" title="File navigation"></a>File navigation</h3><ul><li><p><a href="https://github.com/Yggdroot/LeaderF">LeaderF</a> </p></li><li><p><a href="https://github.com/junegunn/fzf.vim">fzf.vim</a><br><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/img/20210301113521.png"></p><ul><li><p><a href="https://github.com/junegunn/fzf/blob/master/README-VIM.md">fzf.vim README</a> </p></li><li><p>安装</p><pre><code class="line-numbers language-vim">Plug &#39;junegunn/fzf.vim&#39;</code></pre><p>配置</p><pre><code class="line-numbers language-vim">&quot; ===&quot; === FZF&quot; ===set rtp+=/usr/local/opt/fzf&quot; set rtp+=/home/linuxbrew/.linuxbrew/opt/fzf&quot; noremap &lt;silent&gt; &lt;C-p&gt; :Files&lt;CR&gt;noremap &lt;silent&gt; &lt;C-p&gt; :Leaderf file&lt;CR&gt;noremap &lt;silent&gt; &lt;C-f&gt; :Rg&lt;CR&gt;noremap &lt;silent&gt; &lt;C-h&gt; :History&lt;CR&gt;&quot;noremap &lt;C-t&gt; :BTags&lt;CR&gt;noremap &lt;silent&gt; &lt;C-l&gt; :Lines&lt;CR&gt;noremap &lt;silent&gt; &lt;C-w&gt; :Buffers&lt;CR&gt;noremap &lt;leader&gt;; :History:&lt;CR&gt;let g:fzf_preview_window = &#39;right:60%&#39;let g:fzf_commits_log_options = &#39;--graph --color=always --format=&quot;%C(auto)%h%d %s %C(black)%C(bold)%cr&quot;&#39;function! s:list_buffers()  redir =&gt; list  silent ls  redir END  return split(list, &quot;\n&quot;)endfunctionfunction! s:delete_buffers(lines)  execute &#39;bwipeout&#39; join(map(a:lines, &#123;_, line -&gt; split(line)[0]&#125;))endfunctioncommand! BD call fzf#run(fzf#wrap(&#123;  \ &#39;source&#39;: s:list_buffers(),  \ &#39;sink*&#39;: &#123; lines -&gt; s:delete_buffers(lines) &#125;,  \ &#39;options&#39;: &#39;--multi --reverse --bind ctrl-a:select-all+accept&#39;\ &#125;))noremap &lt;c-d&gt; :BD&lt;CR&gt;let g:fzf_layout = &#123; &#39;window&#39;: &#123; &#39;width&#39;: 0.9, &#39;height&#39;: 0.8 &#125; &#125;</code></pre><p>快捷键:    </p></li><li><p><code>ctrl_f</code> 查找文件</p></li><li><p><code>ctrl_p</code> 使用 <code>LeaderF</code> 查找当前目录下的文件</p></li><li><p><code>ctrl_l</code> 查找当前文件的行</p></li><li><p><code>ctrl_h</code> 打开文件浏览历史</p></li><li><p><code>ctrl_w</code> 打开buffer</p></li><li><p><code>ctrl_d</code> 选择关闭指定的buffer</p></li></ul></li><li><p><a href="https://github.com/kevinhwang91/rnvimr">rnvimr</a> 在vim下使用ranger</p><p>  配置 </p><pre><code class="line-numbers language-vim">&quot; ===&quot; === rnvimr&quot; ===let g:rnvimr_ex_enable = 1let g:rnvimr_pick_enable = 1let g:rnvimr_draw_border = 0&quot; Change the border&#39;s colorlet g:rnvimr_border_attr = &#123;&#39;fg&#39;: 14, &#39;bg&#39;: -1&#125;&quot; Add a shadow window, value is equal to 100 will disable shadowlet g:rnvimr_shadow_winblend = 70&quot; let g:rnvimr_bw_enable = 1highlight link RnvimrNormal CursorLinennoremap &lt;silent&gt; R :RnvimrToggle&lt;CR&gt;&lt;C-\&gt;&lt;C-n&gt;:RnvimrResize 0&lt;CR&gt;let g:rnvimr_action = &#123;                        \ &#39;&lt;C-t&gt;&#39;: &#39;NvimEdit tabedit&#39;,                        \ &#39;&lt;C-x&gt;&#39;: &#39;NvimEdit split&#39;,                        \ &#39;&lt;C-v&gt;&#39;: &#39;NvimEdit vsplit&#39;,                        \ &#39;gw&#39;: &#39;JumpNvimCwd&#39;,                        \ &#39;yw&#39;: &#39;EmitRangerCwd&#39;                        \ &#125;let g:rnvimr_layout = &#123; &#39;relative&#39;: &#39;editor&#39;,                        \ &#39;width&#39;: &amp;columns,                        \ &#39;height&#39;: &amp;lines,                        \ &#39;col&#39;: 0,                        \ &#39;row&#39;: 0,                        \ &#39;style&#39;: &#39;minimal&#39; &#125;let g:rnvimr_presets = [&#123;&#39;width&#39;: 0.8, &#39;height&#39;: 0.8&#125;]</code></pre><p>  快捷键</p><ul><li><code>R</code> 打开ranger</li></ul></li><li><p><a href="https://github.com/airblade/vim-rooter">vim-rooter</a> :自动将vim的工作目录到项目的根目录.</p><p>  <code>Rooter changes the working directory to the project root when you open a file or directory.</code></p><p>  对比:<br>  原文件目录:</p><p>  <img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/img/20210302121823.png"></p><p>  关闭rooter: 在vim里打开一个文件,此时vim的工作目录依旧是原文件所在目录</p><p>  <img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/img/20210302122402.png"></p><p>  启用rooter: 打开文件,vim的工作目录会切换到文件的根目录</p><p>  <img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/img/20210302122752.png"></p><p>  配置</p><pre><code class="line-numbers language-vim">&quot; ===&quot; === vim-rooter&quot; ===let g:rooter_patterns = [&#39;__vim_project_root&#39;, &#39;.git/&#39;]let g:rooter_silent_chdir = 1</code></pre><p>  默认打开 <code>rooter</code></p></li><li><p><a href="https://github.com/pechorin/any-jump.vim">any-jump</a> </p><p>  用法: 在 <code>normal</code> 和 <code>visual</code> 模式下都可用. 只需要将光标放到想要查找的单词上,这个单词可以是 <code>变量</code>, <code>类</code>, <code>常量</code>, <code>名称</code>, <code>符号</code> ( <code>variable/class/constant/name/symbol</code> ) 然后按下 <code>&lt;LEADER&gt;j</code> 即可.</p><p>  <img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/img/20210302124051.png"></p><p>  配置</p><pre><code class="line-numbers language-vim">&quot; ===&quot; === any-jump&quot; ===nnoremap &lt;LEADER&gt;j :AnyJump&lt;CR&gt;let g:any_jump_window_width_ratio  = 0.8let g:any_jump_window_height_ratio = 0.9</code></pre><p>  快捷键</p><ul><li><code>&lt;LEADER&gt;j</code> search </li></ul></li></ul><h3 id="Taglist"><a href="#Taglist" class="headerlink" title="Taglist"></a>Taglist</h3><ul><li><p><a href="https://github.com/liuchengxu/vista.vim">Vista.vim</a>  </p><p>  这是一款查看LSP符号,标签的插件,可配合多个vim插件使用</p><p>  <img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/img/20210302125525.png"></p><p>  配置:</p><pre><code class="line-numbers language-vim">&quot; ===&quot; === Vista.vim&quot; ===noremap &lt;LEADER&gt;v :Vista coc&lt;CR&gt;noremap &lt;c-t&gt; :silent! Vista finder coc&lt;CR&gt;let g:vista_icon_indent = [&quot;╰─▸ &quot;, &quot;├─▸ &quot;]let g:vista_default_executive = &#39;ctags&#39;let g:vista_fzf_preview = [&#39;right:50%&#39;]let g:vista#renderer#enable_icon = 1let g:vista#renderer#icons = &#123;\   &quot;function&quot;: &quot;\uf794&quot;,\   &quot;variable&quot;: &quot;\uf71b&quot;,\  &#125;let g:scrollstatus_size = 15</code></pre><p>  快捷键:</p><ul><li><p><code>&lt;LEADER&gt;v</code> 打开vista面板</p></li><li><p><code>&lt;ctrl-t&gt;</code>  使用fzf查找名称</p><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/img/20210302133944.png"></p></li></ul></li></ul><h3 id="Auto-Complete"><a href="#Auto-Complete" class="headerlink" title="Auto Complete"></a>Auto Complete</h3><ul><li><p><a href="https://github.com/neoclide/coc.nvim">coc</a> </p><p>  <a href="">详细配置教程</a> </p></li><li><p><a href="https://github.com/wellle/tmux-complete.vim">tmux-complete.vim</a> </p><p>  在临近的tmux窗格中启动单词的自动补全</p><h3 id="Snippets"><a href="#Snippets" class="headerlink" title="Snippets"></a>Snippets</h3></li><li><p><a href="https://github.com/honza/vim-snippets">vim-snippets</a>     </p><p>  快速补全工具,非常强大</p></li></ul><h3 id="Ubdo-Tree"><a href="#Ubdo-Tree" class="headerlink" title="Ubdo Tree"></a>Ubdo Tree</h3><ul><li><p><a href="https://github.com/mbbill/undotree">undotree</a></p><p>  <img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/img/20210302154803.png"></p><p>  配置: </p><pre><code class="line-numbers language-vim">&quot; ===&quot; === Undotree&quot; ===noremap L :UndotreeToggle&lt;CR&gt;let g:undotree_DiffAutoOpen = 1let g:undotree_SetFocusWhenToggle = 1let g:undotree_ShortIndicators = 1let g:undotree_WindowLayout = 2let g:undotree_DiffpanelHeight = 8let g:undotree_SplitWidth = 24function g:Undotree_CustomMap()    nmap &lt;buffer&gt; u &lt;plug&gt;UndotreeNextState    nmap &lt;buffer&gt; e &lt;plug&gt;UndotreePreviousState    nmap &lt;buffer&gt; U 5&lt;plug&gt;UndotreeNextState    nmap &lt;buffer&gt; E 5&lt;plug&gt;UndotreePreviousStateendfunc</code></pre><p>  快捷键:</p><ul><li><code>L</code>  打开undotree 面板</li></ul></li></ul><h3 id="Git"><a href="#Git" class="headerlink" title="Git"></a>Git</h3><ul><li><p><a href="https://github.com/gisphm/vim-gitignore">vim-gitignore</a>:<br>  提供 <code>.gitignore</code> 文件高亮显示</p></li><li><p><a href="https://github.com/fszymanski/fzf-gitignore">fzf-gitignore</a>:  生成 <code>.gitignore</code> 文件</p><p>  配置:</p><pre><code class="line-numbers language-vim">noremap &lt;LEADER&gt;gi :FzfGitignore&lt;CR&gt;</code></pre><p>  快捷键:</p><ul><li><code>&lt;LEADER&gt;gi</code> 生成 <code>.gitignore</code> 文件</li></ul></li><li><p><a href="https://github.com/akiomik/git-gutter-vim">vim-gitgutter</a>:<br>  一个保存文件后能看到状态的插件</p><p>  <img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/img/20210302164010.png"></p><p>  配置:</p><pre><code class="line-numbers language-vim">&quot; ==&quot; == GitGutter&quot; ==&quot; let g:gitgutter_signs = 0let g:gitgutter_sign_allow_clobber = 0let g:gitgutter_map_keys = 0let g:gitgutter_override_sign_column_highlight = 0let g:gitgutter_preview_win_floating = 1let g:gitgutter_sign_added = &#39;▎&#39;let g:gitgutter_sign_modified = &#39;░&#39;let g:gitgutter_sign_removed = &#39;▏&#39;let g:gitgutter_sign_removed_first_line = &#39;▔&#39;let g:gitgutter_sign_modified_removed = &#39;▒&#39;&quot; autocmd BufWritePost * GitGutternnoremap &lt;LEADER&gt;gf :GitGutterFold&lt;CR&gt;nnoremap H :GitGutterPreviewHunk&lt;CR&gt;nnoremap &lt;LEADER&gt;g- :GitGutterPrevHunk&lt;CR&gt;nnoremap &lt;LEADER&gt;g= :GitGutterNextHunk&lt;CR&gt;</code></pre><p>  快捷键:</p><ul><li><p><code>&lt;LEADER&gt;gf</code> 折叠</p></li><li><p><code>H</code> 预览当前文件块</p><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/img/20210302164503.png"></p></li><li><p><code>&lt;LEADER&gt;g-</code> 上一块</p></li><li><p><code>&lt;LEADER&gt;g+</code> 下一块</p></li></ul></li><li><p><a href="https://github.com/cohama/agit.vim">agit</a>: 轻松查看git提交记录以及做出的更改</p><p>  <img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/img/20210302164810.png"></p><p>  配置:</p><pre><code class="line-numbers language-vim">&quot; ===&quot; === Agit&quot; ===nnoremap &lt;LEADER&gt;gl :Agit&lt;CR&gt;let g:agit_no_default_mappings = 1</code></pre><p>  快捷键:</p><ul><li><code>&lt;LEADER&gt;gl</code> 查看git提交记录</li></ul></li></ul><h3 id="Autoformat"><a href="#Autoformat" class="headerlink" title="Autoformat"></a>Autoformat</h3><ul><li><p><a href="https://github.com/Chiel92/vim-autoformat">vim-autoformat</a>: 一键格式化代码</p><p>  配置:</p><pre><code class="line-numbers language-vim">&quot; ===&quot; === AutoFormatr&quot; ===nnoremap \f :Autoformat&lt;CR&gt;let g:formatdef_custom_js = &#39;&quot;js-beautify -t&quot;&#39;let g:formatters_javascript = [&#39;custom_js&#39;]au BufWrite *.js :Autoformat</code></pre><p>  快捷键:</p><ul><li><code>\f</code> 一键格式化代码</li></ul></li></ul><h3 id="HTML-CSS-JS-TypeScript-JSON-etc"><a href="#HTML-CSS-JS-TypeScript-JSON-etc" class="headerlink" title="HTML CSS JS TypeScript JSON, etc"></a>HTML CSS JS TypeScript JSON, etc</h3><ul><li><p><a href="https://github.com/leshill/vim-json">vim-json</a>: 提供json数据的高亮显示</p></li><li><p><a href="https://github.com/neoclide/jsonc.vim">jsonc.vim</a> : 支持 <code>jsonc</code> 语法</p></li><li><p><a href="https://github.com/othree/html5.vim">html5.vim</a> : 提供H5高亮和补全</p></li><li><p><a href="https://github.com/alvan/vim-closetag">vim-closetag</a> : 快速书写 <code>html</code> 的标签</p><p>  <img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/img/vim-colsetag.gif"></p><p>  注意: 下面的标签不适用</p><pre><code class="line-numbers language-html">&lt;area&gt;, &lt;base&gt;, &lt;br&gt;, &lt;col&gt;, &lt;command&gt;, &lt;embed&gt;, &lt;hr&gt;, &lt;img&gt;,&lt;input&gt;, &lt;keygen&gt;, &lt;link&gt;, &lt;meta&gt;, &lt;param&gt;, &lt;source&gt;, &lt;track&gt;, &lt;wbr&gt;,&lt;menuitem&gt;</code></pre><p>  快捷键: </p><ul><li><code>&gt;</code> </li><li><code>&gt;&gt;</code> </li></ul></li><li><p><a href="https://github.com/coolwanglu/vim.js">vim-js</a> : 支持JS语法</p></li><li><p><a href="https://github.com/HerringtonDarkholme/yats.vim">yats.vim</a> : 支持 <code>TypeScript</code> 语法</p></li><li><p><a href="https://github.com/posva/vim-vue">vim-vue</a> : 支持vue</p></li></ul><h3 id="GO"><a href="#GO" class="headerlink" title="GO"></a>GO</h3><ul><li><a href="https://github.com/fatih/vim-go">vim-go</a> 支持Go语言</li></ul><h3 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h3><ul><li><p><a href="https://github.com/Vimjas/vim-python-pep8-indent">vim-python-pep8-indent</a> : 调整vim的缩进以符合 <a href="https://www.python.org/dev/peps/pep-0008/">pep8</a> 规范</p></li><li><p><a href="https://github.com/tweekmonster/braceless.vim">braceless.vim</a> : 包含一些有用的快捷键, 在这里只配置函数主体高亮</p><p>  配置:</p><pre><code class="line-numbers language-vim">autocmd FileType python BracelessEnable +highlight-cc2</code></pre><p>  快捷键:</p><ul><li>Moving to recognized blocks is done with <code>[[</code> and <code>]]</code>. In Python, <code>[m</code> and <code>]m</code> moves to def and class blocks, while <code>[M</code> and <code>]M</code> moves to the end of those blocks.</li><li><code>zc</code> 折叠</li><li><code>zR</code> 取消折叠</li></ul></li></ul><h3 id="Markdown"><a href="#Markdown" class="headerlink" title="Markdown"></a>Markdown</h3><ul><li><p><a href="https://github.com/iamcco/markdown-preview.nvim">markdown-preview</a> 这是一个实时预览markdown文件的插件, markdown 文件按<code>r</code>即可实时预览</p></li><li><p><a href="https://github.com/dhruvasagar/vim-table-mode">vim-table-mode</a> : md文件快速创建表格</p><p>  <img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/img/vim-table-mode.gif"><br>  配置:</p><pre><code class="line-numbers language-vim">&quot;let g:table_mode_disable_mappings = 1let g:table_mode_cell_text_object_i_map = &#39;k&lt;Bar&gt;&#39;</code></pre><p>  快捷键: </p><ul><li><code>&lt;LEADER&gt;tm</code>:  打开/关闭    <code>table-mode</code></li></ul></li><li><p><a href="https://github.com/mzlogin/vim-markdown-toc">vim-markdown-toc</a> : 一键生成TOC</p></li><li><p><a href="https://github.com/dkarter/bullets.vim">bullets.vim</a> </p></li></ul><h3 id="Editor-Enhancement"><a href="#Editor-Enhancement" class="headerlink" title="Editor Enhancement"></a>Editor Enhancement</h3><ul><li><p><a href="https://github.com/jiangmiao/auto-pairs">auto-pairs</a> : 成对添加或删除括号, 引号</p></li><li><p><a href="https://github.com/mg979/vim-visual-multi">vim-visual-multi</a></p></li><li><p><a href="https://github.com/tomtom/tcomment_vim">tcomment_vim</a> :快速注释内容</p><p>  配置:</p><pre><code class="line-numbers language-vim">let g:tcomment_textobject_inlinecomment = &#39;&#39;nmap &lt;LEADER&gt;cn g&gt;cvmap &lt;LEADER&gt;cn g&gt;nmap &lt;LEADER&gt;cu g&lt;cvmap &lt;LEADER&gt;cu g&lt;</code></pre><p>  快捷键:</p><ul><li><code>&lt;leader&gt;cn</code> 注释</li><li><code>&lt;leader&gt;cu</code> 取消注释</li></ul></li><li><p><a href="https://github.com/LIUYAANNG/ANTOVIM">ANTOVIM</a> : 一键改变 <code>TRUE</code> 和 <code>FALSE</code></p><p>  快捷键:</p><ul><li><code>gs</code> 切换</li></ul></li><li><p><a href="https://github.com/tpope/vim-surround">vim-surround</a> </p><p>  快捷键:</p><ul><li><code>yskw&#39;</code> 在所选单词两边添加 <code>&#39;</code> : <code>word</code> to <code>&#39;word&#39;</code></li><li><code>cd&#39;&quot;</code> 将单词两边的 <code>&#39;&#39;</code> 变成    <code>&quot;&quot;</code> : <code>&#39;word&#39;</code> to <code>&quot;word&quot;</code></li></ul></li><li><p><a href="https://github.com/gcmt/wildfire.vim">wildfire.vim</a> : 选中特殊符号包裹的文字</p><p>  快捷键:</p><ul><li><p>在 <code>Visual Mode</code> 下, 使用 <code>k&#39;</code> 会选中被 <code>&#39;&#39;</code>包裹的文字, 同样的    <code>k), k&#125;, k]</code> 也适用</p><p>注意: 仓库wiki中快捷键是 <code>i&#39;</code>, 因为我做了按键映射, 将 <code>i</code> 映射到 <code>k</code> 上了</p></li></ul></li><li><p><a href="https://github.com/godlygeek/tabular">tabular</a> : 快速对齐文本</p><p>  <img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/img/vim-tabular.gif"></p><p>  快捷键:</p><ul><li><code>ga</code> + 对齐的参照物, 如: <code>:</code>, <code>=</code></li></ul></li><li><p><a href="https://github.com/tpope/vim-capslock">vim-capslock</a> : 大写锁定</p><p>  快捷键:</p><ul><li><code>Insert Mode</code> : <code>ctrl_C</code> </li><li><code>Normal Mode</code> : <code>gC</code></li></ul></li><li><p><a href="https://github.com/easymotion/vim-easymotion">vim-easymotion</a>  待完善</p></li><li><p><a href="https://github.com/svermeulen/vim-subversive">vim-subversive</a><br>  <img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/img/vim-subversive.gif"></p></li><li></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> vim </tag>
            
            <tag> neovim </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LeetCode-CLI</title>
      <link href="/2021/02/10/leetcode-cli/"/>
      <url>/2021/02/10/leetcode-cli/</url>
      
        <content type="html"><![CDATA[<p>由于我有长期使vim的习惯, 在刷leetcode题时,在网页上写代码实在是有点难受, <a href="https://github.com/skygragon/leetcode-cli">LeetCode-cli</a> 完美解决了我的问题. </p><p>leetcode支持本地缓存题目,写代码,测试以及提交到<code>leetcode.com</code>.</p><p><img loading="lazy" src="https://github.com/skygragon/leetcode-cli/raw/master/docs/screenshots/intro.2018.01.13.gif" alt="LeetCode-cli">     </p><p>下面记录一下配置<code>leetcode-cli</code></p><h2 id="1-安装"><a href="#1-安装" class="headerlink" title="1. 安装"></a>1. 安装</h2><ul><li>下载稳定版本,并非开发版本. <a href="https://skygragon.github.io/leetcode-cli/install">Install guide</a> <pre><code class="line-numbers language-bash">npm install -g leetcode-cli</code></pre></li></ul><h2 id="2-使用"><a href="#2-使用" class="headerlink" title="2. 使用"></a>2. 使用</h2><p>所有用法wiki介绍的很详细, 自己探索吧哈哈哈! </p><p>后续发现什么骚操作了再来这里分享</p><h2 id="问题汇总"><a href="#问题汇总" class="headerlink" title="问题汇总"></a>问题汇总</h2><p><strong>一:  连接不到<code>leetcode</code>和<code>leetcode.cn</code>服务器,都会报<code>invalid password</code>的<code>error</code></strong><br>解决方案如下:  参考<br><a href="https://github.com/LeetCode-OpenSource/vscode-leetcode/issues/478#issuecomment-564757098">https://github.com/LeetCode-OpenSource/vscode-leetcode/issues/478#issuecomment-564757098</a> </p><ol><li>确保已安装<code>Node.js 8+</code></li><li><pre><code class="line-numbers language-bash"># to remove the old versionnpm uninstall -g leetcode-cli# to install the up-to-date version(2.6.17+)npm install -g leetcode-tools/leetcode-cli</code></pre>使用<code>leetcode version</code>确保版本2.6.17+    </li><li>使用<code>cookie</code>登陆<br>这个版本中包含了很多种登陆方式    </li></ol><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/img/20210210222559.png"><br>若使用账号密码无法登陆,可尝试使用<code>Cookie</code>登陆, 具体方式如下:<br>以<code>chrome</code>浏览器为例:    </p><ul><li><p>登陆<a href="">leetcode</a> , 打开 <strong><code>检查</code></strong><br><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/img/20210210223002.png"></p></li><li><p>选择 <code>network</code> -&gt; <code>XHR</code> -&gt; <code>search</code> -&gt; <code>uid</code> -&gt; <code>all/</code><br><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/img/20210210223441.png"></p></li><li><p>使用<code>leetcode user -c</code>, 输入<code>user</code>, 再将<code>cookie</code>粘贴就ok了<img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/img/20210210231428.png"></p></li></ul><p><strong>2. 使用<code>leetcode.cn</code>, 用<code>leetcode show</code>命令出现<code>http error</code></strong><br>解决办法: 参考<a href="https://github.com/LeetCode-OpenSource/vscode-leetcode/issues/489">https://github.com/LeetCode-OpenSource/vscode-leetcode/issues/489</a> </p><ul><li>找到<code>leetcode.cn.js</code>文件, <strong>MacOS</strong> 一般在<code>/usr/local/lib/node_modules/vsc-leetcode-cli/lib/plugins/leetcode.cn.js</code></li><li>替换成以下代码:</li></ul><pre><code class="line-numbers language-js">&#39;use strict&#39;var request = require(&#39;request&#39;);var config = require(&#39;../config&#39;);var h = require(&#39;../helper&#39;);var log = require(&#39;../log&#39;);var Plugin = require(&#39;../plugin&#39;);var session = require(&#39;../session&#39;);//// [Usage]//// https://github.com/skygragon/leetcode-cli-plugins/blob/master/docs/leetcode.cn.md//var plugin = new Plugin(15, &#39;leetcode.cn&#39;, &#39;2018.11.25&#39;,    &#39;Plugin to talk with leetcode-cn APIs.&#39;);plugin.init = function() &#123;  config.app = &#39;leetcode.cn&#39;;  config.sys.urls.base            = &#39;https://leetcode-cn.com&#39;;  config.sys.urls.login           = &#39;https://leetcode-cn.com/accounts/login/&#39;;  config.sys.urls.problems        = &#39;https://leetcode-cn.com/api/problems/$category/&#39;;  config.sys.urls.problem         = &#39;https://leetcode-cn.com/problems/$slug/description/&#39;;  config.sys.urls.graphql         = &#39;https://leetcode-cn.com/graphql&#39;;  config.sys.urls.problem_detail  = &#39;https://leetcode-cn.com/graphql&#39;;  config.sys.urls.test            = &#39;https://leetcode-cn.com/problems/$slug/interpret_solution/&#39;;  config.sys.urls.session         = &#39;https://leetcode-cn.com/session/&#39;;  config.sys.urls.submit          = &#39;https://leetcode-cn.com/problems/$slug/submit/&#39;;  config.sys.urls.submissions     = &#39;https://leetcode-cn.com/api/submissions/$slug&#39;;  config.sys.urls.submission      = &#39;https://leetcode-cn.com/submissions/detail/$id/&#39;;  config.sys.urls.verify          = &#39;https://leetcode-cn.com/submissions/detail/$id/check/&#39;;  config.sys.urls.favorites       = &#39;https://leetcode-cn.com/list/api/questions&#39;;  config.sys.urls.favorite_delete = &#39;https://leetcode-cn.com/list/api/questions/$hash/$id&#39;;&#125;;// FIXME: refactor those// update options with user credentialsfunction signOpts(opts, user) &#123;  opts.headers.Cookie = &#39;LEETCODE_SESSION=&#39; + user.sessionId +                        &#39;;csrftoken=&#39; + user.sessionCSRF + &#39;;&#39;;  opts.headers[&#39;X-CSRFToken&#39;] = user.sessionCSRF;  opts.headers[&#39;X-Requested-With&#39;] = &#39;XMLHttpRequest&#39;;&#125;function makeOpts(url) &#123;  const opts = &#123;&#125;;  opts.url = url;  opts.headers = &#123;&#125;;  if (session.isLogin())    signOpts(opts, session.getUser());  return opts;&#125;function checkError(e, resp, expectedStatus) &#123;  if (!e &amp;&amp; resp &amp;&amp; resp.statusCode !== expectedStatus) &#123;    const code = resp.statusCode;    log.debug(&#39;http error: &#39; + code);    if (code === 403 || code === 401) &#123;      e = session.errors.EXPIRED;    &#125; else &#123;      e = &#123;msg: &#39;http error&#39;, statusCode: code&#125;;    &#125;  &#125;  return e;&#125;plugin.getProblems = function(cb) &#123;  plugin.next.getProblems(function(e, problems) &#123;    if (e) return cb(e);    plugin.getProblemsTitle(function(e, titles) &#123;      if (e) return cb(e);      problems.forEach(function(problem) &#123;        const title = titles[problem.id];        if (title)          problem.name = title;      &#125;);      return cb(null, problems);    &#125;);  &#125;);&#125;;plugin.getProblemsTitle = function(cb) &#123;  log.debug(&#39;running leetcode.cn.getProblemNames&#39;);  const opts = makeOpts(config.sys.urls.graphql);  opts.headers.Origin = config.sys.urls.base;  opts.headers.Referer = &#39;https://leetcode-cn.com/api/problems/algorithms/&#39;;  opts.json = true;  opts.body = &#123;    query: [      &#39;query getQuestionTranslation($lang: String) &#123;&#39;,      &#39;  translations: allAppliedQuestionTranslations(lang: $lang) &#123;&#39;,      &#39;    title&#39;,      &#39;    questionId&#39;,      &#39;  &#125;&#39;,      &#39;&#125;&#39;,      &#39;&#39;    ].join(&#39;\n&#39;),    variables:     &#123;&#125;,    operationName: &#39;getQuestionTranslation&#39;  &#125;;  const spin = h.spin(&#39;Downloading questions titles&#39;);  request.post(opts, function(e, resp, body) &#123;    spin.stop();    e = checkError(e, resp, 200);    if (e) return cb(e);    const titles = [];    body.data.translations.forEach(function(x) &#123;      titles[x.questionId] = x.title;    &#125;);    return cb(null, titles);  &#125;);&#125;;module.exports = plugin;</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> LeetCode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LeetCode_Daily_Questions</title>
      <link href="/2021/02/09/leetcode-daily-questions/"/>
      <url>/2021/02/09/leetcode-daily-questions/</url>
      
        <content type="html"><![CDATA[<p>待完善</p>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> LeetCode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>可爱的壁纸</title>
      <link href="/2020/09/24/ke-ai-de-bi-zhi/"/>
      <url>/2020/09/24/ke-ai-de-bi-zhi/</url>
      
        <content type="html"><![CDATA[<p>在寻找壁纸api的时候突然发现了一套灰常灰常可爱的壁纸，于是想把他们都放到我的壁纸界面上，无奈api一次请求的图片一样，所以就想着把这些图片搞下来，存到我的cdn加速中。</p><p>先来几张图：</p><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source/blog_source/mc/1.jpg"><br><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source/blog_source/mc/13.jpg"><br><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source/blog_source/mc/29.jpg"><br><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source/blog_source/mc/65.jpg"><br><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source/blog_source/mc/94.jpg"> </p><h3 id="1-得到图片"><a href="#1-得到图片" class="headerlink" title="1. 得到图片"></a>1. 得到图片</h3><p>懒癌晚期当然是不能一张一张的下载了，于是就有了下面</p><pre><code class="line-numbers language-python">import osimport timeimport randomimport requestsimport urllib.requestfrom urllib.request import Request, urlopen, urlretrieveurl = yourapiheaders = &#123;    &#39;User-Agent&#39;:    &#39;Mozilla/5.0 (Windows NT 6.1; WOW64; rv:23.0) Gecko/20100101 Firefox/23.0&#39;&#125;folder_path = &#39;/Users/kevin/Pictures/wallpapers/mc/&#39;folder = os.path.exists(folder_path)if not folder:    os.makedirs(folder_path)    print(&quot;创建文件夹%s成功&quot; % folder_path)file_names = os.listdir(folder_path)index = len(file_names)try:    while True:        flag = False        request = urllib.request.Request(url, headers=headers)        resp = urllib.request.urlopen(request)        real_url = resp.geturl()        response = requests.get(real_url)        # img_name = real_url.split(&#39;/&#39;)[4]        img_name = os.path.split(real_url)[1]        for file_name in file_names:            if file_name == img_name:                print(&#39;图片已存在&#39;)                flag = True                break        if flag:            time.sleep(random.randint(0, 3))            continue        path = folder_path + img_name        index += 1        urlretrieve(real_url, path)        print(&#39;已下载%d张图片,该图片的真实链接为%s&#39; % (index, real_url))        time.sleep(random.randint(0, 3))except:    print(&#39;出现异常&#39;)</code></pre><p>运行如下，没想到这么多张<br><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source/blog_images/%E5%8F%AF%E7%88%B1%E7%9A%84%E5%A3%81%E7%BA%B8/1.jpg"> </p><h2 id="2-改名字"><a href="#2-改名字" class="headerlink" title="2. 改名字"></a>2. 改名字</h2><p>由于原图片的名字是一串神秘代码，这样看着太难受了，于是我决定给他们改名字，正好最近vim用的很顺手，接下来就是vim的骚操作了。</p><p>操作之前先讲讲vim为什么可以这么做: 可以在 Vim 内部调用外部程序(如shell命令)，还可以把缓冲区的内容作为标准输入传递给外部命令，或是把外部命令的标准输出导入到Vim缓冲区。</p><h3 id="1-在vim内部执行shell命令"><a href="#1-在vim内部执行shell命令" class="headerlink" title="1. 在vim内部执行shell命令"></a>1. 在vim内部执行shell命令</h3><p>在Vim的命令行模式中，在命令前加一个!前缀 (参见:h :! ) 就可以调用外部的shell程序。<br>例如：在vim中，想要查看当前目录的所有文件,在命令行模式下使用<code>:!ls</code></p><p>注：<code>:!ls</code> 和 <code>:ls</code> 是两个不同的Vim命令，前者是在Vim中调用shell命令 <code>ls</code>，用于列出目录下的所有文件，后者调用的是 Vim内置命令<code>ls</code>，用来显示当前缓冲区列表的内容.</p><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/%E5%8F%AF%E7%88%B1%E7%9A%84%E5%A3%81%E7%BA%B8/1.gif"> </p><h3 id="2-将Vim-缓冲区内容作为标准输入或标准输出"><a href="#2-将Vim-缓冲区内容作为标准输入或标准输出" class="headerlink" title="2. 将Vim 缓冲区内容作为标准输入或标准输出"></a>2. 将Vim 缓冲区内容作为标准输入或标准输出</h3><p>在使用<code>!&#123;cmd&#125;</code>时，vim会回显command的输出，可以用<code>:read !&#123;cmd&#125;</code>把command的输出重定向到当前vim的缓冲区中,或使用<code>:write !&#123;cmd&#125;</code>把当前vim缓冲区的内容作为command的标准输入.</p><p>例如：执行<code>:write !sh</code>则会在shell中逐行执行当前vim缓冲区的内容</p><h3 id="3-改名字"><a href="#3-改名字" class="headerlink" title="3. 改名字"></a>3. 改名字</h3><p>我想把名字改成（1.jpg，2.jpg）的形式，所以需要用到递增</p><ul><li>首先选中需要修改的部分，接下来执行两条指令:</li></ul><pre><code class="line-numbers language-vim">:&#39;&lt;,&gt;&#39;s/.*/mv &amp; aaa.jpg:&#39;&lt;,&gt;&#39;s/aaa/\=line(&quot;.&quot;)-line(&quot;&#39;&lt;&quot;)+1</code></pre><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source/blog_images/%E5%8F%AF%E7%88%B1%E7%9A%84%E5%A3%81%E7%BA%B8/2.gif"><br><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@latest/blog_images/%E5%8F%AF%E7%88%B1%E7%9A%84%E5%A3%81%E7%BA%B8/3.gif"> </p><p>具体命令详解：</p><pre><code class="line-numbers language-vim">&#39;&lt;,&#39;&gt;        所选中的区域 (:help &#39;&lt;，:help &#39;&gt; )s            在选中的区域中进行替换 (:help :s ).*           匹配当前所有字符\=           指明后面是一个表达式 (:help :s\= )line(&quot;.&quot;)    当前光标所在行的行号 (:help line() )line(&quot;&#39;&lt;&quot;)   所选区域中第一行的行号 (:help line() ) </code></pre><p><code>&#39;&lt;</code>和<code>&#39;&gt;</code>是使用了”v”，”V”命令选中一个visual区域后，VIM设置的标记，分别用来标识visual区域的开始和结束。</p><ul><li>接着执行<code>:wirte !sh</code>即可</li></ul><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source/blog_images/%E5%8F%AF%E7%88%B1%E7%9A%84%E5%A3%81%E7%BA%B8/4.gif"> </p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>魔改hexo博客</title>
      <link href="/2020/09/18/mo-gai-hexo-bo-ke/"/>
      <url>/2020/09/18/mo-gai-hexo-bo-ke/</url>
      
        <content type="html"><![CDATA[<h2 id="魔改hexo博客"><a href="#魔改hexo博客" class="headerlink" title="魔改hexo博客"></a>魔改hexo博客</h2><p>本次魔改主要包括以下几个方面</p><h2 id="1-添加一言插件"><a href="#1-添加一言插件" class="headerlink" title="1. 添加一言插件"></a>1. 添加一言插件</h2><h2 id="2-添加动态线条背景"><a href="#2-添加动态线条背景" class="headerlink" title="2. 添加动态线条背景"></a>2. 添加动态线条背景</h2><h2 id="3-添加Dplayer视频播放器"><a href="#3-添加Dplayer视频播放器" class="headerlink" title="3. 添加Dplayer视频播放器"></a>3. 添加Dplayer视频播放器</h2><h2 id="4-添加Aplayer播放器"><a href="#4-添加Aplayer播放器" class="headerlink" title="4. 添加Aplayer播放器"></a>4. 添加Aplayer播放器</h2><h2 id="5-添加看板娘（live2d-widget插件）"><a href="#5-添加看板娘（live2d-widget插件）" class="headerlink" title="5. 添加看板娘（live2d-widget插件）"></a>5. 添加看板娘（live2d-widget插件）</h2><h2 id="6-添加黑夜模式"><a href="#6-添加黑夜模式" class="headerlink" title="6. 添加黑夜模式"></a>6. 添加黑夜模式</h2><h2 id="7-添加文章更新日期"><a href="#7-添加文章更新日期" class="headerlink" title="7. 添加文章更新日期"></a>7. 添加文章更新日期</h2><h2 id="8-添加访客地图统计"><a href="#8-添加访客地图统计" class="headerlink" title="8. 添加访客地图统计"></a>8. 添加访客地图统计</h2><h2 id="9-添加valine评论邮件提醒"><a href="#9-添加valine评论邮件提醒" class="headerlink" title="9. 添加valine评论邮件提醒"></a>9. 添加valine评论邮件提醒</h2><h2 id="10-添加网站背景"><a href="#10-添加网站背景" class="headerlink" title="10. 添加网站背景"></a>10. 添加网站背景</h2><h2 id="11-添加腾讯兔小巢"><a href="#11-添加腾讯兔小巢" class="headerlink" title="11. 添加腾讯兔小巢"></a>11. 添加腾讯兔小巢</h2><h2 id="12-Mac样式的代码块的添加"><a href="#12-Mac样式的代码块的添加" class="headerlink" title="12. Mac样式的代码块的添加"></a>12. Mac样式的代码块的添加</h2><h3 id="12-1-代码高亮"><a href="#12-1-代码高亮" class="headerlink" title="12.1 代码高亮"></a>12.1 代码高亮</h3><h4 id="12-1-1-禁用highlight"><a href="#12-1-1-禁用highlight" class="headerlink" title="12.1.1 禁用highlight"></a>12.1.1 禁用highlight</h4><p>打开根目录下的<code>_config.yml</code>文件,修改配置</p><pre><code class="line-numbers language-yml">highlight:enable: falseline_number: falseauto_detect: falsetab_replace:</code></pre><h4 id="12-1-2-获取prism配置文件"><a href="#12-1-2-获取prism配置文件" class="headerlink" title="12.1.2 获取prism配置文件"></a>12.1.2 获取prism配置文件</h4><p>在<a href="https://prismjs.com/download.html">https://prismjs.com/download.html</a>选择喜欢的theme, 需要的language和plug(不推荐选太多,需要的选上即可), 将文件下载到本地后分别重命名为<code>prism.css</code>, <code>prism.js</code>, 将其放入到<code>/theme/matery/source/js/prism</code>目录下(prism文件夹自己创建) </p><h4 id="12-1-3-配置prism"><a href="#12-1-3-配置prism" class="headerlink" title="12.1.3 配置prism"></a>12.1.3 配置prism</h4><ul><li>在<code>themes/matery/layout/_partial/head.ejs</code> 添加以下代码:</li></ul><pre><code class="line-numbers language-ejs">&lt;link rel=&quot;stylesheet&quot; href=&quot;/js/prism/prism.css&quot;&gt;</code></pre><ul><li>在<code>themes/matery/layout/_partial/footer.ejs</code> 添加以下代码:</li></ul><pre><code class="line-numbers language-ejs">&lt;script src=&quot;/js/prism/prism.js&quot; async&gt;&lt;/script&gt;</code></pre><h4 id="12-1-4-添加配置"><a href="#12-1-4-添加配置" class="headerlink" title="12.1.4 添加配置"></a>12.1.4 添加配置</h4><p>在根目录的 <code>_config.yml</code> 文件中添加以下代码:</p><pre><code class="line-numbers language-yml">prism_plugin:    mode: &#39;preprocess&#39;    # realtime/preprocess    theme: &#39;tomorrow&#39;    line_number: false   # default false    custom_css:marked:    langPrefix: line-numbers language-</code></pre><p>此时测试效果如下图所示:</p><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/blog_source/blog_images/%E9%AD%94%E6%94%B9hexo%E5%8D%9A%E5%AE%A2/1.png"> </p><h3 id="12-2-添加mac样式"><a href="#12-2-添加mac样式" class="headerlink" title="12.2 添加mac样式"></a>12.2 添加mac样式</h3><h4 id="12-2-1-创建codeblock的js文件"><a href="#12-2-1-创建codeblock的js文件" class="headerlink" title="12.2.1 创建codeblock的js文件"></a>12.2.1 创建codeblock的js文件</h4><p>在目录<code>theme/source/libs/codeBlock/</code>下创建<code>codeBlock.js</code>文件, 在里面添加如下代码:</p><pre><code class="line-numbers language-javascript">// 代码块$(function () &#123;    $(&#39;pre&#39;).wrap(&#39;&lt;div class=&quot;code-area&quot; style=&quot;position: relative&quot;&gt;&lt;/div&gt;&#39;);&#125;);</code></pre><h4 id="12-2-2-添加css样式"><a href="#12-2-2-添加css样式" class="headerlink" title="12.2.2 添加css样式"></a>12.2.2 添加css样式</h4><p>在<code>theme/source/css/matery.css</code>文件中添加:</p><pre><code class="line-numbers language-css">pre &#123;    padding: 2.5rem 1.5rem 1.5rem 1.5rem !important;    margin: 1rem 0 !important;    background: #272822;    overflow: auto;    border-radius: 0.35rem;    tab-size: 4;&#125;.code-area::after &#123;    content: &quot; &quot;;    position: absolute;    border-radius: 50%;    background: #ff5f56;    width: 12px;    height: 12px;    top: 0;    left: 12px;    margin-top: 12px;    -webkit-box-shadow: 20px 0 #ffbd2e, 40px 0 #27c93f;    box-shadow: 20px 0 #ffbd2e, 40px 0 #27c93f;&#125;code &#123;    padding: 1px 5px;    top: 13px !important;    font-family: Inconsolata, Monaco, Consolas, &quot;Courier New&quot;, Courier, monospace;    font-size: 0.91rem;    color: #e96900;    background-color: #f8f8f8;    border-radius: 2px;&#125;pre code &#123;    padding: 0;    color: #e8eaf6;    background-color: #272822;&#125;pre[class*=&quot;language-&quot;] &#123;    padding: 1.2em;    margin: 0.5em 0;&#125;code[class*=&quot;language-&quot;],pre[class*=&quot;language-&quot;] &#123;    color: #e8eaf6;    white-space: pre-wrap !important;&#125;</code></pre><h4 id="12-2-3-调用js文件"><a href="#12-2-3-调用js文件" class="headerlink" title="12.2.3 调用js文件"></a>12.2.3 调用js文件</h4><p>在<code>theme/layout/_partial/post-detail.ejs</code>文件中添加</p><pre><code class="line-numbers language-ejs">&lt;!-- 代码块 --&gt;&lt;script type=&quot;text/javascript&quot; src=&quot;/libs/codeBlock/codeBlockFuction.js&quot;&gt;&lt;/script&gt;</code></pre><h3 id="12-3-测试"><a href="#12-3-测试" class="headerlink" title="12.3 测试"></a>12.3 测试</h3><p>执行<code>hexo clean &amp;&amp; hexo g &amp;&amp; hexo s</code>, 效果如下:</p><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/blog_source/blog_images/%E9%AD%94%E6%94%B9hexo%E5%8D%9A%E5%AE%A2/2.png"> </p><h2 id="13-访问速度优化"><a href="#13-访问速度优化" class="headerlink" title="13. 访问速度优化"></a>13. 访问速度优化</h2><h3 id="13-1-静态资源优化"><a href="#13-1-静态资源优化" class="headerlink" title="13.1 静态资源优化"></a>13.1 静态资源优化</h3><h4 id="13-1-1-图片压缩"><a href="#13-1-1-图片压缩" class="headerlink" title="13.1.1 图片压缩"></a>13.1.1 图片压缩</h4><p><a href="https://developers.google.com/speed/webp?hl=zh-cn">WebP</a> 是Google开发的新图像格式,旨在以可接受的视觉质量为无损和有损压缩提供较小的文件大小。有损模式下比 JPEG 小 25% - 34%，无损模式下较 PNG 小 26%,很显然,在相同的用户体验下,使用WebP格式可以提高网站的访问速度.<br>如果你想详细了解这其中的技术细节，可以阅读 Google 开发者文章<a href="https://developers.google.com/speed/webp/docs/compression?hl=zh-cn">WebP压缩技术</a> </p><h5 id="13-1-1-1-优化目标"><a href="#13-1-1-1-优化目标" class="headerlink" title="13.1.1.1 优化目标"></a>13.1.1.1 优化目标</h5><p>使用WebP固然可以优化图像资源,提高访问速度,但截止到目前为止,即便浏览器对WebP的<a href="https://caniuse.com/#search=webp">支持情况</a> 已经接近80%, 却依然有些主流浏览器如 Safari、IE 仍不支持，所以不能直接转用 WebP.<br>由于目前精力有限,故先设定一个优化目标如下:    </p><ul><li>由于压缩图像这项工作重复且繁琐，图像优化应自动化完成,初次配置完成，日后使用无需任何操作便可全自动切换 WebP 图片格式.</li><li>对于不支持的浏览器，会自动回退到 JPEG/PNG 等传统格式</li><li>提前生成好两份文件而非请求时计算，节省算力且响应更迅速</li></ul><h5 id="13-1-1-2-目前已完成-网站首页轮播图"><a href="#13-1-1-2-目前已完成-网站首页轮播图" class="headerlink" title="13.1.1.2 目前已完成(网站首页轮播图)"></a>13.1.1.2 目前已完成(网站首页轮播图)</h5><p>这里使用一个开源工具: <a href="https://github.com/Jacksgong/webp-converter">Webp Converter and Analytics</a>, 具体使用方法在项目介绍页,这里不再赘述.<br>只是暂时使用这个工具,因为我的博客目前图片资源大的就是首页轮播图,这只是一个暂时的解决方案,因为需要手动(懒)…</p><h4 id="13-1-2-HTML压缩"><a href="#13-1-2-HTML压缩" class="headerlink" title="13.1.2 HTML压缩"></a>13.1.2 HTML压缩</h4><p>待定</p><h4 id="13-1-3-CSS压缩"><a href="#13-1-3-CSS压缩" class="headerlink" title="13.1.3 CSS压缩"></a>13.1.3 CSS压缩</h4><p>待定</p><h3 id="13-2-静态资源加载优化"><a href="#13-2-静态资源加载优化" class="headerlink" title="13.2 静态资源加载优化"></a>13.2 静态资源加载优化</h3><h4 id="13-2-1-使用CDN"><a href="#13-2-1-使用CDN" class="headerlink" title="13.2.1 使用CDN"></a>13.2.1 使用CDN</h4><p>参考<a href="https://godliuyang.wang/2020/09/15/cdn-for-blog/">CDN for Blog</a> </p><h2 id="14-添加推荐文章插件-hexo-recommended-posts"><a href="#14-添加推荐文章插件-hexo-recommended-posts" class="headerlink" title="14. 添加推荐文章插件(hexo-recommended-posts)"></a>14. 添加推荐文章插件(<a href="https://github.com/huiwang/hexo-recommended-posts">hexo-recommended-posts</a>)</h2><p>推荐文章的插件有很多, <a href="https://github.com/tea3/hexo-related-popular-posts">hexo-related-popular-posts</a> 是一个很棒的插件, 安装也很简单,不过我这里使用的是<code>hexo-recommended-posts</code></p><h3 id="14-1-安装"><a href="#14-1-安装" class="headerlink" title="14.1 安装"></a>14.1 安装</h3><pre><code class="line-numbers language-bash">npm install hexo-recommended-posts --save</code></pre><h3 id="14-2-下载推荐文章列表"><a href="#14-2-下载推荐文章列表" class="headerlink" title="14.2 下载推荐文章列表"></a>14.2 下载推荐文章列表</h3><pre><code class="line-numbers language-bash">hexo recommend</code></pre><h3 id="14-3-自定义配置"><a href="#14-3-自定义配置" class="headerlink" title="14.3 自定义配置"></a>14.3 自定义配置</h3><p>在博客根目录添加以下默认配置,根据个人情况修改</p><pre><code class="line-numbers language-yml">recommended_posts:  server: https://api.truelaurel.com #后端推荐服务器地址  timeoutInMillis: 10000 #服务时长，超过此时长，则使用离线推荐模式  internalLinks: 3 #内部文章数量  externalLinks: 1 #外部文章数量  fixedNumber: false #控制是否返回固定数量的推荐文章, 如果默认推荐文章不够的话会填充当前文章的前后文章作为推荐文章.  autoDisplay: true #自动在文章底部显示推荐文章  excludePattern: [] #添加想要被过滤的链接的正则表达式, 如配置为 [&quot;example.com&quot;], 则所有包含 example.com 的链接都会从推荐文章中过滤掉.  titleHtml: &lt;h1&gt;推荐文章&lt;span style=&quot;font-size:0.45em; color:gray&quot;&gt;（由&lt;a href=&quot;https://github.com/huiwang/hexo-recommended-posts&quot;&gt;hexo文章推荐插件&lt;/a&gt;驱动）&lt;/span&gt;&lt;/h1&gt; #自定义标题</code></pre><h3 id="14-4-一点小改动"><a href="#14-4-一点小改动" class="headerlink" title="14.4 一点小改动"></a>14.4 一点小改动</h3><p>插件虽然有<code>autoDisplay</code>选项来控制是否在文章底部显示文章,但在配置文件中竟然没有一个选项来控制是否启用插件,这不能忍,于是我修改了一点插件的代码,实现了这个功能,具体实现如下:</p><ul><li><p>编辑<code>hexo-recommended-posts/lib/recommend.js</code>文件,第二行修改为</p><pre><code class="line-numbers language-javascript">var posts = filterPosts(recommended_posts, post, config.excludePattern, config.enable)</code></pre><p>第九行修改为</p><pre><code class="line-numbers language-javascript">function filterPosts(recommended_posts, post, excludePattern, enable) &#123;  if (recommended_posts === undefined || !enable ||      recommended_posts[post.permalink] === undefined) &#123;      return [];  &#125;</code></pre></li><li><p>在根目录config中添加<code>enable</code>选项,具体如下:</p><pre><code class="line-numbers language-yml">recommended_posts:  enable: trueserver: https://api.truelaurel.com #后端推荐服务器地址timeoutInMillis: 10000 #服务时长，超过此时长，则使用离线推荐模式internalLinks: 3 #内部文章数量externalLinks: 1 #外部文章数量fixedNumber: false #控制是否返回固定数量的推荐文章, 如果默认推荐文章不够的话会填充当前文章的前后文章作为推荐文章.autoDisplay: true #自动在文章底部显示推荐文章excludePattern: [] #添加想要被过滤的链接的正则表达式, 如配置为 [&quot;example.com&quot;], 则所有包含 example.com 的链接都会从推荐文章中过滤掉.titleHtml: &lt;h1&gt;推荐文章&lt;span style=&quot;font-size:0.45em; color:gray&quot;&gt;（由&lt;a href=&quot;https://github.com/huiwang/hexo-recommended-posts&quot;&gt;hexo文章推荐插件&lt;/a&gt;驱动）&lt;/span&gt;&lt;/h1&gt; #自定义标题</code></pre></li></ul><h2 id="更新日志"><a href="#更新日志" class="headerlink" title="更新日志"></a>更新日志</h2><h3 id="2020-12-07"><a href="#2020-12-07" class="headerlink" title="2020.12.07"></a>2020.12.07</h3><ul><li>添加<code>hexo-recommended-posts</code>插件</li></ul><h3 id="2020-12-06"><a href="#2020-12-06" class="headerlink" title="2020.12.06"></a>2020.12.06</h3><ul><li>优化图片资源(首页轮播图)</li></ul><h3 id="2020-12-05"><a href="#2020-12-05" class="headerlink" title="2020.12.05"></a>2020.12.05</h3><ul><li>修复了一个 <code>ClustrMaps</code> 未统计访客的bug</li><li>默认不开启看板娘(太占用cpu内存,影响用户体验)</li></ul><h3 id="2020-11-22"><a href="#2020-11-22" class="headerlink" title="2020.11.22"></a>2020.11.22</h3><ul><li>使用<a href="https://github.com/fengkx/hexo-native-lazy-load">hexo-native-lazy-load</a> 代替<a href="https://github.com/Troy-Yang/hexo-lazyload-image">hexo-lazyload-image</a> </li></ul><h3 id="2020-11-16"><a href="#2020-11-16" class="headerlink" title="2020.11.16"></a>2020.11.16</h3><ul><li>添加网站背景图, 添加腾讯兔小巢</li><li>添加Mac样式的代码块</li></ul><h3 id="2020-11-15"><a href="#2020-11-15" class="headerlink" title="2020.11.15"></a>2020.11.15</h3><ul><li>删除冗余脚本, 模块化插件</li><li>使用<a href="https://deserts.io/valine-admin-document/">valine-admin</a>实现评论邮件提醒</li><li>修复黑夜模式bug, 现已完美运行</li></ul><h3 id="2020-11-14"><a href="#2020-11-14" class="headerlink" title="2020.11.14"></a>2020.11.14</h3><ul><li>加入文章更新日期</li><li>添加<a href="https://clustrmaps.com/">ClustrMaps</a>访客地图统计(从即日起)<ul><li>可通过config文件切换地图的样式</li><li>目前在pc端访问globe样式无法加载, 移动端则正常(bug)</li></ul></li></ul><h3 id="2020-09-25"><a href="#2020-09-25" class="headerlink" title="2020.09.25"></a>2020.09.25</h3><ul><li>加入黑夜模式</li><li>试运行黑夜模式</li></ul><div><h1>推荐文章<span style="font-size:0.45em; color:gray"></span></h1><ul><li><a href="https://godliuyang.wang/2020/09/15/cdn-for-blog/">CDN_for_blog</a></li><li><a href="https://godliuyang.wang/2019/12/06/arch-linux-i3wm-xiang-xi-pei-zhi/">Arch Linux + i3wm详细配置篇</a></li><li><a href="https://godliuyang.wang/2019/08/24/manjaro-i3wm-huan-jing-pei-zhi-pian/">Manjaro i3wm 高效率环境配置篇(持续更新)</a></li></ul></div>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CDN_for_blog</title>
      <link href="/2020/09/15/cdn-for-blog/"/>
      <url>/2020/09/15/cdn-for-blog/</url>
      
        <content type="html"><![CDATA[<h2 id="Why-CND"><a href="#Why-CND" class="headerlink" title="Why CND?"></a>Why CND?</h2><p>放在Github的资源在国内加载速度比较慢，因此需要使用CDN加速来优化网站打开速度，jsDelivr + Github便是免费且好用的CDN，非常适合博客网站使用。</p><h2 id="USE-CDN"><a href="#USE-CDN" class="headerlink" title="USE CDN"></a>USE CDN</h2><ol><li>创建一个名为CDN的github仓库</li><li>把仓库clone到本地</li><li>将图片文件存储到仓库中并上传<br>注：jsDelivr不支持加载超过20M的资源</li><li>发布仓库</li></ol><ul><li>点击release发布仓库<br><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/CDN_for_blog/release.jpg">  </li><li>注明版本号后发布<br><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/CDN_for_blog/release_number.jpg"> </li></ul><ol start="5"><li>通过如下形式来使用</li></ol><pre><code>// load any GitHub release, commit, or branch// note: we recommend using npm for projects that support ithttps://cdn.jsdelivr.net/gh/user/repo@version/file</code></pre><p>例如：在我的github仓库中有这么一个文件</p><p><a href="https://github.com/liuyaanng/CDN/blob/1.02/blog_images/CDN_for_blog/release.jpg">https://github.com/liuyaanng/CDN/blob/1.02/blog_images/CDN_for_blog/release.jpg</a></p><p>使用jsdelivr加速访问就是：</p><p><a href="https://cdn.jsdelivr.net/gh/liuyaanng/CDN@1.02/blog_images/CDN_for_blog/release.jpg">https://cdn.jsdelivr.net/gh/liuyaanng/CDN@1.02/blog_images/CDN_for_blog/release.jpg</a> </p><p>其中<strong>1.02</strong>是我发布的版本号，当然也可以使用模糊版本号的方法进行访问，无论哪种形式，都可以明显的感觉到访问速度快了很多。</p><p>另外，在我使用的过程中，发现在第一次发布之后，以后在使用图片可将版本号换成<code>master</code>直接访问。</p><h2 id="Generate-Jsdelivr-Link"><a href="#Generate-Jsdelivr-Link" class="headerlink" title="Generate Jsdelivr Link"></a>Generate Jsdelivr Link</h2><h3 id="1-使用脚本生成-更优解见2"><a href="#1-使用脚本生成-更优解见2" class="headerlink" title="1. 使用脚本生成  **更优解见2 **"></a><del>1. 使用脚本生成</del>  **更优解见<a href="#toc-heading-5">2</a> **</h3><ul><li>我写博客的截图均是由<a href="https://zh.xnipapp.com/">Xnip</a> 生成，截图文件存储目录<code>Pictures/Xnip</code>,故我写了一个小脚本来实现</li></ul><pre><code class="line-numbers language-bash">#!/bin/bash# @author:liuyaanngrep_path=~/Github/Myrep/CDN/blog_photo_folder=blog_imagespath=~/Pictures/Xnipprefix=https://cdn.jsdelivr.net/gh/liuyaanng/CDN@files=$(ls $path)check_v=0check_f=0help_text=&quot;This is a script for move the picture files to github, and get the jsdelivr link quickly. This scripts run with 2 arguments.\n1. cdn_server.sh -v version -f folder. version is the release version,folder is the pictures&#39;s file folder. \nfor example: cdn_server.sh -v 1.0 -f cdn_for_blog, it will get\nhttps://cdn.jsdelivr.net/gh/liuyaanng/CDN@1.0/blog_images/cdn_for_blog/filename\nif you do not use version, please use:cdn_server.sh -v master -f foldername.2. cdn_server.sh -h    Show help content.&quot;while getopts :v:f:h optdo    case &quot;$opt&quot; in        v) version=$OPTARG             check_v=1;;        f) folder=$OPTARG             check_f=1;;        h) echo -e $help_text             exit 1;;        ?) echo &quot;sync error. Use &#39;cdn_server.sh -h&#39; for help.&quot;;;    esacdoneprint_link()&#123;if [ ! -n &quot;$files&quot; ]; then    echo &quot;There is no file in Xnip folder.&quot;else    for filename in $files    do        echo $prefix$version/$blog_photo_folder/$folder/$filename        mv $path/* $rep_path$blog_photo_folder/$folder        echo &quot;move file $filename success&quot;    done    cd $rep_path    git add .    git commit -m &quot;upload $folder&quot;    git pushfi&#125;if [ $check_v -eq $check_f ]; then    print_linkelse    echo &quot;need 2 args but given 1.&quot;fi</code></pre><p>该脚本有以下功能：</p><ol><li>将截图转到github仓库中并提交</li><li>自动生成jsdelivr链接</li></ol><p>如果你想使用的话只需修改上面的路径信息就行了。</p><p>脚本有两个参数，你可以用<code>cdn_server.sh -h</code> 来查看帮助信息。</p><ol><li><code>-a version</code>. <code>-a</code>参数后跟发布的版本号</li><li><code>-f folder</code>. <code>-f</code>参数后跟仓库中文件夹名</li></ol><p>注意：版本号不是必需的，是为了区分新旧资源，如果不使用版本号，将会直接引用最新资源. 若不想指定版本号（第一次发布之后可用），可以直接使用 <code>-a master</code>.</p><p>例如：</p><pre><code class="line-numbers language-bash">cdn_server.sh -a master -f CDN_for_blog</code></pre><h3 id='1'> 2. 使用PicGO工具实现一键上传并生成CDN链接</h3><p><a href="https://github.com/Molunerfinn/PicGo">PicGo</a><br>文档太详细,不想做过多介绍了</p><div><h1>推荐文章<span style="font-size:0.45em; color:gray"></span></h1><ul><li><a href="https://godliuyang.wang/2020/09/18/mo-gai-hexo-bo-ke/">魔改hexo博客</a></li><li><a href="https://godliuyang.wang/2019/07/22/hexo-da-keng/">hexo大坑</a></li></ul></div>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> jsdelivr </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LeetCode EASY_9</title>
      <link href="/2020/08/17/leetcode-easy-9/"/>
      <url>/2020/08/17/leetcode-easy-9/</url>
      
        <content type="html"><![CDATA[<h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><ul><li>判断一个整数是否是回文数。回文数是指正序（从左向右）和倒序（从右向左）读都是一样的整数。</li></ul><p>示例：</p><pre><code>输入：121输出：True</code></pre><pre><code>输入：-121输出：False</code></pre><ul><li><p>思路1：将数字转化为字符串形式，分别进行头尾判断数字是否一致。<br>实现需要3步：</p><p>预判断：<br>首先判断当输入数字为负数或其个位数字是0（排除0）时一定输出False</p><pre><code class="line-numbers language-python">if (x &lt; 0 or (x % 10 == 0 and x!= 0)):    return False</code></pre><ul><li><p>将输入转化为字符串</p><pre><code class="line-numbers language-python3">x_str = str(x)</code></pre></li><li><p>分割字符串，不能用split方法。这里因为当输入为奇数时，数字中间的一位对结果无影响，故将这一位删掉。</p><pre><code class="line-numbers language-python3">x_list = []for x_s in x_str:  x_list.append(x_s)if num != num_i:  x_list.pop(num_i)</code></pre></li><li><p>判断是否为回文数。采用循环判断，从中间往两边依次判断，注意这里只要有一位不相同就会输出False</p></li></ul></li></ul><p>程序完整代码如下：</p><pre><code class="line-numbers language-python">if (x &lt; 0 or (x % 10 == 0 and x!= 0)):    return False    x_str = str(x)num = len(x_str) / 2 num_i = len(x_str) // 2x_list = []for x_s in x_str:    x_list.append(x_s)if num != num_i:    x_list.pop(num_i)i = 0result = Truewhile i &lt; num_i:    if x_list[num_i + i] == x_list[num_i - (i + 1)]:        result = True    else:        result = False        return result    i += 1return result</code></pre><p>在参考了LeetCode官网解法之后，发现了类似思路更简单的解法，代码如下：</p><pre><code class="line-numbers language-python">return (str(x) == str(x)[::-1])</code></pre><p>只需判断输入数字的一半即可判断结果，故可改进如下：</p><pre><code class="line-numbers language-python">x_str = str(x)x_len = len(x_str)x_h = x_len // 2return (x_str[:x_h] == x_str[-1:-x_h - 1:-1])</code></pre><p>以上方法均将输入转化为字符串之后再进行判断</p><h3 id="进阶"><a href="#进阶" class="headerlink" title="进阶:"></a>进阶:</h3><p>你能不将整数转为字符串来解决这个问题吗？</p><ul><li>思路2: 将数字反转，然后将反转得到的数字与原始数字进行比较，两者相同则是回文数。但这时要考虑到溢出问题，反转得到的数字可能会大于整数的最大值。为了避免这个问题，考虑只反转输入数字的一半，若后一半反转后与前一半相同则是回文数。算法考虑如下：<ul><li>预判断如上</li><li>设置一个反转数，将输入数字除10求余，得到的数字是反转数的首位，依次循环，可得到一系列的反转数，x的值会越来越小，而反转数的值会越来越大。对于偶数来说，循环终止的条件很简单，就是当x等于反转数，对于奇数来说，循环终止的条件是x小于反转数，随后判断此时的x与反转数是否相同。注意：对于奇数来说，判断条件是x是否等于反转数除10取整的值，因为奇数多了一轮迭代。</li></ul></li></ul><p>完整代码如下：</p><pre><code class="line-numbers language-python">if (x &lt; 0 or (x % 10 == 0 and x != 0)):    return Falsex_reversed = 0while x_reversed &lt; x:    x_reversed = x_reversed * 10 + x % 10    x = x // 10return (x == x_reversed or x == x_reversed // 10)</code></pre><p>C代码如下：</p><pre><code class="line-numbers language-C">bool isPalindrome(int x)&#123;if (x&lt;0 || (x%10 == 0 &amp;&amp; x != 0))&#123;    return false;&#125;int x_reversed = 0;while (x_reversed &lt; x)&#123;    x_reversed = x_reversed * 10 + x % 10;     x = x / 10;&#125;return (x == x_reversed || x == x_reversed / 10);&#125;</code></pre><h3 id="复杂度分析"><a href="#复杂度分析" class="headerlink" title="复杂度分析"></a>复杂度分析</h3><ul><li>时间复杂度：O(log n) ，对于每次迭代，都将输入除以n，故时间复杂度为O(log n)</li><li>空间复杂度： O(1). 只需在常数空间存储若干变量。</li></ul><div><h1>推荐文章<span style="font-size:0.45em; color:gray"></span></h1><ul><li><a href="https://godliuyang.wang/2020/03/30/scikit-image-guide/">scikit-image guide</a></li><li><a href="https://godliuyang.wang/2020/01/29/sort/">SORT</a></li><li><a href="https://godliuyang.wang/2019/08/10/face-recognition-with-opencv/">Face Recognition</a></li></ul></div>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> LeetCode </tag>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CLSW</title>
      <link href="/2020/04/22/clsw/"/>
      <url>/2020/04/22/clsw/</url>
      
        <content type="html"><![CDATA[<p><a href="https://godliuyang.wang/2019/08/24/manjaro-i3wm-huan-jing-pei-zhi-pian/#toc-heading-14">Install and Configure guide</a> </p><p><a href="https://github.com/liuyaanng/CLSW">My config</a> </p><h2 id="1-Vim-Neovim"><a href="#1-Vim-Neovim" class="headerlink" title="1. Vim(Neovim)"></a>1. Vim(Neovim)</h2><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/CLSW/vim_cheat_sheet.png" alt="vim cheat sheet"><br><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/CLSW/nvim.png" alt="Vim"></p><h2 id="2-Ranger"><a href="#2-Ranger" class="headerlink" title="2. Ranger"></a>2. Ranger</h2><ul><li><p>If you want a tool to preview images or other file type can preview as images (pdf, videos), i recommended ueberzug , but note, you should use ranger-git by <code>yaourt -S ranger-git</code></p></li><li><p>If you are a Mac user, iterm2 is enough to preview images.</p></li></ul><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/CLSW/ranger.png" alt="Ranger"> </p><h2 id="3-Fish"><a href="#3-Fish" class="headerlink" title="3. Fish"></a>3. Fish</h2><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/CLSW/Fish.png" alt="Fish"> </p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>GPU servers</title>
      <link href="/2020/04/21/gpu-servers/"/>
      <url>/2020/04/21/gpu-servers/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>我的任务是在GPU服务器上使用深度强化学习训练Amazing Brick，Amazing Brick使用Python的<a href="https://arcade.academy/index.html">Arcade</a> 库来写的。    </p><p>我在考虑在GPU服务器上训练之前，没有注意到Arcade是使用<strong>OpenGL</strong> 和<strong>Pyglet</strong> 来进行渲染的</p><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/GPU-servers/ArcadeVSPygame.png" alt="Arcade VS Pygame"></p><p>而服务器大多都以ssh登陆，而OpenGL就更不要说了，所以在我寻找服务器和准备环境的过程中就遇到了很多问题，这个在下面会说到。</p><h2 id="GPU-servers"><a href="#GPU-servers" class="headerlink" title="GPU servers"></a>GPU servers</h2><p>  <a href="https://www.zhihu.com/question/51707286">知乎:目前哪里可以租用到GPU服务器？</a> </p><hr><ul><li><a href="https://aistudio.baidu.com/aistudio/index">AI Studio</a></li></ul><p>非常良心，用算力可以获得算力，不怕你用，用得多送的多。<br>这里有一位同学写的攻略<a href="https://zhuanlan.zhihu.com/p/73361554?utm_source=wechat_session&utm_medium=social&utm_oi=28323023421440">薅薅国产免费GPU计算资源</a><br>登陆方式有 <strong>notebook</strong> ,可使用 <strong>Terminal</strong> ,但没有root权限，这就意味着有很多限制，最重要的是预装框架为 <strong>PaddlePaddle</strong> .  不能用 <code>TensorFlow</code>, 总不能为了嫖GPU服务器再去学一种框架吧，别担心, 这里有<a href="https://www.zhihu.com/question/336485090">百度paddlepaddle平台如何配置tensorflow-gpu</a>. 这个我没有尝试，有兴趣的可以尝试一下（有空了我会来填这个坑）</p><ul><li><a href="https://www.easyaiforum.cn/">易学智能</a> </li></ul><p>我现在使用的就是这个</p><p>感谢<a href="https://www.paratera.com/liveInterface.html">并行超算</a> 给我提供的50算力的试用，我就是靠着这50算力把环境给搭明白了哈哈哈。</p><ul><li>…</li></ul><h2 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h2><h3 id="1-Ubuntu"><a href="#1-Ubuntu" class="headerlink" title="1. Ubuntu"></a>1. Ubuntu</h3><p>GPU 配置可根据自己的需要调整<br>我选择的是：</p><pre><code>OS: UbuntuGPU: RTX 2080TICPU: E5 4COREMEMARY: 15GENVIROMENT: Python 3.6 + TF 2.0</code></pre><p>这里的环境使开箱即用的，不需要激活</p><ol><li>基本包安装</li></ol><pre><code class="line-numbers language-bash">pip install arcade dataclasses scikit-image</code></pre><ol start="2"><li>测试arcade环境</li></ol><ul><li>Arcade 官方的一个小demo</li></ul><pre><code class="line-numbers language-python">&quot;&quot;&quot;Drawing an example happy faceIf Python and Arcade are installed, this example can be run from the command line with:python -m arcade.examples.happy_face&quot;&quot;&quot;import arcade# Set constants for the screen sizeSCREEN_WIDTH = 600SCREEN_HEIGHT = 600SCREEN_TITLE = &quot;Happy Face Example&quot;# Open the window. Set the window title and dimensionsarcade.open_window(SCREEN_WIDTH, SCREEN_HEIGHT, SCREEN_TITLE)# Set the background colorarcade.set_background_color(arcade.color.WHITE)# Clear screen and start render processarcade.start_render()# --- Drawing Commands Will Go Here ---# Draw the facex = 300y = 300radius = 200arcade.draw_circle_filled(x, y, radius, arcade.color.YELLOW)# Draw the right eyex = 370y = 350radius = 20arcade.draw_circle_filled(x, y, radius, arcade.color.BLACK)# Draw the left eyex = 230y = 350radius = 20arcade.draw_circle_filled(x, y, radius, arcade.color.BLACK)# Draw the smilex = 300y = 280width = 120height = 100start_angle = 190end_angle = 350arcade.draw_arc_outline(x, y, width, height, arcade.color.BLACK,                        start_angle, end_angle, 10)# Finish drawing and display the resultarcade.finish_render()# Keep the window open until the user hits the &#39;close&#39; buttonarcade.run()</code></pre><ul><li><p>-&gt;运行发现报错：<code>ImportError: Library “GLU” not found</code></p><p>解决办法：<a href="https://stackoverflow.com/questions/50446867/importerror-library-glu-not-found"><code>sudo apt-get install freeglut3-dev</code></a> </p></li><li><p>-&gt;再次运行报错：<code>pyglet.canvas.xlib.NoSuchDisplayException: Cannot connect to &quot;None&quot;</code></p><p>原因大概是arcade调用<code>pyglet</code>绘制窗口需要图形界面（就是弹出来的那个框框），而当你使用ssh连接server时是没有图形界面的。<br>因此我们需要一个虚拟的图形界面，而<a href="https://linux.die.net/man/1/xvfb"><code>xvfb-run</code></a>就是一个提供虚拟图形界面的工具。<br>这里有一篇文章是介绍如何使用<code>xvfb</code>来创建一个虚拟桌面来进行服务器端的图形测试的。</p><p><a href="http://elementalselenium.com/tips/38-headless">How To Run Your Tests Headlessly with Xvfb</a></p><p>安装<code>xvfb</code>之前要先更新一下 <code>sudo apt update</code>, 如果遇到密钥不可用可以<code>sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 密钥</code></p></li><li><p>-&gt;使用<code>xvfb-run -a python xxx.py</code> 来继续测试报错：<code>arcade.application.NoOpenGLException:  Unable to create an OpenGL 3.3+ context. Check to make sure your system supports OpenGL 3.3 or higher.</code>     </p><p>意思是OpenCV版本太低</p></li><li><p>接下来查看服务器端的OpenGL版本，使用<code>glxinfo | grep &quot;OpenGL&quot;</code></p><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/GPU-servers/opencv_version.png" alt="opencv_version"> </p><p>还是没有图形界面的问题，继续使用<code>xvfb-run -a glxinfo | grep &quot;OpenGL&quot;</code></p><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/GPU-servers/opencv_version2.png" alt="opencv_version"> </p><p>显示OpenGL的版本为3.1, 依旧无法满足arcade需要的OpenGL3+。</p></li><li><p>会不会是由于服务端原机器上的低版本OpenGL造成<code>xvfb</code>虚拟后的OpenCV版本较低？</p><p>我在本地的Ubuntu系统上分别运行<code>glxinfo | grep &quot;OpenGL&quot;</code>, 发现原机器版本为4.6，但<code>xvfb</code>虚拟后的版本为3.1，推测为<code>Xvfb</code>虚拟图形界面的原因。</p><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/GPU-servers/glxinfo.png"></p><p>此问题没有找到解决办法</p></li><li><p>⚠️ 如果你是一个<code>pygame</code>用户，或者你对OpenGL的版本要求不高（3.1），你完全可以使用<code>xvfb-run</code>来进行要求图形化的测试。经测试，pygame在GPU服务器上可以运行。</p></li></ul><p>既然Ubuntu无法完成我的工作，故我开始使用Windows</p><h3 id="2-Windows-10"><a href="#2-Windows-10" class="headerlink" title="2. Windows 10"></a>2. Windows 10</h3><p>系统配置</p><pre><code>OS: Windows 10GPU: RTX 2080TICPU: I5</code></pre><ul><li>进入系统要先激活环境,详细信息见<a href="https://www.easyaiforum.cn/helpDocument?manual_id=136">帮助文档</a> </li></ul><pre><code class="line-numbers language-bash">conda activate py36h</code></pre><ul><li><p>安装基本包和Ubuntu一样，测试的时候发现依旧存在<code>OpenGL</code>的问题,查看OpenGL版本为1.1</p><p>这里给几个查看OpenGL的工具：</p><ul><li>GPU_Caps_Viewer: 链接: <a href="https://pan.baidu.com/s/1_YisKqKJY_2Uml2MQXKnNQ">https://pan.baidu.com/s/1_YisKqKJY_2Uml2MQXKnNQ</a> 提取码: use7</li><li>GLViewer: 链接: <a href="https://pan.baidu.com/s/1G2GR5S9oSqatMmBqv5YLdA">https://pan.baidu.com/s/1G2GR5S9oSqatMmBqv5YLdA</a> 提取码: 27s2</li></ul></li><li><p>更新OpenGL</p><p>更新显卡驱动即可: <a href="https://www.nvidia.com/Download/index.aspx#">NVIDIA Driver Downloads</a> , 下载对应版本的驱动安装。</p><p>我在网上找到很多说用 驱动精灵， 鲁大师等软件更新驱动，我试了一下，完全不起作用。官网驱动亲测可行，就是有点耗时间。</p></li><li><p>更新完OpenGL之后代码就可以快乐地训练啦</p></li></ul><div><h1>推荐文章<span style="font-size:0.45em; color:gray"></span></h1><ul><li><a href="https://godliuyang.wang/2020/05/09/use-tensorflow-in-ai-studio/">Use Tensorflow in AI Studio</a></li><li><a href="https://godliuyang.wang/2019/08/07/enjoy-pytorch/">Enjoy PyTorch</a></li></ul></div>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Deep Learning </tag>
            
            <tag> GPU </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>scikit-image guide</title>
      <link href="/2020/03/30/scikit-image-guide/"/>
      <url>/2020/03/30/scikit-image-guide/</url>
      
        <content type="html"><![CDATA[<h1 id="Python的数字图片处理包。比如-PIL-pillow-opencv-scikit-image"><a href="#Python的数字图片处理包。比如-PIL-pillow-opencv-scikit-image" class="headerlink" title="Python的数字图片处理包。比如 PIL, pillow, opencv, scikit-image"></a>Python的数字图片处理包。比如 PIL, pillow, opencv, scikit-image</h1><p>PIL和pillow只提供最基础的数字图像处理，功能有限；opencv实际上是一个c++库，只提供了python借口，更新速度非常慢。scikit-image是基于scipy的一款图像处理包，它将图片作为numpy数组进行处理，与matlab一样，所以我选择了是scikit-image进行图像处理</p><h2 id="1-Install"><a href="#1-Install" class="headerlink" title="1. Install"></a>1. Install</h2><pre><code class="line-numbers language-bash">conda install -c conda-forge scikit-image</code></pre><div><h1>推荐文章<span style="font-size:0.45em; color:gray"></span></h1><ul><li><a href="https://godliuyang.wang/2020/08/17/leetcode-easy-9/">LeetCode EASY_9</a></li><li><a href="https://godliuyang.wang/2020/01/29/sort/">SORT</a></li><li><a href="https://godliuyang.wang/2019/08/10/face-recognition-with-opencv/">Face Recognition</a></li></ul></div>]]></content>
      
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>About Proxy</title>
      <link href="/2020/02/04/about-proxy/"/>
      <url>/2020/02/04/about-proxy/</url>
      
        <content type="html"><![CDATA[<h1 id="About-Proxy"><a href="#About-Proxy" class="headerlink" title="About Proxy"></a>About Proxy</h1><p><del>Script: <a href="https://github.com/liuyaanng/SSR">SSR</a></del>  SSR seems very unstable, i use <strong>v2ray</strong> now.</p><p>Ping test: <a href="http://ping.chinaz.com/">ping</a> </p><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/About-Proxy/1.png" alt="Youtube speed"> </p><h2 id="V2Ray"><a href="#V2Ray" class="headerlink" title="V2Ray"></a>V2Ray</h2><p>Preconditions:</p><ul><li>a VPS: <a href="https://www.vultr.com/">vultr</a>( $5/m , i uesd now) , <a href="https://billing.virmach.com/cart.php">VIRMACH</a>( $1.25/m)</li><li>a Domain: (<a href="https://www.namesilo.com/">Namesilo</a>($0.99), <a href="https://www.freenom.com/">Freenom</a>(free) )</li><li>VPS OS version: Debian 9+ / Ubuntu 18.04+ / CentOS 7+</li></ul><h3 id="1-Resolve-the-domain-to-the-IP-of-your-VPS"><a href="#1-Resolve-the-domain-to-the-IP-of-your-VPS" class="headerlink" title="1. Resolve the domain to the IP of your VPS"></a>1. Resolve the domain to the IP of your VPS</h3><p><a href="https://www.cloudflare.com/">Cloudflare</a> </p><h4 id="1-Add-site"><a href="#1-Add-site" class="headerlink" title="1. Add site"></a>1. Add site</h4><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/About-Proxy/2.png"> </p><h4 id="2-Change-your-domain-NS"><a href="#2-Change-your-domain-NS" class="headerlink" title="2. Change your domain NS"></a>2. Change your domain NS</h4><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/About-Proxy/5.png"> </p><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/About-Proxy/3.png"> </p><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/About-Proxy/4.png"> </p><h4 id="3-Add-record"><a href="#3-Add-record" class="headerlink" title="3. Add record"></a>3. Add record</h4><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/About-Proxy/6.png"> </p><p><del>You can light the cloud icon to use a proxy which can hidden real ip. ~</del> it is possible to make v2ray doesn’t work.</p><p>NOTE: <strong>Do it after installed V2Ray if u need it</strong></p><h4 id="4-Ping"><a href="#4-Ping" class="headerlink" title="4. Ping"></a>4. Ping</h4><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/About-Proxy/7.png"> </p><p>it works.</p><h3 id="2-Set-BBR-lotserver"><a href="#2-Set-BBR-lotserver" class="headerlink" title="2. Set BBR lotserver"></a>2. Set BBR lotserver</h3><pre><code class="line-numbers language-bash">wget --no-check-certificate https://raw.githubusercontent.com/liuyaanng/SSR/master/tcp.sh &amp;&amp; chmod +x tcp.sh &amp;&amp; ./tcp.sh</code></pre><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/About-Proxy/8.png"> </p><h3 id="3-Install-V2Ray"><a href="#3-Install-V2Ray" class="headerlink" title="3. Install V2Ray"></a>3. Install V2Ray</h3><p>There are two way to install V2Ray use different methods.</p><ul><li>Vmess+websocket+TLS+Nginx+Website</li></ul><pre><code class="line-numbers language-bash">bash &lt;(curl -L -s https://raw.githubusercontent.com/wulabing/V2Ray_ws-tls_bash_onekey/master/install.sh) | tee v2ray_ins.log</code></pre><ul><li>Vmess + HTTP2 over TLS</li></ul><pre><code class="line-numbers language-bash">bash &lt;(curl -L -s https://raw.githubusercontent.com/wulabing/V2Ray_ws-tls_bash_onekey/master/install_h2.sh) | tee v2ray_ins_h2.log</code></pre><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/About-Proxy/9.png"> </p><p>SELF TESTING</p><h3 id="4-Run-V2Ray"><a href="#4-Run-V2Ray" class="headerlink" title="4. Run V2Ray"></a>4. Run V2Ray</h3><ul><li>start v2ray: <code>systemctl start v2ray</code></li><li>stop v2ray: <code>systemctl stop v2ray</code></li><li>start nginx: <code>systemctl start nginx</code></li><li>stop nginx: <code>systemctl stop nginx</code></li></ul><h3 id="5-V2Ray-client"><a href="#5-V2Ray-client" class="headerlink" title="5. V2Ray client"></a>5. V2Ray client</h3><ul><li><p>Windows: </p><ul><li><a href="https://tlanyan.me/download.php?filename=/v2/windows/v2rayN-v3.5.zip">V2RayN</a> </li></ul></li><li><p>MacOS:</p><ul><li><a href="https://tlanyan.me/download.php?filename=/v2/macos/v2rayU-v1.5.1.dmg">V2RayU</a> </li><li><a href="https://github.com/yichengchen/clashX/releases/download/1.18.2/ClashX.dmg">ClashX</a> (what i use now)</li></ul></li><li><p>Linux:</p><ul><li><p><a href="https://www.jianshu.com/p/a5b6d9dc0441">link</a> </p></li><li><p><a href="https://snapcraft.io/install/v2ray-core/arch#install">Snap</a></p></li><li><p>Configuration V2Ray</p><p>config file is located in <code>/etc/v2ray/config.json</code></p><pre><code class="line-numbers language-bash">&#123;&quot;policy&quot;: null,&quot;log&quot;: &#123;&quot;access&quot;: &quot;&quot;,&quot;error&quot;: &quot;&quot;,&quot;loglevel&quot;: &quot;warning&quot;&#125;,&quot;inbounds&quot;: [&#123;  &quot;tag&quot;: &quot;proxy&quot;,  &quot;port&quot;: 1080,  &quot;listen&quot;: &quot;127.0.0.1&quot;,  &quot;protocol&quot;: &quot;socks&quot;,  &quot;sniffing&quot;: &#123;    &quot;enabled&quot;: true,    &quot;destOverride&quot;: [      &quot;http&quot;,      &quot;tls&quot;    ]  &#125;,  &quot;settings&quot;: &#123;    &quot;auth&quot;: &quot;noauth&quot;,    &quot;udp&quot;: true,    &quot;ip&quot;: null,    &quot;address&quot;: null,    &quot;clients&quot;: null  &#125;,  &quot;streamSettings&quot;: null&#125;],&quot;outbounds&quot;: [&#123;  &quot;tag&quot;: &quot;proxy&quot;,  &quot;protocol&quot;: &quot;vmess&quot;,  &quot;settings&quot;: &#123;    &quot;vnext&quot;: [      &#123;        &quot;address&quot;: &quot; &quot;, //your domain address        &quot;port&quot;:  ,   //port        &quot;users&quot;: [          &#123;            &quot;id&quot;: &quot; &quot;,   //id            &quot;alterId&quot;: 2,            &quot;email&quot;: &quot;t@t.tt&quot;,            &quot;security&quot;: &quot;auto&quot;          &#125;        ]      &#125;    ],    &quot;servers&quot;: null,    &quot;response&quot;: null  &#125;,    &quot;streamSettings&quot;: &#123;    &quot;network&quot;: &quot;ws&quot;,    &quot;security&quot;: &quot;tls&quot;,    &quot;tlsSettings&quot;: &#123;      &quot;allowInsecure&quot;: true,      &quot;serverName&quot;: &quot; &quot;    //domain address    &#125;,    &quot;tcpSettings&quot;: null,    &quot;kcpSettings&quot;: null,    &quot;wsSettings&quot;: &#123;      &quot;connectionReuse&quot;: true,      &quot;path&quot;: &quot;/e3137ae7/&quot;,   //path      &quot;headers&quot;: &#123;        &quot;Host&quot;: &quot; &quot;  //domain address      &#125;    &#125;,    &quot;httpSettings&quot;: null,    &quot;quicSettings&quot;: null  &#125;,  &quot;mux&quot;: &#123;    &quot;enabled&quot;: true,    &quot;concurrency&quot;: 8  &#125;&#125;,&#123;  &quot;tag&quot;: &quot;direct&quot;,  &quot;protocol&quot;: &quot;freedom&quot;,  &quot;settings&quot;: &#123;    &quot;vnext&quot;: null,    &quot;servers&quot;: null,    &quot;response&quot;: null  &#125;,  &quot;streamSettings&quot;: null,  &quot;mux&quot;: null&#125;,&#123;  &quot;tag&quot;: &quot;block&quot;,  &quot;protocol&quot;: &quot;blackhole&quot;,  &quot;settings&quot;: &#123;    &quot;vnext&quot;: null,    &quot;servers&quot;: null,    &quot;response&quot;: &#123;      &quot;type&quot;: &quot;http&quot;    &#125;  &#125;,  &quot;streamSettings&quot;: null,  &quot;mux&quot;: null&#125;],&quot;stats&quot;: null,&quot;api&quot;: null,&quot;dns&quot;: null,&quot;routing&quot;: &#123;&quot;domainStrategy&quot;: &quot;IPIfNonMatch&quot;,&quot;rules&quot;: [  &#123;    &quot;type&quot;: &quot;field&quot;,    &quot;port&quot;: null,    &quot;inboundTag&quot;: [      &quot;api&quot;    ],    &quot;outboundTag&quot;: &quot;api&quot;,    &quot;ip&quot;: null,    &quot;domain&quot;: null  &#125;]&#125;&#125;</code></pre></li></ul></li></ul><h2 id="Terminal-Proxy"><a href="#Terminal-Proxy" class="headerlink" title="Terminal Proxy"></a>Terminal Proxy</h2><h3 id="proxychains"><a href="#proxychains" class="headerlink" title="proxychains"></a>proxychains</h3><p>i can make some terminal commands run with proxy. But it seems can’t work on my computer. Sad. Anyway, i still share the way to install and configure.</p><ul><li>Installation</li></ul><pre><code class="line-numbers language-bash">sudo pacman -S proxychains</code></pre><p>Or you can install it from source code. (make sure your <code>gcc</code> installed)</p><pre><code class="line-numbers language-bash">git clone https://github.com/rofl0r/proxychains-ngcd proxychains-ng./configuresudo make &amp;&amp; make installsudo make install-config(generate config file)</code></pre><ul><li>Configuration<br>config file is saved in <code>/etc/proxychains.conf</code></li></ul><p>Add <code>socks5  127.0.0.1 1080</code> to the end. note the space!</p><ul><li>Use</li></ul><p>Add <code>proxychains</code> before the terminal commands.</p><pre><code class="line-numbers language-bash">proxychains git clone https://github.com/rofl0r/proxychains-ng</code></pre><p>you can run <code>npm</code> , <code>docker</code> … But <code>ping</code> command is not suitable, because proxychains can only proxy <strong>TCP</strong>, and <code>ping</code> is use <strong>ICMP</strong>.</p><h3 id="git"><a href="#git" class="headerlink" title="git"></a>git</h3><p>You may need to configure a proxy server if you’re having trouble cloning or fetching from a remote repository or getting an error like unable to access <code>Couldn&#39;t resolve host</code>.</p><p>Consider something like:</p><pre><code class="line-numbers language-bash">git config --global http.proxy http://proxyUsername:proxyPassword@proxy.server.com:port</code></pre><p>i use <code>git config --global http.proxy &#39;socks5://127.0.0.1:1080&#39;</code> to set my git cause i use socks5.</p><p>i also use <code> git config --local http.proxy &#39;socks5://127.0.0.1:1080&#39;</code> to set my local config that can only work in ‘git clone’ repositories.</p><p>Check global proxy:</p><pre><code class="line-numbers language-bash">git config --global http.proxy</code></pre><p>Check local proxy:</p><pre><code class="line-numbers language-bash">git config --local http.proxy</code></pre><p>Cancel proxy:</p><pre><code class="line-numbers language-bash">git config --global --unset http.proxy</code></pre><pre><code class="line-numbers language-bash">git config --local --unset http.proxy</code></pre><h3 id="wget"><a href="#wget" class="headerlink" title="wget"></a>wget</h3><p>Create <code>.wgetrc</code> file in home directory.</p><pre><code class="line-numbers language-bash">use_proxy=yeshttp_proxy=127.0.0.1:1080https_proxy=127.0.0.1:1080</code></pre><p>it can only use http proxy.</p>]]></content>
      
      
      
        <tags>
            
            <tag> vpn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Horner&#39;s Method</title>
      <link href="/2020/02/02/horner-s-method/"/>
      <url>/2020/02/02/horner-s-method/</url>
      
        <content type="html"><![CDATA[<h3 id="Function-vs-Polynomial"><a href="#Function-vs-Polynomial" class="headerlink" title="Function vs Polynomial"></a>Function vs Polynomial</h3><ul><li>f(x) means a function, any function<ul><li>$$ f(x) = \sin (e^x) + \ln ( \frac{1}{x^2+1} ) $$</li><li>$$ f(x) = \alpha x^3 - \arctan(x) $$</li></ul></li><li>p(x) means a polynomial function<ul><li>$$ p(x) = dx^3 + cx^2 + bx + a $$</li><li>$$ p(x) = a + bx + cx^2 + dx^3 $$</li></ul></li><li>evaluating p(x) can be slow<ul><li>$$ p(x) = a + bx + cx^2 + dx^3 $$</li><li>$$ p(x) = a + b \times x + c \times x \times x + d \times x \times x \times x $$</li></ul></li></ul><p>It include <strong>4 additions</strong> and <strong>6 multiplications</strong></p><h3 id="Horner’s-Method"><a href="#Horner’s-Method" class="headerlink" title="Horner’s Method"></a>Horner’s Method</h3><ul><li>Rewrite p(x)<ul><li>$$ p(x) = a + bx + cx^2 + dx^3 $$</li><li>$$ p(x) = a + bx + x(cx + dx^2) $$</li><li>$$ p(x) = a + x(b + x(cx + dx)) $$</li><li>$$ p(x) = a + x \times (b + x \times (c + d \times x)) $$</li></ul></li></ul><p>It include <strong>3 additions</strong> and <strong>3 multiplications</strong></p><ul><li>In terms of $a_n$<ul><li>$$ p(x) = a_0 + a_1x + a_2x^2 + a_3x^3 + \cdots + a_nx^n $$</li><li>$$ p(x) = a_0x^0 + a_1x + a_2x^2 + a_3x^3 + \cdots + a_nx^n  = \sum_{i=0}^{n} a_i x^i $$</li><li>$$ p(x) = a_0 +x(a_1 + x(a_2 + \cdots + x(a_{n-1} + xa_n    ) \cdots )) $$</li><li>$$p(x) = p_0(x) where p_i(x) = \begin{cases} a_i + x \times p_{i+1}(x), if i &lt; n \ a_n, if i = n \end{cases}$$</li></ul></li></ul><h4 id="Pseudocode"><a href="#Pseudocode" class="headerlink" title="Pseudocode"></a>Pseudocode</h4><p>Give the value of coefficient $a_0$, $a_1$, $\cdots$, $a_n$ and $x$.</p><pre><code class="line-numbers language-python">y = 0for i = n downto 0  y = a_i + xy</code></pre>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>SORT</title>
      <link href="/2020/01/29/sort/"/>
      <url>/2020/01/29/sort/</url>
      
        <content type="html"><![CDATA[<h2 id="SORT"><a href="#SORT" class="headerlink" title="SORT"></a>SORT</h2><h3 id="1-BUBBLE-SORT"><a href="#1-BUBBLE-SORT" class="headerlink" title="1. BUBBLE SORT"></a>1. BUBBLE SORT</h3><pre><code class="line-numbers language-python">BUBBLE-SORT(A)//A:sort arrayfor i = 1 to A.length - 1  for j = A.length to i + 1    if A[j] &lt; A[j-1]      swap(A[j], A[j-1]</code></pre><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/SORT/BUBBLE_SORT.gif" alt="BUBBLE_SORT"> </p><p>$$ \Theta (n^2) $$</p><h3 id="2-INSERTION-SORT"><a href="#2-INSERTION-SORT" class="headerlink" title="2. INSERTION SORT"></a>2. INSERTION SORT</h3><pre><code class="line-numbers language-python">INSERTION-SORT(A)//A:sort arrayfor j = 2 to A.length  key = A[j]  //Insert A[j] into the sorted sequence A[1..j-1]  i = j - 1  while i &gt; 0 and A[i] &gt; key    A[i+1] = A[i]    i = i - 1  A[i+1] = key</code></pre><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/SORT/INSERTION_SORT.gif" alt="INSERTION_SORT"> </p><p>$$ \Theta (n^2) $$</p><h3 id="3-SELECT-SORT"><a href="#3-SELECT-SORT" class="headerlink" title="3. SELECT SORT"></a>3. SELECT SORT</h3><pre><code class="line-numbers language-python">SELECT-SORT(A)//A:sort arrayfor i = 1 to range(i,A.length)  min = A[i]  for j = 1 to A.length    if min &gt; A[j]      min = A[j]      min_index = j  swap(A[i],A[min_index])</code></pre><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/SORT/SELECT_SORT.gif" alt="SELECT_SORT"> </p><p>$$ \Theta (n^2) $$</p><h3 id="4-MERGE-SORT"><a href="#4-MERGE-SORT" class="headerlink" title="4. MERGE SORT"></a>4. MERGE SORT</h3><pre><code class="line-numbers language-python">MERGE-SORT(A, p, r)//A:sort array//p:begin index//r:end indexif p &lt; r  q = [(p + r) / 2]  MERGE-SORT(A, p, q)  MERGE-SORT(A, q+1, r)  MERGE(A, p, q, r)MERGE(A, p, q, r)//A:sort array//p:begin index//q:mid index//r:end indexn1 = q - p + 1n2 = r - qLet L[1..n1 + 1] and R[1..n2 + 1] be new arraysfor i = 1 to n1  L[i] = A[p + i - 1]for j = 1 to n2  R[j] = A[q + j]L[n1 + 1] = infinityR[n2 + 1] = infinityi = 1j = 1for k = p to r  if L[i] &lt;= R[j]    A[k] = L[i]    i = i + 1  else    A[k] = R[j]    j = j + 1</code></pre><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/SORT/MERGE_SORT.gif" alt="MERGE_SORT"> </p><p>$$ \Theta (n) $$</p><div><h1>推荐文章<span style="font-size:0.45em; color:gray"></span></h1><ul><li><a href="https://godliuyang.wang/2020/08/17/leetcode-easy-9/">LeetCode EASY_9</a></li><li><a href="https://godliuyang.wang/2020/03/30/scikit-image-guide/">scikit-image guide</a></li><li><a href="https://godliuyang.wang/2019/08/10/face-recognition-with-opencv/">Face Recognition</a></li></ul></div>]]></content>
      
      
      <categories>
          
          <category> Algorithms </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Arch Linux + i3wm详细配置篇</title>
      <link href="/2019/12/06/arch-linux-i3wm-xiang-xi-pei-zhi/"/>
      <url>/2019/12/06/arch-linux-i3wm-xiang-xi-pei-zhi/</url>
      
        <content type="html"><![CDATA[<h2 id="Arch-linux-i3"><a href="#Arch-linux-i3" class="headerlink" title="Arch linux + i3"></a>Arch linux + i3</h2><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/Arch-Linux/img.jpg" alt="arch+i3"><br><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/Arch-Linux/main.png"><br><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/Arch-Linux/albert.png"><br><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/Arch-Linux/music.png"> </p><h2 id="Installation-guide"><a href="#Installation-guide" class="headerlink" title="Installation guide"></a>Installation guide</h2><h3 id="1-Boot-the-live-environment"><a href="#1-Boot-the-live-environment" class="headerlink" title="1. Boot the live environment"></a>1. Boot the live environment</h3><p>The live environment can be booted from a USB flash device, an optical disc or a network with PXE. </p><h3 id="2-Connect-the-Internet"><a href="#2-Connect-the-Internet" class="headerlink" title="2. Connect the Internet"></a>2. Connect the Internet</h3><pre><code class="line-numbers language-bash">wifi-menu</code></pre><p>Use <code>ping www.archlinux.org</code> to verify the connection.</p><h3 id="3-Update-the-system-clock"><a href="#3-Update-the-system-clock" class="headerlink" title="3. Update the system clock"></a>3. Update the system clock</h3><p>Use <code>tiledatectl</code> to ensure the system colck is accurate</p><pre><code class="line-numbers language-bash">timedatectl set-ntp true</code></pre><p>To check the service status, use <code>timedatectl status</code></p><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/Arch-Linux/1.png" alt="timedate"> </p><h3 id="4-Partition-the-disks"><a href="#4-Partition-the-disks" class="headerlink" title="4. Partition the disks"></a>4. Partition the disks</h3><p>When recognized by the live system, disks are assigned to a block device such as <code>/dev/sda</code> or <code>/dev/nvme0n1</code> . To identify these devices, use <code>lsblk</code> or <code>fdisk</code> .</p><pre><code class="line-numbers language-bash">fdisk -l</code></pre><p>Use <a href="https://wiki.archlinux.org/index.php/Fdisk">fdisk</a> or <a href="https://wiki.archlinux.org/index.php/Parted">parted</a> to modify partition tables. </p><p>for example: </p><pre><code class="line-numbers language-bash"># parted /dev/sda(parted) mklabelNew disk label type? gpt(parted) exit</code></pre><p>Use <code>cfdisk</code> to create partition.    </p><p>It should include <strong>EFI</strong> , <strong>/</strong> (root), <strong>/home</strong> , <strong>/swap</strong> .</p><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/Arch-Linux/2.png" alt="Disks"> </p><h3 id="5-Format-the-partitions"><a href="#5-Format-the-partitions" class="headerlink" title="5. Format the partitions"></a>5. Format the partitions</h3><p>Note the correct partitions</p><ul><li>EFI partition</li></ul><pre><code class="line-numbers language-bash">mkfs.vfat /dev/sda2</code></pre><ul><li>root and home partition</li></ul><pre><code class="line-numbers language-bash">mkfs.ext4 /dev/sda3mkfs.ext4 /dev/sda4</code></pre><ul><li>swap partition</li></ul><pre><code class="line-numbers language-bash">mkswap -f /dev/sda5swapon /dev/swap</code></pre><h3 id="6-Mount-the-file-systems"><a href="#6-Mount-the-file-systems" class="headerlink" title="6. Mount the file systems"></a>6. Mount the file systems</h3><p>Pay attention to the <strong>order</strong> of mounting partitions!</p><ul><li>mount the file system on the root partition to <code>/mnt</code></li></ul><pre><code class="line-numbers language-bash">mount /dev/sda3 /mnt</code></pre><ul><li>create <strong>home</strong> folder in <code>/mnt</code> folder and mount the file system on the home partition to <code>/mnt/home</code></li></ul><pre><code class="line-numbers language-bash">mkdir /mnt/homemount /dev/sda4 /mnt/home</code></pre><ul><li>create <strong>/mnt/boot/EFI</strong> folder and mount the file system on the EFI partition to <code>/mnt/boot/EFI</code></li></ul><pre><code class="line-numbers language-bash">mkdir /mnt/bootmkdir /mnt/boot/EFImount /dev/sda2 /mnt/boot/EFI</code></pre><h3 id="7-Select-the-mirrors"><a href="#7-Select-the-mirrors" class="headerlink" title="7. Select the mirrors"></a>7. Select the mirrors</h3><pre><code class="line-numbers language-bash">vim /etc/pacman.d/mirrorlist</code></pre><p>Paste the China mirrors in the beginning</p><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/Arch-Linux/3.png" alt="mirrorlist"> </p><h3 id="8-Install-essential-packages"><a href="#8-Install-essential-packages" class="headerlink" title="8. Install essential packages"></a>8. Install essential packages</h3><pre><code class="line-numbers language-bash">pacstrap /mnt base linux linux-firmware</code></pre><h3 id="9-Generate-an-fstab-file"><a href="#9-Generate-an-fstab-file" class="headerlink" title="9. Generate an fstab file"></a>9. Generate an <strong>fstab</strong> file</h3><pre><code class="line-numbers language-bash">genfstab -U /mnt &gt;&gt; /mnt/etc/fstab</code></pre><p>Check the resulting <code>/mnt/etc/fstab</code> file, and edit it in case of errors.</p><pre><code class="line-numbers language-bash">cat /mnt/etc/fstab</code></pre><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/Arch-Linux/4.png" alt="fstab"> </p><h3 id="10-Change-root-into-the-new-system"><a href="#10-Change-root-into-the-new-system" class="headerlink" title="10. Change root into the new system"></a>10. Change root into the new system</h3><pre><code class="line-numbers language-bash">arch-chroot /mnt</code></pre><h3 id="11-Time-zone"><a href="#11-Time-zone" class="headerlink" title="11. Time zone"></a>11. Time zone</h3><pre><code class="line-numbers language-bash">ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc.localtimehwclock --systohc</code></pre><h3 id="12-Localozation-Language"><a href="#12-Localozation-Language" class="headerlink" title="12. Localozation(Language)"></a>12. Localozation(Language)</h3><ul><li>Uncomment <code>en_US.UTF-8 UTF-8</code> and others needed locals in <code>/etc/locale.gen</code> , and generate them with:</li></ul><pre><code class="line-numbers language-bash">locale-gen</code></pre><ul><li>Create the <code>locale.conf</code> file, and set <code>LANG</code> variable accordingly:</li></ul><pre><code class="line-numbers language-bash">vim /etc/locale.confLANG=en_US.UTF-8</code></pre><h3 id="13-Initramfs"><a href="#13-Initramfs" class="headerlink" title="13. Initramfs"></a>13. Initramfs</h3><pre><code class="line-numbers language-bash">mkinitcpio -P</code></pre><h3 id="14-Root-password"><a href="#14-Root-password" class="headerlink" title="14. Root password"></a>14. Root password</h3><pre><code class="line-numbers language-bash">passwd root</code></pre><h3 id="15-Network-configuration"><a href="#15-Network-configuration" class="headerlink" title="15. Network configuration"></a>15. <a href="https://wiki.archlinux.org/index.php/Network_configuration">Network configuration</a></h3><ul><li>Create the <strong>hostname</strong> file</li></ul><pre><code class="line-numbers language-bash">vim /etc/hostname</code></pre><p>Enter your hostname in this file.</p><ul><li>Add matching entries to <strong>hosts</strong></li></ul><pre><code class="line-numbers language-bash">vim /etc/hosts</code></pre><pre><code>127.0.0.1    localhost::1          localhost127.0.0.1    yourhostname.localdomain    yourhostname</code></pre><ul><li>Install some software to ensure you can connect the Internet after reboot system.</li></ul><pre><code class="line-numbers language-bash">pacman -S iw wpa_supplicant dialog networkmanager</code></pre><p><a href="#nm">Detailed configuration</a> </p><h3 id="16-Microcode"><a href="#16-Microcode" class="headerlink" title="16. Microcode"></a>16. <a href="https://wiki.archlinux.org/index.php/Microcode">Microcode</a></h3><p>My computer is <code>Intel</code> processors.</p><pre><code class="line-numbers language-bash">pacman -S intel-ucode</code></pre><h3 id="17-Boot-loader"><a href="#17-Boot-loader" class="headerlink" title="17. Boot loader"></a>17. <a href="https://wiki.archlinux.org/index.php/Arch_boot_process#Boot_loader">Boot loader</a></h3><p><a href="https://wiki.archlinux.org/index.php/GRUB"><strong>GRUB</strong></a> </p><pre><code class="line-numbers language-bash">pacman -S grub efibootmgrgrub-install --target=x86_64-efi --efi-directory=/boot/EFI -bootloader-id=Archlinuxgrub-mkconfig -o /boot/grub/grub.cfg</code></pre><p>If you can see some <code>img</code> file generated, it means the grub boot loader file are successful creatted.</p><h3 id="18-Reboot"><a href="#18-Reboot" class="headerlink" title="18. Reboot"></a>18. Reboot</h3><pre><code class="line-numbers language-bash">exitumount -R /mntreboot</code></pre><p>Use <code>uname -a</code> to view the Version of Arch linux.</p><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/Arch-Linux/5.png" alt="Arch_linux Version"> </p><h2 id="My-config-recommendations"><a href="#My-config-recommendations" class="headerlink" title="My config recommendations"></a>My config recommendations</h2><h3 id="1-Add-users"><a href="#1-Add-users" class="headerlink" title="1. Add users"></a>1. Add users</h3><pre><code class="line-numbers language-bash">useradd -s -G wheel -s /bin/bash username</code></pre><p>To allow user to gain full root privileges when he precdeds a command with <code>sudo</code> , add the following line to <code>/etc/sudoers</code> .</p><pre><code class="line-numbers language-bash">USER_NAME ALL=(ALL) ALL</code></pre><p><code>su username</code> to switch users.</p><h3 id="2-NetworkManager"><a href="#2-NetworkManager" class="headerlink" title="2. NetworkManager "></a>2. <a id = "nm"><a href="https://wiki.archlinux.org/index.php/NetworkManager">NetworkManager</a> </a></h3><p>NetworkManager(package <code>networkmanager</code> ) contains a daemon, a command line interface( <code>nmcli</code> ) and a curses-based interface( <code>nmtui</code> ). After installation, you should <strong>enable the daemon</strong>.</p><pre><code class="line-numbers language-bash">systemctl enable NetworkManager.servicesystemctl start NetworkManager.service</code></pre><p>Use <code>ip link</code> to view the network interface.</p><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/Arch-Linux/6.png" alt="Network interface"> </p><p><strong>Usage</strong></p><ul><li>List nearby wifi networks</li></ul><pre><code class="line-numbers language-bash">nmcli device wifi list</code></pre><ul><li>Connect to a wifi network</li></ul><pre><code class="line-numbers language-bash">nmcli device wifi connect SSID password password</code></pre><ul><li>Disconnect an interface</li></ul><pre><code class="line-numbers language-bash">nmcli device disconnect ifname eth0</code></pre><ul><li>See a list of network devices and wheir state</li></ul><pre><code class="line-numbers language-bash">nmcli device</code></pre><ul><li>Turn off wifi</li></ul><pre><code class="line-numbers language-bash">nmcli radio wifi off</code></pre><p><code>nm-applet</code> for a system tray applet</p><pre><code class="line-numbers language-bash">sudo pacman -S network-manager-applet</code></pre><ul><li>Add <code>exec --no-startup-id nm-applet</code> to <code>~/.config/i3/config</code> fot autostart <code>nm-applet</code> .</li></ul><h3 id="3-Xorg-display-server"><a href="#3-Xorg-display-server" class="headerlink" title="3. Xorg display server"></a>3. <a href="https://wiki.archlinux.org/index.php/Xorg">Xorg</a> display server</h3><ul><li>Installation</li></ul><pre><code class="line-numbers language-bash">sudo pacman -S xorg xorg-server xorg-apps</code></pre><ul><li><p>Driver installation</p><ol><li>First, identify your card:</li></ol><pre><code class="line-numbers language-bash">lspci | grep -e VGA -e 3D</code></pre><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/Arch-Linux/7.png" alt="card"> </p><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/Arch-Linux/8.png"> </p><ol start="2"><li>Install an appropriate deiver</li></ol><pre><code class="line-numbers language-bash">pacman -Ss xf86-video</code></pre><p><strong>Note</strong> : For NVIDIA Optimus enabled laptop which uses an integrated video card combined with a dedicated GPU, You  <strong>can not</strong> just install <code>xf86-video-intel</code> &amp; <code>nvidia</code> , it will get a blcak screen. See <a href="https://wiki.archlinux.org/index.php/NVIDIA_Optimus">NVIDIA Optimus</a> to get more informations. </p><p>I just install <code>xf86-video-vesa</code> . </p><pre><code class="line-numbers language-bash">pacman -S xf86-video-vesa</code></pre><p><a href="https://wiki.archlinux.org/index.php/Xorg#Driver_installation">Xorg: Driver_installtion</a> </p></li><li><p>Use <a href="https://wiki.archlinux.org/index.php/Xinit">xinit</a> to start Xorg display server.</p></li></ul><pre><code class="line-numbers language-bash">sudo pacman -S xorg-xinit</code></pre><ul><li>Create <code>.xinitrc</code> file(in common users)</li></ul><pre><code class="line-numbers language-bash">sudo cp /etc/X11/xinit/xinitrc ~/.xinitrc</code></pre><ul><li>Tap-to-click</li></ul><pre><code class="line-numbers language-bash">sudo vim /etc/X11/xorg.conf.d/30-touchpad.conf</code></pre><p>Add the following lines to it.</p><pre><code>Section &quot;InputClass&quot;  Identifier &quot;touchpad&quot;  Driver &quot;libinput&quot;  MatchIsTouchpad &quot;on&quot;  Option &quot;Tapping&quot; &quot;on&quot;EndSection</code></pre><ul><li>Install Windows Manager (i3)</li></ul><pre><code class="line-numbers language-bash">sudo pacman -S i3</code></pre><p>It include <code>i3-gaps</code> , <code>i3wm</code> , <code>i3blocks</code> , <code>i3lock</code> , <code>i3status</code></p><ul><li>Use i3</li></ul><p>Add <code>exec i3</code> to the end of <code>~.xinitrc</code> .</p><ul><li>Start Xorg server.</li></ul><pre><code class="line-numbers language-bash">startx</code></pre><ul><li>Autostart X at login</li></ul><p>I’m a <a href="https://fishshell.com/">fish</a> user, so i just need add the following to the bottom of my <code>~/.config/fish/config.fish</code> .</p><pre><code class="line-numbers language-bash"># Start X at loginif status is-login    if test -z &quot;$DISPLAY&quot; -a $XDG_VTNR = 1        exec startx -- -keeptty    endend</code></pre><p>Other shell user (like <strong>bash</strong> , <strong>zsh</strong> ), Please visit <a href="https://wiki.archlinux.org/index.php/Xinit#Autostart_X_at_login">here</a> </p><h3 id="4-i3wm"><a href="#4-i3wm" class="headerlink" title="4. i3wm"></a>4. i3wm</h3><p><a href="https://i3wm.org/">i3wm</a>  ,   <a href="https://wiki.archlinux.org/index.php/I3">i3-ArchWiki</a> </p><p><a href="https://github.com/liuyaanng/Arch_linux#i3-and-i3status">My i3 config</a> </p><h3 id="5-Some-useful-software"><a href="#5-Some-useful-software" class="headerlink" title="5. Some useful software"></a>5. Some useful software</h3><ul><li>yaourt</li></ul><p>Add the source to <code>/etc/pacman.conf</code></p><pre><code>[archlinuxcn]#The Chinese Arch Linux communities packages.SigLevel = Optional TrustAllServer = http://mirrors.tuna.tsinghua.edu.cn/archlinuxcn/$arch#Server   = http://repo.archlinuxcn.org/$arch#Server   = http://repo.archlinux.fr/$arch</code></pre><p>Synchronized communities</p><pre><code class="line-numbers language-bash">sudo pacman -Syu</code></pre><p>Insatll yaourt </p><pre><code class="line-numbers language-bash">sudo pacman -S yaourt</code></pre><ul><li><a href="https://godliuyang.wang/2019/08/24/manjaro-i3wm-huan-jing-pei-zhi-pian/#toc-heading-13">Software i often use</a></li></ul><h3 id="6-Fonts"><a href="#6-Fonts" class="headerlink" title="6. Fonts"></a>6. Fonts</h3><p><a href="https://wiki.archlinux.org/index.php/Fonts">Fonts-ArchWiki</a> , <a href="https://github.com/ryanoasis/nerd-fonts">Nerd-fonts</a> , <a href="https://unicode-table.com/en/">Unicode-table</a>  </p><table><thead><tr><th align="center">adobe-source-code-pro</th><th align="center">adobe-source-han-serif-cn-fonts</th><th align="center">adobe-source-han-serif-tw-fonts</th></tr></thead><tbody><tr><td align="center">ttf-symbola</td><td align="center">nerd-fonts-complete</td><td align="center">nerd-fonts-dejavu-complete</td></tr><tr><td align="center">font-awesome</td><td align="center">noto-fonts-emoji</td><td align="center"></td></tr></tbody></table><p><code>fc-list</code> to show the fonts you have installed.</p><h3 id="7-Volume"><a href="#7-Volume" class="headerlink" title="7. Volume"></a>7. Volume</h3><ul><li><p>ALSA is a set of built-in GNU/Linux modules. Therefore, manual insatllation is not necessary.</p></li><li><p>Install <strong>pulseaudio</strong></p></li></ul><pre><code class="line-numbers language-bash">sudo pacman -S pulseaudio</code></pre><ul><li>Install <strong>alsa-utils</strong></li></ul><pre><code class="line-numbers language-bash">sudo pacman -S alsa-utils</code></pre><p>Use <code>alsamixer</code> to manage the system volume</p><ul><li>VoulmeIcon</li></ul><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/Arch-Linux/9.png" alt="VolumeIcon"> </p><p>If you want a System volume tray, you can try <strong>volumeicon</strong></p><ol><li><p>Install volumeicon</p><pre><code class="line-numbers language-bash">sudo pacman -S volumeicon</code></pre></li><li><p>Add <code>volumeicon</code> file in <code>~/.config/volumeicon</code>  , and add the following lines to it.</p><pre><code class="line-numbers language-bash">[Alsa]card=default[Notification]show_notification=truenotification_type=1[StatusIcon]stepsize=5onclick=xterm -e &#39;alsamixer&#39;theme=White Gnomeuse_panel_specific_icons=truelmb_slider=truemmb_mute=trueuse_horizontal_slider=falseshow_sound_level=trueuse_transparent_bac&lt;++&gt;kground=true[Hotkeys]up_enabled=truedown_enabled=truemute_enabled=trueup=XF86AudioRaiseVolumedown=XF86AudioLowerVolumemute=XF86AudioMute</code></pre></li><li><p>Create <code>pulseaudio-ctl.desktop</code> in <code>~/.config/autostart</code> , and add the following lines to it.</p><pre><code class="line-numbers language-bash">[Desktop Entry]Encoding=UTF-8Type=ApplicationName=pulseaudio-ctlcomment=Set Volume to 70%Exec=pulseaudio-ctl-normalStartupNotify=trueTerminal=falseHidden=false</code></pre></li><li><p>Add <code>exec --no-startup-id volumeicon</code> to <code>~/.config/i3/config</code> .</p></li><li><p>I wrote two scripts to control the volume of the system with <code>alsamixer</code> and <code>dunst</code> , put them to <code>/usr/bin/</code> .</p><p><a href="https://github.com/liuyaanng/Arch_linux/blob/master/volume_up.sh">volume_up</a><br><a href="https://github.com/liuyaanng/Arch_linux/blob/master/volume_down.sh">volume_down</a> </p></li></ol><h3 id="8-Screen-brightness"><a href="#8-Screen-brightness" class="headerlink" title="8. Screen brightness"></a>8. Screen brightness</h3><p>A good advice for backlight management is <code>xorg-xbacklight</code> , but it seems not work on my computer. </p><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/Arch-Linux/12.png" alt="xbacklight -error"> </p><p>If you have the same problem, you can try the solution of Wiki, but it still can’t work on my computer. Sad! So i try another way to control the screen brightness.<br>The backlight can be controlled by the file <code>/sys/class/backlight/intel_backlight/brightness</code> ‘s value. So i wrote a script to control it. I named it <code>intel_brightness_control.sh</code></p><pre><code class="line-numbers language-bash">#!/bin/bashset -efile=&quot;/sys/class/backlight/intel_backlight/brightness&quot;current=$(cat &quot;$file&quot;)new=&quot;$current&quot;if [ &quot;$1&quot; = &quot;-inc&quot; ]then  new=$(( current + $2 ))  status=&quot;Up&quot;fiif [ &quot;$1&quot; = &quot;-dec&quot; ]then  if [ current &lt; 100 ]  then    new=&quot;50&quot;  else    new=$(( current - $2 ))  fi  status=&quot;Down&quot;fiecho &quot;$new&quot; | tee &quot;$file&quot;brightness=`light -G`notify-send &quot;Brightness $status($brightness%)&quot;</code></pre><p>Remember put it in your <code>/usr/bin/</code>.</p><p>Then do <code>sudo chmod 777 /sys/class/backlight/intel_backlight/brightness</code> . The last thing is adding the following lines to <code>.config/i3/config</code> .</p><pre><code class="line-numbers language-bash"># Screen brightness controlsbindsym XF86MonBrightnessUp exec &quot;intel_brightness_control.sh -inc 100&quot;bindsym XF86MonBrightnessDown exec &quot;intel_brightness_control.sh -dec 100&quot;</code></pre><h3 id="9-Bluetooth"><a href="#9-Bluetooth" class="headerlink" title="9. Bluetooth"></a>9. Bluetooth</h3><ul><li>Install <strong>bluez</strong> , <strong>bluez-utils</strong></li></ul><pre><code class="line-numbers language-bash">sudo pacman -S bluez bluez-utils</code></pre><ul><li>The generic Bluetooth driver is the <code>btusb</code> Kernel module. Use <code>lsmod</code> to check whether that module is loaded. </li></ul><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/Arch-Linux/11.png" alt="btusb module"><br>  If it’s not, do <code>modprobe btusb</code> to load the moudle.</p><ul><li>Start / Enable</li></ul><pre><code class="line-numbers language-bash">systemctl enable bluetooth.servicesystemctl start bluetooth.service</code></pre><ul><li>Auto power-on after boot</li></ul><p>Add the line <code>AutoEnable=true</code> in <code>/etc/bluetooth/main.conf</code> at the bottom in the <code>[Policy]</code> section.</p><ul><li>Discoverable on startup</li></ul><pre><code class="line-numbers language-bash">/etc/bluetooth/main.conf[General]DiscoverableTimeout = 0Discoverable=true</code></pre><ul><li>Install <strong>pulseaudio-bluetooth</strong> to use audio equipment like bluetooth headphones or speakers.</li></ul><p><a href="https://wiki.archlinux.org/index.php/Bluetooth_headset">Bluetooth headset</a> </p><pre><code class="line-numbers language-bash">sudo pacman -S pulseaudio-bluetooth</code></pre><ul><li>Install <a href="https://github.com/blueman-project/blueman">blueman</a> </li></ul><pre><code class="line-numbers language-bash">sudo pacman -S blueman</code></pre><ol><li><code>blueman-applet</code> to use.</li><li>add <code>exec --no-startup-id blueman-applet</code> to <code>~/.config/i3/config</code> to auto start <code>blueman-applet</code> .</li></ol><h3 id="10-Notify-Dunst"><a href="#10-Notify-Dunst" class="headerlink" title="10. Notify(Dunst)"></a>10. Notify(Dunst)</h3><pre><code class="line-numbers language-bash">sudo pacman -S libnotify dunst</code></pre><p>Create <code>org.freedesktop.Notifications.service</code> in <code>/usr/share/dbus-1/services/</code> folder. Add the following lines.</p><pre><code>[D-BUS Service]Name.org.freedesktop.NotificationsExec=/usr/local/bin/dunst</code></pre><p>An example configuration file is included at <code>/usr/local/share/dunst/dunstrc</code> . Copy this file to <code>~/.config/dunst/dunstrc</code> and edit it accordingly.</p><p><a href="https://github.com/liuyaanng/Arch_linux/tree/master/dunst">My Dunstrc</a> </p><p>Use <code>notify-send &quot;Hello, world!&quot; </code> to test.</p><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/Arch-Linux/10.png" alt="Dunst"> </p><h3 id="11-Shutdown-Reboot-LockScreen"><a href="#11-Shutdown-Reboot-LockScreen" class="headerlink" title="11. Shutdown Reboot LockScreen"></a>11. Shutdown Reboot LockScreen</h3><ul><li>Create a script named <code>i3exit</code> . Make sure you have <code>polkit</code> installed. </li></ul><pre><code class="line-numbers language-bash">#!/bin/shlock() &#123;    i3lock&#125;case &quot;$1&quot; in    lock)        blurlock        ;;    logout)        i3-msg exit        ;;    suspend)        blurlock &amp;&amp; systemctl suspend        ;;    hibernate)        blurlock &amp;&amp; systemctl hibernate        ;;    reboot)        systemctl reboot        ;;    shutdown)        systemctl poweroff        ;;    *)        echo &quot;Usage: $0 &#123;lock|logout|suspend|hibernate|reboot|shutdown&#125;&quot;        exit 2esacexit 0</code></pre><p>Do <code>chmod +x</code> and put it in <code>$PATH</code> ( <code>/usr/bin/</code> ) .</p><ul><li>Add the following lines to <code>.config/i3/config</code></li></ul><pre><code class="line-numbers language-bash">set $mode_system System (l) lock, (e) logout, (s) suspend, (h) hibernate, (r) reboot, (Shift+s) shutdownmode &quot;$mode_system&quot; &#123;    bindsym l exec --no-startup-id i3exit lock, mode &quot;default&quot;    bindsym e exec --no-startup-id i3exit logout, mode &quot;default&quot;    bindsym s exec --no-startup-id i3exit suspend, mode &quot;default&quot;    bindsym h exec --no-startup-id i3exit hibernate, mode &quot;default&quot;    bindsym r exec --no-startup-id i3exit reboot, mode &quot;default&quot;    bindsym Shift+s exec --no-startup-id i3exit shutdown, mode &quot;default&quot;      # back to normal: Enter or Escape    bindsym Return mode &quot;default&quot;    bindsym Escape mode &quot;default&quot;&#125;bindsym $mod+Pause mode &quot;$mode_system&quot;</code></pre><div><h1>推荐文章<span style="font-size:0.45em; color:gray"></span></h1><ul><li><a href="https://godliuyang.wang/2020/09/18/mo-gai-hexo-bo-ke/">魔改hexo博客</a></li><li><a href="https://godliuyang.wang/2019/08/24/manjaro-i3wm-huan-jing-pei-zhi-pian/">Manjaro i3wm 高效率环境配置篇(持续更新)</a></li></ul></div>]]></content>
      
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> i3wm </tag>
            
            <tag> Arch </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Bilibili-Evolved</title>
      <link href="/2019/09/21/bilibili-evolved/"/>
      <url>/2019/09/21/bilibili-evolved/</url>
      
        <content type="html"><![CDATA[<h2 id="Bilibili-Evolved"><a href="#Bilibili-Evolved" class="headerlink" title="Bilibili-Evolved"></a>Bilibili-Evolved</h2><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/Bilibili-Evolved/1.png"><br><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/Bilibili-Evolved/2.png"><br><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/Bilibili-Evolved/3.png"><br><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/Bilibili-Evolved/4.png"></p><h3 id="1-Install"><a href="#1-Install" class="headerlink" title="1. Install"></a>1. Install</h3><ul><li><p>You should install <a href="https://www.tampermonkey.net/">Tampermonkey</a> first.</p></li><li><p><a href="https://greasyfork.org/en/scripts/373563-bilibili-evolved">Bilibili-Evolved</a></p></li></ul><p>Please access <a href="https://github.com/the1812/Bilibili-Evolved">GitHub</a> to view how to use it.</p><h3 id="2-Download-videos"><a href="#2-Download-videos" class="headerlink" title="2. Download videos"></a>2. Download videos</h3><h4 id="2-1-Download-single-video"><a href="#2-1-Download-single-video" class="headerlink" title="2.1 Download single video."></a>2.1 Download single video.</h4><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/Bilibili-Evolved/5.png"><br><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/Bilibili-Evolved/6.png"></p><h4 id="2-2-Batch-export-with-aria2"><a href="#2-2-Batch-export-with-aria2" class="headerlink" title="2.2 Batch export(with aria2)."></a>2.2 Batch export(with aria2).</h4><ul><li>Install aria2.</li></ul><pre><code class="line-numbers language-bash">sudo pacman -S aria2</code></pre><ul><li>export aria2(a txt file)</li></ul><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/Bilibili-Evolved/7.png"></p><ul><li>Download videos in current directory.</li></ul><pre><code class="line-numbers language-bash">aria2c -i Download.txt</code></pre><h3 id="3-Convert-video-files"><a href="#3-Convert-video-files" class="headerlink" title="3. Convert video files."></a>3. Convert video files.</h3><p>The default video files format is <code>flv</code>.<br>I recommend using <a href="http://ffmpeg.org/">ffmpeg</a> to convert video files format on Linux.</p><pre><code class="line-numbers language-bash">ffmpeg -i input.flv output.mp4</code></pre>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Bilibili.com </tag>
            
            <tag> Script </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git &amp; Github</title>
      <link href="/2019/09/18/git-github/"/>
      <url>/2019/09/18/git-github/</url>
      
        <content type="html"><![CDATA[<h3 id="1-When-i-download-files-from-GitHub-Failed-to-connect-to-127-0-0-1-port-1080-Connection-refused"><a href="#1-When-i-download-files-from-GitHub-Failed-to-connect-to-127-0-0-1-port-1080-Connection-refused" class="headerlink" title="1. When i download files from GitHub, Failed to connect to 127.0.0.1 port 1080: Connection refused"></a>1. When i download files from GitHub, <code>Failed to connect to 127.0.0.1 port 1080: Connection refused</code></h3><ol><li>Find wheather you are using proxy server or not.</li></ol><pre><code class="line-numbers language-bash">git config --global http.proxy</code></pre><ol start="2"><li>Cancel the proxy server.</li></ol><pre><code class="line-numbers language-bash">git config --global --unset http.proxy</code></pre><h3 id="2-Clone-with-SSH-Github-guide"><a href="#2-Clone-with-SSH-Github-guide" class="headerlink" title="2. Clone with SSH (Github guide)"></a>2. Clone with SSH (<a href="https://help.github.com/en/github/authenticating-to-github/connecting-to-github-with-ssh">Github guide</a>)</h3><ul><li>Install Openssh</li></ul><pre><code class="line-numbers language-bash">sudo pacman -S openssh</code></pre><ul><li>Generating a new SSH key</li></ul><pre><code class="line-numbers language-bash">ssh-keygen</code></pre><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/Git-Github/1.png"> </p><pre><code class="line-numbers language-bash">tree .ssh</code></pre><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/Git-Github/2.png"> </p><ul><li>Copy the SSH key to your clipboard</li></ul><pre><code class="line-numbers language-bash">cat .ssh/id_rsa.pub</code></pre><ul><li>In the upper-right corner of any page, click your profile photo, then click <strong>Settings</strong></li></ul><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/Git-Github/3.png"></p><ul><li><p>In the user settings sidebar, click <strong>SSH and GPG keys</strong></p></li><li><p>Click <strong>New SSH key</strong> or <strong>Add SSH key</strong>.</p></li><li><p>In the “Title” field, add a descriptive label for the new key. For example, if you’re using arch linux, you might call this key “Arch linux”</p></li><li><p>Paste your key into the “Key” field.</p></li></ul><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/Git-Github/4.png"> </p><ul><li>If prompted, confirm your GitHub password.</li></ul><h3 id="3-Mandatory-update-of-local-repository"><a href="#3-Mandatory-update-of-local-repository" class="headerlink" title="3.Mandatory update of local repository"></a>3.Mandatory update of local repository</h3><pre><code class="line-numbers language-bash">git fetch --all &amp;&amp;  git reset --hard origin/master &amp;&amp; git pull</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> Git </tag>
            
            <tag> Github </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Anaconda</title>
      <link href="/2019/09/18/anaconda/"/>
      <url>/2019/09/18/anaconda/</url>
      
        <content type="html"><![CDATA[<h2 id="Install-Guide"><a href="#Install-Guide" class="headerlink" title="Install Guide"></a>Install Guide</h2><p>You probably need proxy: <a href="https://godliuyang.wang/2020/02/04/about-proxy/">About Proxy</a> </p><h3 id="1-Download-Anaconda"><a href="#1-Download-Anaconda" class="headerlink" title="1. Download Anaconda"></a>1. Download <code>Anaconda</code></h3><p>Click here to download <a href="https://www.anaconda.com/distribution/">Anaconda</a></p><h3 id="2-Install-Anaconda"><a href="#2-Install-Anaconda" class="headerlink" title="2. Install Anaconda"></a>2. Install <code>Anaconda</code></h3><pre><code class="line-numbers language-bash">bash ~/Downloads/Anaconda3-2019.07-Linux-x86_64.sh</code></pre><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/Anaconda/3.png"></p><p>Press ENTER</p><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/Anaconda/4.png"></p><p>input yes </p><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/Anaconda/5.png"></p><p>Press ENTER<br>A few minutes later…….</p><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/Anaconda/6.png"></p><p>input yes</p><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/Anaconda/7.png"></p><p>successful installation.</p><p>You can use <code>conda -V</code> to check the version of anaconda.</p><h3 id="3-Bash-user"><a href="#3-Bash-user" class="headerlink" title="3. Bash user"></a>3. Bash user</h3><pre><code class="line-numbers language-bash">vim ~/.bashrc</code></pre><p>add the following line to your ~/.bashrc.</p><pre><code class="line-numbers language-bash">export PATH=&quot;/home/xupp/anaconda3/bin:$PATH&quot;</code></pre><p>Reboot your terminal.</p><h3 id="4-Fish-user"><a href="#4-Fish-user" class="headerlink" title="4. Fish user"></a>4. Fish user</h3><p>If your shell is <strong>fish</strong>, you probably need to configure your environment variable.</p><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/Anaconda/8.png"></p><p>I use <code>set</code> command to do this.</p><pre><code class="line-numbers language-bash">set -xg</code></pre><p>Prints all global, exported variables.</p><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/Anaconda/1.png"></p><p>I find the user name of anaconda path in PATH is wrong.<br>I don’t know why it is, but i know i should correct it.</p><pre><code class="line-numbers language-bash">set PATH[1] /home/kevin/anaconda3/bin</code></pre><p>it works.</p><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/Anaconda/9.png"></p><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/Anaconda/10.png"></p><h2 id="conda"><a href="#conda" class="headerlink" title="conda"></a>conda</h2><h3 id="1-Create-Python-environment"><a href="#1-Create-Python-environment" class="headerlink" title="1. Create Python environment"></a>1. Create Python environment</h3><pre><code class="line-numbers language-bash">conda create --name python37 python=3.7</code></pre><h3 id="2-Check-Python-Environment-you-have-created"><a href="#2-Check-Python-Environment-you-have-created" class="headerlink" title="2. Check Python Environment you have created."></a>2. Check Python Environment you have created.</h3><pre><code class="line-numbers language-bash">conda info --envs</code></pre><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/Anaconda/11.png"> </p><p>Where * indicates the current Python environment</p><h3 id="3-Modify-Python-environment"><a href="#3-Modify-Python-environment" class="headerlink" title="3. Modify Python environment"></a>3. Modify Python environment</h3><pre><code class="line-numbers language-bash">source activate python37</code></pre><p>and modify default Python environment</p><pre><code class="line-numbers language-bash">source deactivate</code></pre><h3 id="4-Delate-Python-environment"><a href="#4-Delate-Python-environment" class="headerlink" title="4. Delate Python environment"></a>4. Delate Python environment</h3><pre><code class="line-numbers language-bash">conda remove --name python37 --all</code></pre><div><h1>推荐文章<span style="font-size:0.45em; color:gray"></span></h1><ul><li><a href="https://godliuyang.wang/2020/03/17/pandas-ji-chu/">Pandas 基础</a></li><li><a href="https://godliuyang.wang/2020/03/14/numpy-ji-chu/">Numpy 基础</a></li></ul></div>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Anaconda3 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Manjaro i3wm 高效率环境配置篇(持续更新)</title>
      <link href="/2019/08/24/manjaro-i3wm-huan-jing-pei-zhi-pian/"/>
      <url>/2019/08/24/manjaro-i3wm-huan-jing-pei-zhi-pian/</url>
      
        <content type="html"><![CDATA[<p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/blog_source@master/blog_images/Manjaro-i3wm-%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E7%AF%87/4.png"><br>Manjaro是一款基于Arch Linux、对用户友好、全球排名第1的Linux发行版<br>使用它是因为 AUR软件仓库有着世界上最齐全的Linux软件，万物皆可 pacman ,arch的wiki绝对是我见过的最详细的linux发行版的”说明书”, 在这里基本能解决我所有的问题, 另，作为基于Arch的发行版，每日一 <code>sudo pacman -Syu</code>简直不要太爽啊！<br>有时间一定要尝试一下 原生Arch(有生之年系列，趁还折腾的动)</p><h2 id="1-系统安装"><a href="#1-系统安装" class="headerlink" title="1. 系统安装"></a>1. 系统安装</h2><h3 id="1-1-ISO文件下载"><a href="#1-1-ISO文件下载" class="headerlink" title="1.1 ISO文件下载"></a>1.1 ISO文件下载</h3><p><a href="https://www.manjaro.org/">Manjaro官网</a></p><p>Manjaro i3属于社区版本<br><a href="https://osdn.net/projects/manjaro-community/storage/i3/18.0.4/manjaro-i3-18.0.4-stable-x86_64.iso/">Download manjaro-i3-18.0.4-stable-x86_64.iso</a></p><h3 id="1-2-U盘启动盘制作"><a href="#1-2-U盘启动盘制作" class="headerlink" title="1.2 U盘启动盘制作"></a>1.2 U盘启动盘制作</h3><p>首先准备一个容量大于4G的U盘，在制作启动盘之前请先把里面的资料转存到别处，因为此项操作会格式化U盘且不可恢复。<br>刻录工具有很多，</p><ul><li><a href="http://cn.ezbsystems.com/dl2.php?file=uiso9_cn.exe">UltralISO</a></li><li><a href="http://cdimage.deepin.com/applications/deepin-boot-maker/windows/deepin-boot-maker.exe">深度启动盘制作工具</a> 深度科技，很简洁的一个工具</li><li><a href="https://github.com/pbatard/rufus/releases/download/v3.6/rufus-3.6.exe">Rufus</a></li></ul><p>按照软件的操作步骤制作启动盘<br>注：若遇到启动盘系统安装的过程中遇到启动盘不可用则使用 <strong>Rufus</strong> 使用DD镜像模式制作<br><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/blog_source@master/blog_images/Manjaro-i3wm-%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E7%AF%87/1.png"></p><h3 id="1-3-系统安装"><a href="#1-3-系统安装" class="headerlink" title="1.3 系统安装"></a>1.3 系统安装</h3><p>安装过程很简单，参考下面这篇博客<br><a href="https://www.jianshu.com/p/e555a079f78a">Manjaro Linux i3 安装笔记</a></p><p>安装时语言选择  <strong>简体中文</strong>即可</p><h2 id="2-中文环境配置"><a href="#2-中文环境配置" class="headerlink" title="2. 中文环境配置"></a>2. 中文环境配置</h2><h3 id="2-1-更换Linux国内源"><a href="#2-1-更换Linux国内源" class="headerlink" title="2.1 更换Linux国内源"></a>2.1 更换Linux国内源</h3><p>Manjaro 默认的更新源在国外，没翻墙的宝宝无法更新，这里先换一下更新源</p><h4 id="2-1-1-更新镜像排名"><a href="#2-1-1-更新镜像排名" class="headerlink" title="2.1.1 更新镜像排名"></a>2.1.1 更新镜像排名</h4><pre><code class="line-numbers language-bash">sudo pacman-mirrors -i -c China -m rank //更新镜像排名</code></pre><p>之后自己选择几个镜像，推荐ustc和tuna的镜像源</p><pre><code class="line-numbers language-bash">sudo vim /etc/pacman.d/mirrorlist //查看选择的源sudo pacman -Syy  //更新数据源</code></pre><h4 id="2-1-2-设置Archlinuxcn源"><a href="#2-1-2-设置Archlinuxcn源" class="headerlink" title="2.1.2 设置Archlinuxcn源"></a>2.1.2 设置Archlinuxcn源</h4><pre><code class="line-numbers language-bash">sudo vim /etc/pacman.conf</code></pre><p>在文件末尾添加如下:</p><pre><code class="line-numbers language-bash">[archlinuxcn]SigLevel = Optional TrustedOnly#中科大源Server = https://mirrors.ustc.edu.cn/archlinuxcn/$arch#清华源Server = http://mirrors.tuna.tsinghua.edu.cn/archlinuxcn/$arch[antergos]SigLevel = TrustAllServer = https://mirrors.ustc.edu.cn/antergos/$repo/$archServer = http://mirrors.tuna.tsinghua.edu.cn/antergos/$repo/$arch[arch4edu]SigLevel = TrustAllServer = http://mirrors.tuna.tsinghua.edu.cn/arch4edu/$arch</code></pre><h4 id="2-1-3-导入GPG-key"><a href="#2-1-3-导入GPG-key" class="headerlink" title="2.1.3 导入GPG key"></a>2.1.3 导入GPG key</h4><pre><code class="line-numbers language-bash">sudo pacman -Syy //更新数据源sudo pacman -S archlinuxcn-keyring //安装导入GPG keysudo pacman -S antergos-keyrin</code></pre><h4 id="2-1-4-更新系统"><a href="#2-1-4-更新系统" class="headerlink" title="2.1.4 更新系统"></a>2.1.4 更新系统</h4><pre><code class="line-numbers language-bash">sudo pacman -Syu</code></pre><h3 id="2-2-解决桌面中文显示方块问题"><a href="#2-2-解决桌面中文显示方块问题" class="headerlink" title="2.2 解决桌面中文显示方块问题"></a>2.2 解决桌面中文显示方块问题</h3><p>若遇到桌面时间中文部分显示为 <strong>方块</strong>     </p><pre><code class="line-numbers language-bash">sudo vim /usr/share/conky/conky_maia</code></pre><p>将 <strong>conky.text</strong> 的前四行字体改为 <strong>anti</strong> 即可</p><h3 id="2-3-中文输入法"><a href="#2-3-中文输入法" class="headerlink" title="2.3 中文输入法"></a>2.3 中文输入法</h3><p>先安装fcitx</p><pre><code class="line-numbers language-bash">sudo pacman -S fcitx fcitx-im fcitx-configtool</code></pre><p>安装完fcitx之后，创建.xprofile文件</p><pre><code class="line-numbers language-bash">vim ~/.xprofile</code></pre><p>在里面添加如下内容:</p><pre><code class="line-numbers language-bash">#fcitxexport GTK_IM_MODULE=fcitx export QT_IM_MODULE=fcitx export XMODIFIERS=&quot;@im=fcitx&quot;</code></pre><p>之后安装中文输入法，搜狗拼音貌似对arch的支持不太好，所以我们选择谷歌拼音</p><pre><code class="line-numbers language-bash">sudo pacman -S fcitx-googlepinyin</code></pre><p>之后在终端运行 <code>$ fcitx</code> 在图形化界面的配置文件中配置输入法即可，配置快捷键<br><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/blog_source@master/blog_images/Manjaro-i3wm-%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E7%AF%87/2.png"><br><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/blog_source@master/blog_images/Manjaro-i3wm-%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E7%AF%87/3.png"></p><p>若中文输入法开机无法自启动，则执行如下操作</p><pre><code class="line-numbers language-bash">vim ~/.i3/config</code></pre><p>添加如下内容:</p><p><code>exec_always fcitx</code></p><h2 id="3-高效率软件以及配置"><a href="#3-高效率软件以及配置" class="headerlink" title="3. 高效率软件以及配置"></a>3. 高效率软件以及配置</h2><h3 id="3-1-软件"><a href="#3-1-软件" class="headerlink" title="3.1 软件"></a>3.1 软件</h3><h4 id="3-1-1-Alacritty"><a href="#3-1-1-Alacritty" class="headerlink" title="3.1.1 Alacritty"></a>3.1.1 Alacritty</h4><p>Alacritty 是一个免费的开源，快速，跨平台的终端仿真器，它使用GPU进行渲染，我使用tree命令跑了一下，确实速度快。kitty也是一款优秀的终端，不过它的配置稍麻烦，感兴趣的可以自行Google.</p><pre><code class="line-numbers language-bash">sudo pacman -S alacritty</code></pre><h4 id="3-1-2-fish-amp-oh-my-fish-omf"><a href="#3-1-2-fish-amp-oh-my-fish-omf" class="headerlink" title="3.1.2 fish &amp; oh-my-fish(omf)"></a>3.1.2 fish &amp; oh-my-fish(omf)</h4><ul><li>fish是一个智能且用户友好的命令行shell，适用于macOS，Linux和其他家族。fish包含语法突出显示，自动提示类型和精美的选项卡完成等功能，无需配置。<br>Terminal下默认的SHELL是bash, 但bash作为你经常使用的工具来说一点都不便捷,相信有很多人都用过另一款shell,它的名字是<strong>zsh</strong>，以及<strong>oh-my-zsh</strong>，我也用了一段时间的zsh，在用的过程中我发现它有时候运行贼慢，忍不了，而且配置虽说有oh-my-zsh管理，但终归不是傻瓜式工具，直到有一天我发现了 <strong>fish</strong>,官网号称是一个专为90后设计的shell。<br>安装很简单:</li></ul><pre><code class="line-numbers language-bash">sudo pacman -S fish</code></pre><p>终端输入<code>fish</code>即可进入</p><ul><li>查看已经安装的shell</li></ul><pre><code class="line-numbers language-bash">cat /etc/shells</code></pre><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/blog_source@master/blog_images/Manjaro-i3wm-%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E7%AF%87/12.png"></p><ul><li>修改默认shell</li></ul><p>看一下上一步输出的<code>fish</code>的位置，然后执行</p><pre><code class="line-numbers language-bash">chsh -s usr/bin/fish</code></pre><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/blog_source@master/blog_images/Manjaro-i3wm-%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E7%AF%87/13.png"><br>之后重启终端,shell就默认为fish了<br><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/blog_source@master/blog_images/Manjaro-i3wm-%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E7%AF%87/14.png"></p><p>配置文件的位置是<code>/home/kevin/.config/fish/functions/fish_prompt.fish</code>，可以在这里设置替换命令，提高效率，举个例子:<br><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/blog_source@master/blog_images/Manjaro-i3wm-%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E7%AF%87/18.png"></p><ul><li>oh-my-fish是一个 Fishshell 框架，允许你安装扩展或更改你的 shell 外观的软件包。它简单易用，快速可扩展。使用 omf，你可以根据你的想法，很容易地安装主题，丰富你的外观和安装插件来调整你的 Fish shell。    </li><li>安装omf<br>在fish shell里执行</li></ul><pre><code class="line-numbers language-bash">curl -L https://get.oh-my.fish | fish</code></pre><ul><li>列出所有的安装包</li></ul><pre><code class="line-numbers language-bash">omf list</code></pre><p>这条命令会列出一安装的主题和插件</p><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/blog_source@master/blog_images/Manjaro-i3wm-%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E7%AF%87/15.png"></p><ul><li>列出已安装主题</li></ul><pre><code class="line-numbers language-bash">omf theme</code></pre><ul><li>安装一个新主题<br>我现在用的主题叫 ays<pre><code class="line-numbers language-bash">omf install ays</code></pre></li><li>改变主题</li></ul><pre><code class="line-numbers language-bash">omf theme ays</code></pre><ul><li>卸载oh-my-fish</li></ul><pre><code class="line-numbers language-bash">omf destroy</code></pre><ul><li><p>Fish 运行Bash commands<br>例如 在fish 不能运行 time 命令，以下是解决办法    </p><ul><li><p>在 <code>fish/functions/</code> 目录下创建 <code>time.fish</code> 文件，在里面输入    </p><pre><code>function time --description &quot;alias time bash -c time&quot; bash -c &quot;time $argv&quot;;end</code></pre></li></ul></li></ul><p>其他具体功能见<a href="https://github.com/oh-my-fish/oh-my-fish">oh-my-fish</a></p><h4 id="3-1-3-Chromium"><a href="#3-1-3-Chromium" class="headerlink" title="3.1.3 Chromium"></a>3.1.3 Chromium</h4><p>安装方式:</p><pre><code class="line-numbers language-bash">sudo pacman -S chromium</code></pre><h4 id="3-1-4-nitrogen"><a href="#3-1-4-nitrogen" class="headerlink" title="3.1.4 nitrogen"></a>3.1.4 nitrogen</h4><p>一款可视化换壁纸的软件,当然<strong>feh</strong>也是一款优秀的壁纸切换软件，教程很多，这里不再说了</p><pre><code class="line-numbers language-bash">sudo pacman -S nitrogen</code></pre><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/blog_source@master/blog_images/Manjaro-i3wm-%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E7%AF%87/5.png"></p><h4 id="3-1-5-neofetch"><a href="#3-1-5-neofetch" class="headerlink" title="3.1.5 neofetch"></a>3.1.5 neofetch</h4><p>neofetch是一个个性化显示Linux系统信息的工具</p><pre><code class="line-numbers language-bash">sudo pacman -S neofetch</code></pre><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/blog_source@master/blog_images/Manjaro-i3wm-%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E7%AF%87/19.png"></p><h4 id="3-1-6-vim"><a href="#3-1-6-vim" class="headerlink" title="3.1.6 vim"></a>3.1.6 vim</h4><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/blog_source@master/blog_images/Manjaro-i3wm-%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E7%AF%87/6.png"></p><p>文本/代码编辑中最最最为优秀经典的上古神器,之后我会写一个调教Vim的教程</p><pre><code class="line-numbers language-bash">sudo pacman -S vim </code></pre><h4 id="3-1-7-albert"><a href="#3-1-7-albert" class="headerlink" title="3.1.7 albert"></a>3.1.7 albert</h4><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/blog_source@master/blog_images/Manjaro-i3wm-%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E7%AF%87/7.png"><br>一款软件/文件/搜索 启动器</p><pre><code class="line-numbers language-bash">sudo pacman -S albert</code></pre><p>第一次运行会提示你设置一下</p><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/blog_source@master/blog_images/Manjaro-i3wm-%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E7%AF%87/8.png"><br><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/blog_source@master/blog_images/Manjaro-i3wm-%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E7%AF%87/9.png"></p><h4 id="3-1-8-iease-music"><a href="#3-1-8-iease-music" class="headerlink" title="3.1.8 iease-music"></a>3.1.8 iease-music</h4><p>网易云音乐最漂亮的第三方客户端！</p><pre><code class="line-numbers language-bash">sudo pacman -S iease-music</code></pre><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/blog_source@master/blog_images/Manjaro-i3wm-%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E7%AF%87/10.png"></p><h4 id="3-1-9-deepin-screenshot"><a href="#3-1-9-deepin-screenshot" class="headerlink" title="3.1.9 deepin-screenshot"></a>3.1.9 deepin-screenshot</h4><p>深度截图</p><pre><code class="line-numbers language-bash">sudo pacman -S deepin-screenshot</code></pre><h4 id="3-1-10-shadowsocks-qt5"><a href="#3-1-10-shadowsocks-qt5" class="headerlink" title="3.1.10 shadowsocks-qt5"></a>3.1.10 shadowsocks-qt5</h4><pre><code class="line-numbers language-bash">sudo pacman -S shadowsocks-qt5</code></pre><h4 id="3-1-11-thefuck"><a href="#3-1-11-thefuck" class="headerlink" title="3.1.11 thefuck"></a>3.1.11 thefuck</h4><p>自从用了”Thefuck”,妈妈再也不用担心我敲错命令了。<br>有了它，万物皆可fffffffffuck!</p><pre><code class="line-numbers language-bash">sudo pacman -S thefuck</code></pre><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/blog_source@master/blog_images/Manjaro-i3wm-%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E7%AF%87/11.png"></p><h4 id="3-1-12-compton"><a href="#3-1-12-compton" class="headerlink" title="3.1.12 compton"></a>3.1.12 compton</h4><p>设置窗口半透明+毛玻璃效果</p><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/blog_source@master/blog_images/Manjaro-i3wm-%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E7%AF%87/16.png"></p><p>Manjaro i3 自带的有compton，不过这个只能做到半透明而没有毛玻璃效果，我使用的是<a href="https://github.com/tryone144/compton">Compton</a>,下面详细介绍一下安装过程</p><ol><li>卸载原有的compton</li></ol><pre><code class="line-numbers language-bash">sudo pacman -R compton</code></pre><p>若遇到依赖问题无法卸载，则</p><pre><code class="line-numbers language-bash">sudo pacman -Rc compton</code></pre><ol start="2"><li>clone仓库</li></ol><pre><code class="line-numbers language-bash">git clone git@github.com:liuyaanng/compton.git</code></pre><ol start="3"><li>安装</li></ol><p>具体内容参考<a href="https://github.com/liuyaanng/compton/blob/dual_kawase/README.md">README</a><br>安装前要确保下列依赖已经安装。<br>其实大部分都已经安装,只有个别没有，若下面安装不成功，则按提示把依赖装上即可，有问题也可以在issues上查看</p><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/blog_source@master/blog_images/Manjaro-i3wm-%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E7%AF%87/17.png"></p><pre><code class="line-numbers language-bash">cd compton# Make the main programmake# Make the man pagemake docs# Installmake install</code></pre><ol start="4"><li>配置</li></ol><p>配置信息在<a href="">.config</a></p><h4 id="3-1-13-deepin-file-manager"><a href="#3-1-13-deepin-file-manager" class="headerlink" title="3.1.13 deepin-file-manager"></a>3.1.13 deepin-file-manager</h4><p>默认的 <code>pcmanfm</code> 竟然没有搜索功能，这不能忍啊<br>我使用 <code>deepin-file-manager</code> 来代替默认的 <code>pcmanfm</code></p><pre><code class="line-numbers language-bash">sudo pacman -S deepin-file-manager</code></pre><p>在配置文件里</p><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/blog_source@master/blog_images/Manjaro-i3wm-%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E7%AF%87/20.png"></p><h3 id="3-2-i3的配置"><a href="#3-2-i3的配置" class="headerlink" title="3.2 i3的配置"></a>3.2 i3的配置</h3><p>i3的配置文件在 <code>~/.i3/config</code></p><p>里面的配置信息介绍的很详细,需要更详细的信息你可以阅读官方<a href="https://i3wm.org/docs/userguide.html">userguide</a></p><p> 首先在<code>Autoapplications</code>处添加自启动的应用</p><pre><code class="line-numbers language-bash">exec_always fcitxexec_always albert</code></pre><ul><li>把系统默认terminal换成<code>alacritty</code><br>在 <code>start a terminal</code>处将原来的代码注释掉，加上以下语句</li></ul><pre><code class="line-numbers language-bash">bindsym $mod+Return exec alacritty</code></pre><ul><li>设置软件启动快捷键</li></ul><p>在配置文件中添加</p><pre><code class="line-numbers language-bash">set $mod Mod4set $mod1 Mod1</code></pre><p>mod在这里设置的是键盘的<code>Super</code>键<br>mod1在这里设置的是<code>Alt</code>键</p><pre><code class="line-numbers language-bash">bindsym $mod+c exec chromiumbindsym $mod+p exec nitrogenbindsym $mod1+m exec iease-musicbindsym $mod1+Shift+a exec deepin-screenshot</code></pre><ul><li>窗口之间的间距通过i3-gaps来设置，若没有安装，则</li></ul><pre><code class="line-numbers language-bash">sudo pacman -S i3-gaps</code></pre><p>在配置文件中加入</p><pre><code class="line-numbers language-bash">gaps inner 16gaps outer 0</code></pre><p>可以根据自己喜好调整数值</p><ul><li>xbacklight config</li></ul><p>install <code>xorg-xbacklight</code> first</p><pre><code class="line-numbers language-bash">sudo pacman -S xorg-xbacklight </code></pre><h2 id="杂项"><a href="#杂项" class="headerlink" title="杂项"></a>杂项</h2><h4 id="彻底解决蜂鸣问题"><a href="#彻底解决蜂鸣问题" class="headerlink" title="彻底解决蜂鸣问题"></a>彻底解决蜂鸣问题</h4><p>由于蜂鸣是由主板发出来的声音，故不能通过调节音量来消除此声音，要从源头上解决</p><ul><li>关闭终端下Tab键的蜂鸣提示</li></ul><pre><code class="line-numbers language-bash">sudo vim /etc/inputrc</code></pre><p>将 <code>set bell-style none</code> 前的注释去掉</p><ul><li>关闭vim中错误提示蜂鸣声</li></ul><pre><code class="line-numbers language-bash">vim .vim/vimrc</code></pre><p>在里面加入  <code>set vb t_vb= </code></p><div><h1>推荐文章<span style="font-size:0.45em; color:gray"></span></h1><ul><li><a href="https://godliuyang.wang/2020/09/18/mo-gai-hexo-bo-ke/">魔改hexo博客</a></li><li><a href="https://godliuyang.wang/2019/12/06/arch-linux-i3wm-xiang-xi-pei-zhi/">Arch Linux + i3wm详细配置篇</a></li></ul></div>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Manjaro </tag>
            
            <tag> linux </tag>
            
            <tag> i3wm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Face Recognition</title>
      <link href="/2019/08/10/face-recognition-with-opencv/"/>
      <url>/2019/08/10/face-recognition-with-opencv/</url>
      
        <content type="html"><![CDATA[<h1 id="Face-Recognition-with-OpenCV"><a href="#Face-Recognition-with-OpenCV" class="headerlink" title="Face Recognition with OpenCV"></a>Face Recognition with OpenCV</h1><h1 id="Preface"><a href="#Preface" class="headerlink" title="Preface"></a>Preface</h1><p>My Particular Environment:<br>Ubuntu16.04 + OpenCV3.3.0 + OpenCV_contrib3.3.0</p><h2 id="1-Image-Acquisition-and-Face-Database-Creation"><a href="#1-Image-Acquisition-and-Face-Database-Creation" class="headerlink" title="1. Image Acquisition and Face Database Creation"></a>1. Image Acquisition and Face Database Creation</h2><h3 id="1-1-Image-Acquisition"><a href="#1-1-Image-Acquisition" class="headerlink" title="1.1 Image Acquisition"></a>1.1 Image Acquisition</h3><h4 id="1-1-1-Steps-and-methods"><a href="#1-1-1-Steps-and-methods" class="headerlink" title="1.1.1 Steps and methods"></a>1.1.1 Steps and methods</h4><ol><li>Open the camera and capture images;</li><li>Loading the face classifier;</li><li>Start face detection, frame the face part and display;</li><li>Under the condition that the face is detected, take a picture with one button;</li><li>For the face part, resize and write the image file in the specified directory;</li></ol><h4 id="1-1-2-Code"><a href="#1-1-2-Code" class="headerlink" title="1.1.2 Code"></a>1.1.2 Code</h4><pre><code class="line-numbers language-cpp">#include &lt;opencv2/highgui/highgui.hpp&gt;#include &lt;opencv2/imgproc/imgproc.hpp&gt;#include &lt;opencv2/core/core.hpp&gt;#include &lt;opencv2/objdetect/objdetect.hpp&gt;#include &lt;stdio.h&gt;#include &lt;opencv2/face.hpp&gt;#include &lt;iostream&gt;#include &lt;fstream&gt;#include &lt;sstream&gt; using namespace cv;using namespace std;using namespace cv::face;#define CV_COLOR_GREEN cv::Scalar(0, 255, 0)int resize_save(Mat&amp; faceIn, char* path, int  faceseq);//Input: current image, the path of file, the name or faceseq of images.//Output: None//Function: resize the current image to (92, 112), which is same to the train data.int get_face(char* path);//Input: the path of file.//Output: None//Function: Use face_cascade to detect if there are faces in the window, and save the faces through function reszie_save.int resize_save(Mat&amp; faceIn, char* path, int  faceseq)&#123;  string strname;  Mat faceOut;  bool ret;  if(faceIn.empty())&#123;    printf(&quot;FaceIn is empty.\n&quot;);    return -1;  &#125;  if(faceIn.cols &gt; 100)&#123;    resize(faceIn, faceOut, Size(92, 112));    //Resize and Keep a match with the train database.    strname = format(&quot;%s/%d.jpg&quot;, path, faceseq); //mkdir    ret = imwrite(strname, faceOut); //save image. Note the file suffix.    if(ret == false)&#123;      printf(&quot;Image write failed!\n&quot;);      printf(&quot;Please check filename[%s] is legal!\n&quot;, strname.c_str());      return -1;    &#125;    imshow(strname, faceOut);  &#125;  waitKey(20);  return 0;&#125;int get_face(char* path)&#123;  CascadeClassifier face_cascade;  VideoCapture camera;  int ret;  Mat frame;  //camera frame  vector&lt;Rect&gt; objects; //The faces coordinates.  Mat img_gary; //Gradation pictures.  Mat faceImg;  int faceNum = 1; //  char key;  camera.open(0);  if(!camera.isOpened())&#123;    cout &lt;&lt; &quot;Open camera failed.&quot; &lt;&lt; endl;    return -1;  &#125;  cout &lt;&lt; &quot;Open camera succeed. &quot; &lt;&lt; endl;  //Load the face cascadeclassifier.  ret = face_cascade.load(&quot;haarcascade_frontalface_alt2.xml&quot;);  if(!ret)&#123;    cout &lt;&lt; &quot;Load xml failed.&quot; &lt;&lt; endl;    return -1;  &#125;  cout &lt;&lt; &quot;Load xml succeed.&quot; &lt;&lt; endl;  while(1)&#123;    camera &gt;&gt; frame;    if(frame.empty())&#123;      continue;    &#125;    cvtColor(frame, img_gary, COLOR_BGR2GRAY); //Transform frame as the gradation picture, note imshow is still the original frame.    equalizeHist(img_gary, img_gary); //Histogram equalization, which is helpful to improve the quality of pictures.    //Face detection    face_cascade.detectMultiScale(img_gary, objects, 1.1,3 , 0, Size(50,50));    for(size_t i = 0; i &lt; objects.size(); i++)&#123;      rectangle(frame, objects[i], CV_COLOR_GREEN);    &#125;    imshow(&quot;Camera&quot;, frame);    key = waitKey(1);    switch (key)&#123;      case &#39;p&#39;: //tap &#39;P&#39; to save.        if(objects.size() == 1)&#123;          faceImg = frame(objects[0]);          ret = resize_save(faceImg, path, faceNum);          if(ret == 0)&#123;            cout &lt;&lt; &quot;resize_save succeed.\n&quot; &lt;&lt; endl;            faceNum++;          &#125;        &#125;        break;      case 27:   //switch to ESC        cout &lt;&lt; &quot;Esc ...&quot; &lt;&lt; endl;        return 0;      default:        break;    &#125;  &#125;&#125;int main(int argc, char* argv[])&#123;  if(argc != 2)      &#123;        printf(&quot;usage: %s &lt;path&gt;\n&quot;, argv[0]);        return -1;      &#125;  get_face(argv[1]);  return 0;&#125;</code></pre><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/Face-Recognition-with-OpenCV/4.jpg"><br>Note:    </p><ol><li>After the compilation is successful, the execution executable file must provide parameters, which are the directories for storing the face image, and it must be an existing directory.(E.g: ./program_name Img/s41)    </li><li>Press the “P” button to take a photo and save the face. Press the “Esc” button to exit.</li></ol><h3 id="1-2-Face-Database-Creation"><a href="#1-2-Face-Database-Creation" class="headerlink" title="1.2 Face Database Creation"></a>1.2 Face Database Creation</h3><p>The official document provides a download of the face database, and i use the <a href="http://www.cl.cam.ac.uk/research/dtg/attarchive/facedatabase.html">AT&amp;T Facedatabase</a> to create my face database. I have updated this zip file to my github, you can download it from <a href="att_faces.zip">here</a> faster.<br>AT&amp;T Face Database is also known as the OCR face database, 40 people, 10 photos per person. The photos are token at different times, different lighting, different expressions(closed eyes, laughing or not laughing), different face details(with or without glasses). All images were captured on a dark , even background with a vertical face o the front(some with a slight rotation).<br>You can download the compressed package from the website, and first extract the att_faces folder. There are 40 folders under the folder, which named from “s1” to “s40”. Each folder has the same person’s photos with different expressions, and there are 10 face photos.<br>The format of these images is “.pgm”<br><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/Face-Recognition-with-OpenCV/1.png"><br><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/Face-Recognition-with-OpenCV/2.png"></p><p>Note:<br>If you want to add your own photos to the face database through the program, the number of added pictures must be no less than 2.</p><h2 id="2-Face-Recognition-Model-training"><a href="#2-Face-Recognition-Model-training" class="headerlink" title="2. Face Recognition Model training"></a>2. Face Recognition Model training</h2><h3 id="2-1-Create-a-label-file-CSV"><a href="#2-1-Create-a-label-file-CSV" class="headerlink" title="2.1 Create a label file CSV"></a>2.1 Create a label file CSV</h3><p>With the face database data, we need to read it in the program, here we need to use csv file to read the image data in the face database.<br>The format of a csv file: image path name + label, such as /Img/s1/image.jpg;1<br>Assume the face image path is: /Img/s1/01..jpg<br>And we give this face image a label “1”, this label represents the person’s name. One person’s face image label must be the same.<br>You can create a csv file manually and then enter the data one by one. But if you use python, you don’t have to do this tedious and boring work.<br>The following is a piece of code which can write data in the CSV file automatically.</p><pre><code class="line-numbers language-python">#!/usr/bin/env pythonimport sysimport os.path# This is a tiny script to help you creating a CSV file from a face# database with a similar hierarchie:##  #  #  |-- s1#  |   |-- 1.pgm#  |   |-- ...#  |   |-- 10.pgm#  |-- s2#  |   |-- 1.pgm#  |   |-- ...#  |   |-- 10.pgm#  ...#  |-- s40#  |   |-- 1.pgm#  |   |-- ...#  |   |-- 10.pgm#if __name__ == &quot;__main__&quot;:    if len(sys.argv) != 2:        print &quot;usage: create_csv &lt;base_path&gt;&quot;        sys.exit(1)    BASE_PATH=sys.argv[1]            SEPARATOR=&quot;;&quot;    # This is output csv file.    fh = open(&quot;../at.csv&quot;,&#39;w&#39;)    for dirname, dirnames, filenames in os.walk(BASE_PATH):        for subdirname in dirnames:            subject_path = os.path.join(dirname, subdirname)            for filename in os.listdir(subject_path):                abs_path = &quot;%s/%s&quot; % (subject_path, filename)                print(&quot;%s%s%s&quot; % (abs_path, SEPARATOR, subdirname[1:]))                fh.write(abs_path)                fh.write(SEPARATOR)                fh.write(subdirname[1:])                fh.write(&quot;\n&quot;)    fh.close()</code></pre><p>You should set the image path parameter (absolute path) when running.(E.g: <strong>python filename.py /home/kevin/OpenCV/face_rec/Img</strong> ) and you can get a CSV file like this:<br><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/Face-Recognition-with-OpenCV/5.png"><br>This CSV file is created.</p><h3 id="2-2-Model-training"><a href="#2-2-Model-training" class="headerlink" title="2.2 Model training"></a>2.2 Model training</h3><p>This is the official example of OpenCV: <a href="https://docs.opencv.org/3.2.0/da/d60/tutorial_face_main.html">Click here</a><br>They offer three models: Eigenfaces, Fisherfaces and Local Binary Patterns Histograms(LBPH)    </p><p>Then I will train my own face database based on these models on the first step.</p><pre><code class="line-numbers language-cpp">static Mat norm_0_255(InputArray _src)&#123;  Mat src = _src.getMat();  Mat dst; //Create and return a normalized image matrix:  switch(src.channels()) &#123;    case 1:        cv::normalize(_src, dst, 0, 255, NORM_MINMAX, CV_8UC1);        break;    case 3:        cv::normalize(_src, dst, 0, 255, NORM_MINMAX, CV_8UC3);        break;    default:        src.copyTo(dst);        break;  &#125;  return dst;&#125;//load CSV filestatic void read_csv(const string&amp; filename, vector&lt;Mat&gt;&amp; images, vector&lt;int&gt;&amp; labels, char separator = &#39;;&#39;)&#123;  std::ifstream file(filename.c_str(), ifstream::in);    if (!file) &#123;        string error_message = &quot;No valid input file was given, please check the given filename.&quot;;        CV_Error(Error::StsBadArg, error_message);    &#125;    string line, path, classlabel;    while (getline(file, line)) &#123;        stringstream liness(line);        getline(liness, path, separator);        getline(liness, classlabel);        if(!path.empty() &amp;&amp; !classlabel.empty()) &#123;            images.push_back(imread(path, 0));            labels.push_back(atoi(classlabel.c_str()));        &#125;    &#125;&#125;void train_model(const string&amp; fn_csv)&#123;  // 2 containers to store image data and corresponding labels    vector&lt;Mat&gt; images;    vector&lt;int&gt; labels;    // load data    try    &#123;        read_csv(fn_csv, images, labels);    &#125;    catch (cv::Exception&amp; e)    &#123;        cerr &lt;&lt; &quot;Error opening file \&quot;&quot; &lt;&lt; fn_csv &lt;&lt; &quot;\&quot;. Reason: &quot; &lt;&lt; e.msg &lt;&lt; endl;        exit(1);    &#125;    if (images.size() &lt;= 1) &#123;        string error_message = &quot;This demo needs at least 2 images to work. Please add more images to your data set!&quot;;        CV_Error(CV_StsError, error_message);    &#125;    Mat testSample = images[images.size() - 1];    int testLabel = labels[labels.size() - 1];    images.pop_back();    labels.pop_back();    // The following lines create a feature face model for face recognition.     // Train it with images and tags read from a CSV file.     // Here is a complete PCA transform     //If you only want to keep 10 principal components, use the following code     // cv::EigenFaceRecognizer::create(10);     // cv::FisherFaceRecognizer::create(10);     //     // If you also want to initialize with a confidence threshold, use the following statement:     // cv::EigenFaceRecognizer::create(10, 123.0);     //     // If you use all features and use a threshold, use the following statement:     // cv::EigenFaceRecognizer::create(0, 123.0);     // cv::FisherFaceRecognizer::create(0, 123.0);    Ptr&lt;BasicFaceRecognizer&gt; model0 = EigenFaceRecognizer::create();    model0-&gt;train(images, labels);    model0-&gt;write(&quot;MyFacePCAModel.xml&quot;);    Ptr&lt;BasicFaceRecognizer&gt; model1 = FisherFaceRecognizer::create();    model1-&gt;train(images, labels);    model1-&gt;write(&quot;MyFaceFisherModel.xml&quot;);     Ptr&lt;LBPHFaceRecognizer&gt; model2 = LBPHFaceRecognizer::create();    model2-&gt;train(images, labels);    model2-&gt;write(&quot;MyFaceLBPHModel.xml&quot;);    // The test image is predicted below, predictedLabel is the predicted label result    int predictedLabel0 = model0-&gt;predict(testSample);    int predictedLabel1 = model1-&gt;predict(testSample);    int predictedLabel2 = model2-&gt;predict(testSample);    // There is also a way to get the result and get the threshold:    //      int predictedLabel = -1;    //      double confidence = 0.0;    //      model-&gt;predict(testSample, predictedLabel, confidence);    string result_message0 = format(&quot;Predicted class = %d / Actual class = %d.&quot;, predictedLabel0, testLabel);    string result_message1 = format(&quot;Predicted class = %d / Actual class = %d.&quot;, predictedLabel1, testLabel);    string result_message2 = format(&quot;Predicted class = %d / Actual class = %d.&quot;, predictedLabel2, testLabel);    cout &lt;&lt; result_message0 &lt;&lt; endl;    cout &lt;&lt; result_message1 &lt;&lt; endl;    cout &lt;&lt; result_message2 &lt;&lt; endl;    waitKey(0);&#125;int main(int argc, char* argv[])&#123;  if(argc != 2)      &#123;        printf(&quot;usage: %s &lt;csv_file&gt;\n&quot;, argv[0]);        return -1;      &#125;  string fn_csv = string(argv[1]);  train_model(fn_csv);  return 0;&#125;</code></pre><p>At this point, we have completed the training of the face model. And we get three files:     </p><p><code>MyFaceFisherModel.xml、MyFaceLBPHModel.xml、MyFacePCAModel.xml</code></p><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/Face-Recognition-with-OpenCV/6.png"><br>Note:    </p><ol><li><p>Changes to the API of the OpenCV3.3 Face Recognition Module</p><p>a. Facerec.hpp before opencv3.3</p><pre><code class="line-numbers language-cpp">#ifndef __OPENCV_FACEREC_HPP__#define __OPENCV_FACEREC_HPP__#include &quot;opencv2/face.hpp&quot;#include &quot;opencv2/core.hpp&quot;namespace cv &#123; namespace face &#123;// base for two classesclass CV_EXPORTS_W BasicFaceRecognizer : public FaceRecognizer&#123;public:    /** @see setNumComponents */    CV_WRAP virtual int getNumComponents() const = 0;    // ----------- ...... -----------    CV_WRAP virtual cv::Mat getEigenValues() const = 0;    CV_WRAP virtual cv::Mat getEigenVectors() const = 0;    CV_WRAP virtual cv::Mat getMean() const = 0;&#125;;CV_EXPORTS_W Ptr&lt;BasicFaceRecognizer&gt; createEigenFaceRecognizer(int num_components = 0, double threshold = DBL_MAX);CV_EXPORTS_W Ptr&lt;BasicFaceRecognizer&gt; createFisherFaceRecognizer(int num_components = 0, double threshold = DBL_MAX);class CV_EXPORTS_W LBPHFaceRecognizer : public FaceRecognizer&#123;public:    /** @see setGridX */    CV_WRAP virtual int getGridX() const = 0;    /** @copybrief getGridX @see getGridX */    CV_WRAP virtual void setGridX(int val) = 0;    // ----------- ...... -----------    CV_WRAP virtual cv::Mat getLabels() const = 0;&#125;;CV_EXPORTS_W Ptr&lt;LBPHFaceRecognizer&gt; createLBPHFaceRecognizer(int radius=1, int neighbors=8, int grid_x=8, int grid_y=8, double threshold = DBL_MAX);&#125;&#125; //namespace cv::face#endif //__OPENCV_FACEREC_HPP__</code></pre><ul><li><p>Comment section of the ninth line: <code>// base for two classes</code>,  This shows that BasicFaceRecognizer is the base class of two classes: EigenFaceRecognizer and FisherFaceRecognizer. With LBPHFaceRecognizer is irrelevant. Even the new API is still the case.</p></li><li><p>Method of creating three face recognizers.</p><pre><code class="line-numbers language-cpp">Ptr&lt;BasicFaceRecognizer&gt; model =  createEigenFaceRecognizer();Ptr&lt;BasicFaceRecognizer&gt; model =  createFisherFaceRecognizer();Ptr&lt;LBPHFaceRecognizer&gt; model  =  createLBPHFaceRecognizer();</code></pre></li></ul><p>b. Facerec.hpp after opencv3.3</p></li></ol><pre><code class="line-numbers language-cpp">#ifndef __OPENCV_FACEREC_HPP__#define __OPENCV_FACEREC_HPP__#include &quot;opencv2/face.hpp&quot;#include &quot;opencv2/core.hpp&quot;namespace cv &#123; namespace face &#123;// base for two classesclass CV_EXPORTS_W BasicFaceRecognizer : public FaceRecognizer&#123;public:    /** @see setNumComponents */    CV_WRAP int getNumComponents() const;    // ----------- ...... -----------    CV_WRAP cv::Mat getEigenValues() const;    CV_WRAP cv::Mat getEigenVectors() const;    CV_WRAP cv::Mat getMean() const;    virtual void read(const FileNode&amp; fn);    virtual void write(FileStorage&amp; fs) const;    virtual bool empty() const;    using FaceRecognizer::read;    using FaceRecognizer::write;protected:    int _num_components;    double _threshold;    std::vector&lt;Mat&gt; _projections;    Mat _labels;    Mat _eigenvectors;    Mat _eigenvalues;    Mat _mean;&#125;;class CV_EXPORTS_W EigenFaceRecognizer : public BasicFaceRecognizer&#123;public:    CV_WRAP static Ptr&lt;EigenFaceRecognizer&gt; create(int num_components = 0, double threshold = DBL_MAX);&#125;;class CV_EXPORTS_W FisherFaceRecognizer : public BasicFaceRecognizer&#123;public:    CV_WRAP static Ptr&lt;FisherFaceRecognizer&gt; create(int num_components = 0, double threshold = DBL_MAX);&#125;;class CV_EXPORTS_W LBPHFaceRecognizer : public FaceRecognizer&#123;public:    /** @see setGridX */    CV_WRAP virtual int getGridX() const = 0;    // ----------- ...... -----------    CV_WRAP virtual cv::Mat getLabels() const = 0;    CV_WRAP static Ptr&lt;LBPHFaceRecognizer&gt; create(int radius=1, int neighbors=8, int grid_x=8, int grid_y=8, double threshold = DBL_MAX);&#125;;&#125;&#125; //namespace cv::face#endif //__OPENCV_FACEREC_HPP__</code></pre><ul><li>Both EigenFaceRecognizer and FisherFaceRecognizer are inherited from BasicFaceRecognizer. However, the LBFPHaceRecognizer, like the BasicFaceRecognizer, inherits from FaceRecognizer.    </li><li>Method of creating three face recognizer</li></ul><pre><code class="line-numbers language-cpp">Ptr&lt;EigenFaceRecognizer&gt; model  = EigenFaceRecognizer::create();Ptr&lt;FisherFaceRecognizer&gt; model = FisherFaceRecognizer::create();Ptr&lt;LBPHFaceRecognizer&gt; model   = LBPHFaceRecognizer::create();</code></pre><h2 id="3-Identify-faces-in-the-video-stream-camera"><a href="#3-Identify-faces-in-the-video-stream-camera" class="headerlink" title="3. Identify faces in the video stream (camera)"></a>3. Identify faces in the video stream (camera)</h2><h3 id="3-1-Ready-to-work"><a href="#3-1-Ready-to-work" class="headerlink" title="3.1 Ready to work."></a>3.1 Ready to work.</h3><h4 id="3-1-1-Copy-the-training-file-obtained-in-the-second-step-to-the-current-folder"><a href="#3-1-1-Copy-the-training-file-obtained-in-the-second-step-to-the-current-folder" class="headerlink" title="3.1.1 Copy the training file obtained in the second step to the current folder."></a>3.1.1 Copy the training file obtained in the second step to the current folder.</h4><h4 id="3-1-2-The-process-or-method-of-Face-Recognition"><a href="#3-1-2-The-process-or-method-of-Face-Recognition" class="headerlink" title="3.1.2 The process or method of Face Recognition"></a>3.1.2 The process or method of Face Recognition</h4><p>This step has a similar part to the creation of a face recognition database.</p><ul><li>Open the camera</li><li>Loading face detector, face model</li><li>Scale the image (for efficiency)</li><li>Face recognition (compare to face model)</li><li>Label faces with rectangular wireframes and add text labels</li></ul><h4 id="3-2-Code"><a href="#3-2-Code" class="headerlink" title="3.2 Code"></a>3.2 Code</h4><pre><code class="line-numbers language-cpp">#include &lt;opencv2/opencv.hpp&gt;  #include &quot;opencv2/core.hpp&quot;#include &quot;opencv2/face.hpp&quot;#include &quot;opencv2/highgui.hpp&quot;#include &quot;opencv2/imgproc.hpp&quot;#include &lt;iostream&gt;#include &lt;fstream&gt;#include &lt;sstream&gt;using namespace cv;using namespace cv::face;using namespace std;#define ROW_MIN        45int exitFlag = 0;int Recognition_And_Draw();int Recognition_And_Draw()&#123;  int ret = 0; //  double scale = 4; //Zoom factor  double fx = 1 / scale;  Mat frame;  //Video frame  VideoCapture cap(0);    //Open the camera  if(!cap.isOpened())&#123;    cout &lt;&lt; &quot;Open camera failed.\n&quot; &lt;&lt; endl;    return -1;  &#125;  //Load cascade classifier  CascadeClassifier cascade;  ret = cascade.load(&quot;haarcascade_frontalface_alt2.xml&quot;);  if(!ret)&#123;    printf(&quot;Load xml failed[ret = %d]. \n&quot;, ret);    return -1;  &#125;  cout &lt;&lt; &quot;Load xml succeed.&quot; &lt;&lt; endl;  // Loading trained face models  Ptr&lt;BasicFaceRecognizer&gt; modelPCA = EigenFaceRecognizer::create();    modelPCA-&gt;read(&quot;MyFacePCAModel.xml&quot;);    Ptr&lt;BasicFaceRecognizer&gt; modelFisher = FisherFaceRecognizer::create();  modelFisher-&gt;read(&quot;MyFaceFisherModel.xml&quot;);    Ptr&lt;LBPHFaceRecognizer&gt; modelLBPH = LBPHFaceRecognizer::create();    modelLBPH-&gt;read(&quot;MyFaceLBPHModel.xml&quot;);    while(!exitFlag)&#123;    cap &gt;&gt; frame;    if(frame.empty())      continue;    Mat facesImg;  //    vector&lt;Rect&gt; faces;  //Create a vector container for storing faces    Mat gary_img; //grayscale image    Mat scl_gary_img; //Scaled grayscale image    cvtColor(frame, gary_img, COLOR_BGR2GRAY); //Convert the original image to a grayscale image    resize(gary_img, scl_gary_img, Size(), fx, fx, INTER_LINEAR); //resize img    equalizeHist( scl_gary_img, scl_gary_img );  //face detection    cascade.detectMultiScale(scl_gary_img, faces, 1.1, 2, 0|CASCADE_SCALE_IMAGE,Size(30, 30));    printf(&quot;Face.size = %ld\n&quot;, faces.size());  //facesImg = scl_gary_img(faces[0]);    Mat face_resize;  //To prevent the picture is too small (that is, people too far away from the camera)    int predictPCA = 0;      int predictFisher = 0;      int predictLBPH = 0;    for(size_t i = 0; i &lt; faces.size(); i++)&#123;      Rect rectFace = faces[i];      facesImg = scl_gary_img(faces[i]);      if(facesImg.rows &gt;= ROW_MIN)&#123;        resize(facesImg, face_resize, Size(92, 112));      &#125;      else&#123;        printf(&quot;faceImg.rows[%d] &lt; %d \n&quot;, facesImg.rows, ROW_MIN);        continue;      &#125;      if(!face_resize.empty())&#123;        predictPCA = modelPCA-&gt;predict(face_resize);          predictFisher = modelFisher-&gt;predict(face_resize);          predictLBPH = modelLBPH-&gt;predict(face_resize);       &#125;      cout &lt;&lt; &quot;predictPCA   : &quot; &lt;&lt; predictPCA    &lt;&lt; endl;      cout &lt;&lt; &quot;predictFisher: &quot; &lt;&lt; predictFisher &lt;&lt; endl;      cout &lt;&lt; &quot;predictLBPH  : &quot; &lt;&lt; predictLBPH   &lt;&lt; endl;      rectangle(frame, Point(rectFace.x, rectFace.y) * scale, Point(rectFace.x + rectFace.width, rectFace.y + rectFace.height) * scale, Scalar(0, 255, 0), 2, 8);      if (predictPCA == 41)&#123;        putText(frame, &quot;Liuyang&quot;, Point(faces[i].x, faces[i].y) * scale, FONT_HERSHEY_SIMPLEX, 1, Scalar(0, 0, 255), 2);      &#125;      else&#123;        putText(frame, &quot;X&quot;, Point(faces[i].x, faces[i].y) * scale, FONT_HERSHEY_SIMPLEX, 1.5, Scalar(0, 0, 255), 2);      &#125;  // if(faces.size() &lt;= 0)&#123;  //  cout &lt;&lt; &quot;There are no faces in the camera.\n&quot; &lt;&lt; endl; // &#125;    &#125;    imshow(&quot;frame&quot;, frame);      if (waitKey(1) == 27)&#123;                exitFlag = 1;                cout &lt;&lt; &quot;Esc...&quot; &lt;&lt; endl;                break;      &#125;  &#125;&#125;int main()&#123;  Recognition_And_Draw();  return 0;&#125;</code></pre><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/Face-Recognition-with-OpenCV/7.jpg"></p><p>Note:    </p><ol><li>This program supports multiple face recognition at the same time</li><li>Face recognition accuracy is not high, and it is susceptible to environmental factors such as light.</li></ol><div><h1>推荐文章<span style="font-size:0.45em; color:gray"></span></h1><ul><li><a href="https://godliuyang.wang/2020/08/17/leetcode-easy-9/">LeetCode EASY_9</a></li><li><a href="https://godliuyang.wang/2020/03/30/scikit-image-guide/">scikit-image guide</a></li><li><a href="https://godliuyang.wang/2020/01/29/sort/">SORT</a></li></ul></div>]]></content>
      
      
      <categories>
          
          <category> 实习 </category>
          
          <category> Face Recognition </category>
          
      </categories>
      
      
        <tags>
            
            <tag> OpenCV </tag>
            
            <tag> c++ </tag>
            
            <tag> python </tag>
            
            <tag> Face Recongnition </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Enjoy PyTorch</title>
      <link href="/2019/08/07/enjoy-pytorch/"/>
      <url>/2019/08/07/enjoy-pytorch/</url>
      
        <content type="html"><![CDATA[<h1 id="Installing-PyTorch-with-Anaconda-and-Conda"><a href="#Installing-PyTorch-with-Anaconda-and-Conda" class="headerlink" title="Installing PyTorch with Anaconda and Conda"></a>Installing PyTorch with Anaconda and Conda</h1><p>My Particular Environment:</p><ul><li>OS: Ubuntu 16.04</li><li>Package Manager: conda</li><li>Python: 3.6</li><li>CUDA: None</li></ul><p>Getting started with PyTorch is very easy. The recommended best option is to use the Anaconda Pythob package manager.</p><ol><li><a href="https://www.anaconda.com/distribution/">Download and install Anaconda</a>(Go with the latest Python version)<br>You can download the <code>.sh</code> package from the Anaconda website, but it’s very slowly for me. So i find another choice.<br>You can find it in <a href="https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/">Tsinghua university open source mirror station</a>, which i download is <code>Anaconda3-5.2.0-Linux-x86_64.sh</code>. Or if you already get the “wget”, you can run this command in the terminal.<pre><code class="line-numbers language-bash">wget https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/Anaconda3-5.2.0-Linux-x86_64.sh</code></pre>Use <code>conda -V</code> to check the Version of Anaconda after open a new terminal.<br>If it isn’t work, try,<pre><code class="line-numbers language-bash">echo &#39;export PATH=&quot;~/anaconda3/bin:$PATH&quot;&#39; &gt;&gt; ~/.bashrcsource ./bashrc</code></pre></li><li>Go to the Getting Started section on the <a href="https://pytorch.org/">Pytorch website</a>.</li><li>Specify the appropriate configuration options for your particular environment.<br><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/Enjoy-PyTorch-Task1/1.png"></li><li>Run the presented command in the terminal to install Pytorch.<pre><code class="line-numbers language-bash">conda install pytorch-cpu torchvision-cpu -c pytorch</code></pre></li></ol><pre><code class="line-numbers language-python">import torchimport torch.nn as nnimport torchvisionimport torch.utils.data as Data# Hyper ParametersEPOCH = 1  BATCH_SIZE = 50LR = 0.001  DOWNLOAD_MNIST = True  # Mnisttrain_data = torchvision.datasets.MNIST(    root=&#39;./mnist/&#39;,      train=True,  # this is training data    transform=torchvision.transforms.ToTensor(),  # exchange PIL.Image or numpy.ndarray to torch.FloatTensor (C x H x W)    download=DOWNLOAD_MNIST,  )test_data = torchvision.datasets.MNIST(    root=&#39;./mnist/&#39;,    train=False)# BATCH_SIZEtrain_loader = Data.DataLoader(    dataset=train_data,    batch_size=BATCH_SIZE,    shuffle=True  )# test_datatest_x = torch.unsqueeze(test_data.test_data, dim=1).type(torch.FloatTensor)test_y = test_data.test_labels# cnnclass CNN(nn.Module):    def __init__(self):        super(CNN, self).__init__()        self.layer1 = nn.Sequential(            # (1, 28, 28)            nn.Conv2d(                in_channels=1,                out_channels=16,                kernel_size=5,                  stride=1,                  padding=2,                groups=1            ),            # (16, 28, 38)            nn.ReLU(),            nn.MaxPool2d(kernel_size=2)            # (16, 14, 14)        )        self.layer2 = nn.Sequential(            nn.Conv2d(                in_channels=16,                out_channels=32,                kernel_size=5,                stride=1,                padding=2            ),            nn.ReLU(),            nn.MaxPool2d(kernel_size=2)        )        self.layer3 = nn.Linear(32 * 7 * 7, 10)    def forward(self, x):        # print(x.shape)        x = self.layer1(x)        # print(x.shape)        x = self.layer2(x)        # print(x.shape)        x = x.view(x.size(0), -1)        # print(x.shape)        x = self.layer3(x)        # print(x.shape)        return xcnn = CNN()optimizer = torch.optim.Adam(cnn.parameters(), lr=LR)loss_function = nn.CrossEntropyLoss()for epoch in range(EPOCH):    for step, (b_x, b_y) in enumerate(train_loader):        output = cnn(b_x)        loss = loss_function(output, b_y)        optimizer.zero_grad()        loss.backward()        optimizer.step()print(&#39;finished training&#39;)test_out = cnn(test_x)predict_y = torch.argmax(test_out, 1).data.numpy()print(&#39;Accuracy in Test : %.4f%%&#39; % (sum(predict_y == test_y.data.numpy()) * 100/ len(predict_y)))</code></pre><div><h1>推荐文章<span style="font-size:0.45em; color:gray"></span></h1><ul><li><a href="https://godliuyang.wang/2020/04/21/gpu-servers/">GPU servers</a></li></ul></div>]]></content>
      
      
      <categories>
          
          <category> PyTorch Notes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PyTorch </tag>
            
            <tag> Deep Learning </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PCA算法实现</title>
      <link href="/2019/08/07/pca-suan-fa-shi-xian/"/>
      <url>/2019/08/07/pca-suan-fa-shi-xian/</url>
      
        <content type="html"><![CDATA[<h1 id="PCA算法实例及C-实现"><a href="#PCA算法实例及C-实现" class="headerlink" title="PCA算法实例及C++实现"></a>PCA算法实例及C++实现</h1><h2 id="PCA算法"><a href="#PCA算法" class="headerlink" title="PCA算法"></a>PCA算法</h2><p>总结一下PCA的算法步骤：</p><p>设有m条n维数据。</p><ol><li>将原始数据按列组成n行m列矩阵X</li><li>将X的每一行（代表一个属性字段）进行零均值化，即减去这一行的均值</li><li>求出协方差矩阵 $C=\frac{1}{m}XX^\mathsf{T}$</li><li>求出协方差矩阵的特征值及对应的特征向量</li><li>将特征向量按对应特征值大小从上到下按行排列成矩阵，取前k行组成矩阵P</li><li>$Y = PX$即为降维到k维后的数据</li></ol><h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><p>以<br>$$ \begin{pmatrix}<br>  -1 &amp; -1 &amp; 0 &amp; 2 &amp; 0 \\<br>  -2 &amp; 0 &amp; 0 &amp; 1 &amp; 1 \<br>\end{pmatrix} $$<br>为例，我们用PCA方法将这组二维数据其降到一维。</p><p>因为这个矩阵的每行已经是零均值，这里我们直接求协方差矩阵：<br>$$ C=\frac{1}{5}\begin{pmatrix}<br>  -1 &amp; -1 &amp; 0 &amp; 2 &amp; 0 \\<br>  -2 &amp; 0 &amp; 0 &amp; 1 &amp; 1 \<br>\end{pmatrix}\begin{pmatrix}<br>  -1 &amp; -2 \\<br>  -1 &amp; 0  \\<br>  0  &amp; 0  \\<br>  2  &amp; 1  \\<br>  0  &amp; 1 \<br>\end{pmatrix}=\begin{pmatrix}<br>  \frac{6}{5} &amp; \frac{4}{5} \\<br>  \frac{4}{5} &amp; \frac{6}{5} \<br>\end{pmatrix}$$<br>然后求其特征值和特征向量，具体求解方法不再详述，可以参考相关资料。求解后特征值为：<br>$$\lambda_1=2,\lambda_2=2/5$$<br>其对应的特征向量分别是：<br>$$c_1\begin{pmatrix}<br>  1 \\<br>  1<br>\end{pmatrix},c_2\begin{pmatrix}<br>  -1 \\<br>  1<br>\end{pmatrix}$$<br>其中对应的特征向量分别是一个通解， $c_1$和 $c_2$ 可取任意实数。那么标准化后的特征向量为：<br>$$\begin{pmatrix}<br>  1/\sqrt{2} \\<br>  1/\sqrt{2}<br>\end{pmatrix},\begin{pmatrix}<br>  -1/\sqrt{2} \\<br>  1/\sqrt{2}<br>\end{pmatrix}$$<br>因此我们的矩阵P是：<br>$$P=\begin{pmatrix}<br>  1/\sqrt{2}  &amp; 1/\sqrt{2}  \\<br>  -1/\sqrt{2} &amp; 1/\sqrt{2}<br>\end{pmatrix}$$<br>最后我们用P的第一行乘以数据矩阵，就得到了降维后的表示：<br>$$Y=\begin{pmatrix}<br>  1/\sqrt{2} &amp; 1/\sqrt{2}<br>\end{pmatrix}\begin{pmatrix}<br>  -1 &amp; -1 &amp; 0 &amp; 2 &amp; 0 \\<br>  -2 &amp; 0 &amp; 0 &amp; 1 &amp; 1<br>\end{pmatrix}=\begin{pmatrix}<br>  -3/\sqrt{2} &amp; -1/\sqrt{2} &amp; 0 &amp; 3/\sqrt{2} &amp; -1/\sqrt{2}<br>\end{pmatrix}$$<br>可以验证协方差矩阵C的对角化：<br>$$PCP^\mathsf{T}=\begin{pmatrix}<br>  1/\sqrt{2}  &amp; 1/\sqrt{2}  \\<br>  -1/\sqrt{2} &amp; 1/\sqrt{2}<br>\end{pmatrix}\begin{pmatrix}<br>  6/5 &amp; 4/5 \\<br>  4/5 &amp; 6/5<br>\end{pmatrix}\begin{pmatrix}<br>  1/\sqrt{2} &amp; -1/\sqrt{2}  \\<br>  1/\sqrt{2} &amp; 1/\sqrt{2}<br>\end{pmatrix}=\begin{pmatrix}<br>  2 &amp; 0  \\<br>  0 &amp; 2/5<br>\end{pmatrix}$$<br><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/PCA%E7%AE%97%E6%B3%95%E5%AE%9E%E7%8E%B0/02.png"></p><h2 id="C-实现"><a href="#C-实现" class="headerlink" title="C++实现"></a>C++实现</h2><p>因为要对一组图片信息进行训练，所以我写了一部分通过摄像头截取图片帧的代码，<code>get_img()</code>函数。这里提取了5个特征脸和一个均值脸</p><pre><code class="line-numbers language-cpp">#include &lt;opencv2/core/core.hpp&gt;#include &lt;opencv2/highgui/highgui.hpp&gt;#include &lt;opencv2/imgproc/imgproc.hpp&gt;#include &lt;opencv2/objdetect/objdetect.hpp&gt;#include &lt;iostream&gt;#include &lt;fstream&gt;#include &lt;sstream&gt;#define img_num 300 //训练图片的张数using namespace cv;using namespace std;//通过摄像头保存要训练的图片//打开摄像头int get_img()&#123;  VideoCapture cap(0);  if(!cap.isOpened())  &#123;    return -1;  &#125;  Mat frame;  bool stop = false;  int i = 1;  while(!stop)&#123;    cap &gt;&gt; frame;    printf(&quot;%d\n&quot;, i);    if (frame.empty())      stop = true;    //string filename = format(&quot;%d.jpg&quot;, i);    char filename[20];    sprintf(filename, &quot;Img/%d.jpg&quot;, i);    imwrite(filename, frame);    i++;    imshow(&quot;frame&quot;, frame);    waitKey(30);    if(i &gt; img_num)      break;  &#125;return -1;&#125;//把图像归一化为0-255Mat norm_0_255(const Mat&amp; src)&#123;  Mat dst;  switch(src.channels())&#123;    case 1:        cv::normalize(src, dst, 0, 255, NORM_MINMAX, CV_8UC1);        break;    case 3:        cv::normalize(src, dst, 0, 255, NORM_MINMAX, CV_8UC3);        break;    default:        src.copyTo(dst);        break;  &#125;  return dst;&#125;//将给定的图像转化为行矩阵Mat asRowMatrix(const vector&lt;Mat&gt;&amp; src, int rtype, double alpha = 1, double beta = 0)&#123;  // 样本数量  size_t n = src.size();  //没有样本，返回空矩阵  if (n == 0)    return Mat();  //样本的维数  size_t d = src[0].total();  Mat data(n, d, rtype);  //拷贝数据  for (int i = 0; i &lt; n; i++)&#123;    if(src[i].empty())&#123;      string error_message = format(&quot;Image number %d was empty, please check your input data.&quot;, i);      CV_Error(CV_StsBadArg, error_message);    &#125;    //确保数据能被reshape    if(src[i].total() != d)&#123;      string error_message = format(&quot;Wrong number of elements in matrix #%d! Expected %d was %d.&quot;, i, d, src[i].total());      CV_Error(CV_StsBadArg, error_message);    &#125;    Mat xi = data.row(i);    //转化为1行，n列的格式    if(src[i].isContinuous())&#123;      src[i].reshape(1, 1).convertTo(xi, rtype, alpha, beta);    &#125;    else &#123;      src[i].clone().reshape(1, 1).convertTo(xi, rtype, alpha, beta);    &#125;  &#125;  return data;&#125;int main(int argc, const char* argv[])&#123;  vector&lt;Mat&gt; db;  //get_img();  for(int i=1; i&lt;img_num;i++)&#123;    string filename = format(&quot;Img/%d.jpg&quot;, i);    db.push_back(imread(filename, IMREAD_GRAYSCALE));  &#125;  // Build a matrix with the observations in row:    Mat data = asRowMatrix(db, CV_32FC1);    // PCA算法保持5主成分分量    int num_components = 5;    //执行pca算法    PCA pca(data, Mat(), CV_PCA_DATA_AS_ROW, num_components);    //copy  pca算法结果    Mat mean = pca.mean.clone();    Mat eigenvalues = pca.eigenvalues.clone();    Mat eigenvectors = pca.eigenvectors.clone();        //均值脸    imshow(&quot;avg&quot;, norm_0_255(mean.reshape(1, db[0].rows)));    //五个特征脸    imshow(&quot;pc1&quot;, norm_0_255(pca.eigenvectors.row(0)).reshape(1, db[0].rows));    imshow(&quot;pc2&quot;, norm_0_255(pca.eigenvectors.row(1)).reshape(1, db[0].rows));    imshow(&quot;pc3&quot;, norm_0_255(pca.eigenvectors.row(2)).reshape(1, db[0].rows));    imshow(&quot;pc4&quot;, norm_0_255(pca.eigenvectors.row(3)).reshape(1, db[0].rows));    imshow(&quot;pc5&quot;, norm_0_255(pca.eigenvectors.row(4)).reshape(1, db[0].rows));    while(1)        waitKey(0);    // Success!    return 0;&#125;</code></pre><p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/PCA%E7%AE%97%E6%B3%95%E5%AE%9E%E7%8E%B0/01.png"></p><div><h1>推荐文章<span style="font-size:0.45em; color:gray"></span></h1><ul><li><a href="https://godliuyang.wang/2019/08/10/face-recognition-with-opencv/">Face Recognition</a></li><li><a href="https://godliuyang.wang/2019/08/05/pca-yuan-li-fen-xi/">PCA原理分析</a></li><li><a href="https://godliuyang.wang/2019/08/03/face-detection/">Face Detection</a></li></ul></div>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 图像处理 </tag>
            
            <tag> OpenCV </tag>
            
            <tag> c++ </tag>
            
            <tag> PCA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PCA原理分析</title>
      <link href="/2019/08/05/pca-yuan-li-fen-xi/"/>
      <url>/2019/08/05/pca-yuan-li-fen-xi/</url>
      
        <content type="html"><![CDATA[<p>参考资料<br><a href="https://cdn.jsdelivr.net/gh/liuyaanng/Blog_source@master/blog_images/PCA%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/PCA.pdf">PCA原理分析</a></p><h1 id="PCA的数学原理"><a href="#PCA的数学原理" class="headerlink" title="PCA的数学原理"></a>PCA的数学原理</h1><p>PCA（Principal Component Analysis）是一种常用的数据分析方法。PCA通过线性变换将原始数据变换为一组各维度线性无关的表示，可用于提取数据的主要特征分量，常用于高维数据的降维。</p><h2 id="数据的向量表示以及降维问题"><a href="#数据的向量表示以及降维问题" class="headerlink" title="数据的向量表示以及降维问题"></a>数据的向量表示以及降维问题</h2><p>一般情况下，在数据挖掘和机器学习中，数据被表示为向量。例如某个外卖商家2018年全年的流量及交易记录可以看成是一组数据的集合，其中每一天的数据是一条记录。记录的格式如下:<br>(日期, 浏览量，访客数，下单数，成交数，成交金额)<br>其中”日期”是一个记录标志而非度量值，而数据挖掘关心的大多是度量值，因此如果我们忽略日期这个字段后，我们得到一组记录，每条记录可以被表示为一个五维向量，其中一条看起来大约是这个样子：<br>$$(1000, 580, 300, 240, 3000)^T$$<br>注意这里用了转置，习惯上使用列向量来表示一条记录。本文说到的向量默认都是列向量。    </p><p>我们当然可以对这一组五维向量进行分析和挖掘，不过很多机器学习算法的复杂度和数据的维数有着密切关系，